{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./views/BigText/get_max_font_size.js","webpack:///./views/BigText/index.js","webpack:///./views/ClockPage/monitor-banner-ct.png","webpack:///./tab-utils/ads/ezoic.ts","webpack:///./tab-utils/load_ad.js","webpack:///./node_modules/js-cookie/src/js.cookie.js","webpack:///./.build/.goldpage/generated-source-code/browser-entries/views/ClockPage/clock.page.js.browser-entry.js","webpack:///./views/ClockPage/ad_slots.tsx","webpack:///./views/ClockPage/ClockView.js","webpack:///./views/ClockPage/js/preset_concept_name.js","webpack:///./views/utils/change_icon.ts","webpack:///./views/utils/date_utils.ts","webpack:///./views/ClockPage/js/load_clock.ts","webpack:///./views/ClockPage/js/PRESETS.js","webpack:///./views/ClockPage/js/init_clock_options.js","webpack:///./tab-utils/utils/system-preferences.ts","webpack:///./views/ClockPage/onPageLoad.js","webpack:///./views/ClockPage/clock.page.js","webpack:///./tab-utils/private/remove_hash.js","webpack:///./tab-utils/auto_remove_hash.js","webpack:///./tab-utils/ads/Products/ProductsView.tsx","webpack:///./views/News.js","webpack:///./tab-utils/TabSettings/SettingsView.js","webpack:///./tab-utils/TabSettings/load_font.js","webpack:///./tab-utils/TabSettings/load_asap.js","webpack:///./tab-utils/TabSettings/load_font_list.js","webpack:///./tab-utils/TabSettings/set_background/set_background.ts","webpack:///./tab-utils/TabSettings/PersistantInput.ts","webpack:///./tab-utils/utils/escape_html.ts","webpack:///./tab-utils/TabSettings/migrations/rename_keys_and_values.js","webpack:///./tab-utils/TabSettings/migrations/001-ancient-schema.js","webpack:///./tab-utils/TabSettings/migrations/migrate_user_presets.js","webpack:///./tab-utils/TabSettings/migrations/002-migrate-user-preset-ids-and-values.js","webpack:///./tab-utils/TabSettings/migrations/003-migrate-subapp-id.js","webpack:///./tab-utils/TabSettings/migrations/004-migrate-old-timer-tab-schema.js","webpack:///./tab-utils/TabSettings/migrations/005-migrate-to-centralized-store.ts","webpack:///./tab-utils/TabSettings/TabSettings.ts","webpack:///./tab-utils/TabSettings/run_migrations.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","22","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","dummy_el","get_max_font_size","dom_el","max_width","max_height","assert","isPositiveNumber","el","outer_width","Infinity","outer_height","DUMMY_FONT_SIZE","dummy_html","innerHTML","dummy","getDummy","tagName","dummy_text","textContent","track_error","fontSize","width","height","style","fontFamily","get_computed_style","whiteSpace","letterSpacing","lineHeight","dummy_height","get_size","dummy_width","JSON","stringify","is_rendered","ratio_width","ratio_height","ratio","Math","min","getEstimation","log_data","id","dummy_wrapper","document","createElement","pointerEvents","overflow","position","zIndex","visibility","prepend","body","styleProp","defaultView","getComputedStyle","getPropertyValue","val","constructor","Number","el_id","rendered","val__casted","parseInt","offsetParent","get_max_width","BigText","content_on_top","top_line_content","className","click-name","set_text_position","includes","layout_container","querySelector","forEach","slot","classList","on_big_text_load","containerEl","scaleEl","zoomEl","addEventListener","refresh_big_text_size","passive","make_element_zoomable","set_bottom_line","bottom_text","bot_el","getElementById","set_max_width_getter","_get_max_width","top_el","innerWidth","innerHeight","container_width","middle_table","padding","layout_top_content","layout_top_content_height","width_limit","max","compute_max_size","top_line_sizes","bot_line_sizes","compute_font_sizes","disable_ezoic","set","expires","adsense_code_load_promise","_user_donated","_ad_blocker_is_installed","load_ads","AD_SLOTS","dont_show_adsense","enable_adsense","dont_show_ads","documentElement","add","setTimeout","enable_floating_ads","SHOW_DELAY","disable_ads","store","set_val","Ad_left","ad_slots","slot_left_atf","get_left_slot","slot_left_btf","slot_name","content","is_floating","adsense_id","get_adsense_slot_id","AdSenseAd","slot_id","ezoic_slot","get_ezoic_slot","ezoic_id","EzoicAd","undefined","Ad_btf_2","slot_content","auto_sizing","Ad_ATF","AdView","startsWith","tab_app_google_adsense","props","assign","data-ad-client","data-ad-slot","ezoic_slots","filter_slots","is_ezoic","filter","adsense_slots","get_adsense_slots","is_adsense","get_product_slots","is_product","fn","is_custom","res","load_adsense_code","success","adsbygoogle","track_event","resolve","url","onload","onerror","scriptEl","already_resolved","Promise","_resolve","add_addendum","src","async","getElementsByTagName","appendChild","user_donated","is_nodejs","has_val","is_small_screen","ad_blocker_detected","ad_blocked","is_fringe_browser","is_too_many_visits","no_adsense_slots","disable_reason","get_browser_name","get_screen_size","get_number_of_visits_in_the_last_24_hours","screen","isInteger","browser_name","toLowerCase","ad_blocker_test","offsetHeight","removeChild","Array","from","querySelectorAll","positionTopOriginal","positionOriginal","topOriginal","top","leftOriginal","left","oldPosition","isFixedLayout","addScrollListener","scrollPos","getElementScrollPos","positionLeft","positionTop","newPosition","fireInitialScroll","onlyUserScroll","location","hash","href","origin","donated","remove","init","factory","OldCookies","Cookies","api","noConflict","extend","arguments","attributes","decode","replace","decodeURIComponent","converter","path","defaults","Date","toUTCString","test","e","write","encodeURIComponent","String","escape","stringifiedAttributes","attributeName","split","cookie","json","jar","cookies","parts","join","charAt","read","parse","getJSON","withConverter","ret","browserConfig","require","initFunctions","pageConfig","img_src","click_name","product_name","product_text","amazon_banner","product_link","ClockView","TopLine","SettingsView","preset_concept_name","ProductsView","News","margin","favicon_dom_el","change_icon","REL","REL2","oldlinks","getAttribute","head","rel","type","WEEKDAY_NAMES","MONTH_NAMES","get_week","that","newYear","getFullYear","day","getDay","weeknum","daynum","floor","getTime","getTimezoneOffset","nday","get_hours","twelveClock","getHours","appendZero","get_minutes","getMinutes","get_seconds","getSeconds","get_date","getDate","get_day","get_month","getMonth","time_icon","scale","color","canvas","ctx","getContext","fillStyle","font","fillText","toDataURL","str","load_clock","_ref","spark","get_option_value","time_text_el","digit1","digit2","force","is_twelve_hour_format","title","lastTitle","minutes","lastMinutes","refreshSize","seconds","newTime","lastTime","lastDay","date_text","repeater","steel","clock_position","clock_background_color","clock_background_image","clock_shadow","clock_font","clock_size","clock_color","steel_gold","gold","simple","grey","ocean","ocean2","river_valley","lobster","modern","lcd","lcd_green","digital","paper","classy","sin_city","van_gogh","mars_terraform","neo","red","purple","naruto","eugene_von_guerard_1","the_king","gate_of_mages","init_clock_options","text_container","tab_settings","TabSettings","option_spec_list","option_id","option_type","option_default","option_description","option_placeholder","is_creator_option","input_width","option_choices","toLocaleTimeString","navigator","language","option_dependency","match","matchMedia","matches","preset_spec_list","PRESETS","on_any_change","is_initial_run","update_options","dom_beat","on_font_change","enable_import_export","subapp_id","font_loaded_promise","generate_dom","textShadow","show_seconds","show_pm","twelve_hour","onPageLoad","load_common","auto_remove_hash","race","sleep","config","route","view","remove_hash","history","pushState","pathname","search","IGNORE_LIST","INCLUDE_LIST","check","isEmptyHash","timeout","capture","endsWith","_extends","target","source","this","product_slots","display","map","product_info","ProductView","_ref2","paddingLeft","minHeight","alignItems","justifyContent","backgroundColor","dangerouslySetInnerHTML","__html","enable_products_view","products_section","onclick","children","marginTop","marginBottom","load_font","font_name","do_it","WebFont","load","get_font_spec","fontactive","fontinactive","attempts","pow","promise","custom","families","urls","google","load_font_list","resolve_promise","resp","error","console","message","font_list","f","family","sort","onsuccess","do_","script","load_asap","BG_EL","bg_container_selector_","gen","reject","_next","_throw","arg","info","done","then","self","args","err","_set_background","regeneratorRuntime","mark","_callee","color_code","image_uri","bg_container_selector","is_outdated","bg_img_val","wrap","_context","prev","next","get_is_outdated","load_image","sent","abrupt","stop","show_loader","apply_color","backgroundImage","apply_image","_x4","_x5","_load_image","_callee2","imgEl","loaded","on_load","on_error","set_loader_indicator","_context2","alert","w","h","image_val","bg_container","bg_container_","el1","el2","backgroundSize","call_number","current","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_typeof","obj","iterator","_possibleConstructorReturn","ReferenceError","_assertThisInitialized","_get","receiver","Reflect","base","_getPrototypeOf","_superPropBase","desc","getOwnPropertyDescriptor","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","TypeError","writable","configurable","_setPrototypeOf","enumerableOnly","symbols","sym","_classCallCheck","instance","Constructor","_defineProperties","descriptor","_createClass","protoProps","staticProps","_classPrivateFieldLooseBase","privateKey","_classPrivateFieldLooseKey","PersistantInput","_props","_input_id","_on_input_change","_input_default","_storage_key","input_tag","input_type","_dom_el","_input_el","input_id","on_input_change","input_default","_input_retriever","get_val","set_stored_value","_input_modifier","_this","_generate_input","_ref3","input_description","input_container","description_el","input_el","setAttribute","generate_input","getOwnPropertyDescriptors","defineProperties","_init_dom","init_val","has_stored_value","get_stored_value","_change_event","hide_show_el","BooleanInput","_PersistantInput","_this2","checked","removeAttribute","TextInput","_PersistantInput2","_this3","input_placeholder","placeholder","_PersistantInput3","SelectInput","_this4","input_options","text","divider_html","_this5","option_arg","_generate_option_html","new_options","_this6","current_value","current_option_values","_parse_option_arg","get_divider","_this$_parse_option_a","val_pretty","_PersistantInput4","DateInput","_getPrototypeOf2","_this7","_len","_key","concat","enableTime","ColorInput","_PersistantInput5","_this8","Button","on_click","_ref2$className","_this9","ev","preventDefault","to_hide","rename_keys_and_values","key_replacements","value_replacements","db","has_changes","entries","localStorage","clear","migrate_ancient_schema","theme","bg_image","bg_color","font_shadow","color_font","font_size","clock_theme","random","migrate_user_presets","migrator","presets__storage_key","presets__string","presets","preset","presets__string__updated","migrate_user_preset_ids_and_values","preset_name","preset_id","preset_options","preset_values","migrate_subapp_id","app_name","migrate_old_timer_tab_schema","bg_url","goto_url","arr","isArray","toString","_arr","_n","_d","_e","_s","_i","migrate_to_centralized_store","removeItem","migrate__rename_keys","_toConsumableArray","arr2","_arrayWithoutHoles","iter","_iterableToArray","_nonIterableSpread","schema_version","migrators","schema_version__curent","get_schema_version","set_schema_version","run_migrations","_ref$text_container","_ref$no_random_preset","no_random_preset","_ref$on_font_change","creator_content","options_content","options_container","save_content","save_container","share_content","share_container","preset_list","option_list","resolve_font_loaded_promise","button_mod","button_del","name_option","button_url","_global_side_effects__timeout","_previous_link","_link_el","_font_list_already_loading","_ref11","hasTextFontInput","find","hasTextShadowInput","hasTextColorInput","_ref4","_ref12","option_spec","TextColorOption","TextShadowOption","BackgroundImageOption","BackgroundColorOption","ChoiceOption","_load_font_list2","_update_font","opt","generate_import_export_dom","global_side_effects","btn","modify_preset","_btn","delete_preset","_btn2","save_created_preset","preset_selected","is_creator_preset","input_value","from_name_to_id","get_preset_by_name","can_be_null","error_msg","option","preset_val","new_preset","SavedPreset","save_preset","select_preset","reset_creator","reset","active_preset","is_real_preset","_loop","opt_id","opt_val","find_option","set_input_value","select_preset_creator","new_preset_id","generate_unique_preset_id_copy","copy_to_creator","from_id_to_name","is_saved_preset","remove_preset","_ref5","_ref5$is_initial_run","run_side_effects","requestAnimationFrame","update_background","update_font","update_option_visibility","update_button_visibility","update_share_link","update_save_block","load_preset_from_url","track_user_presets","set_options_container_visibility","every","Boolean","is_preset_selector","current_link","share_link","preset_url","preset_data","from_url","preset_conflict","show_toast","image","current_backgroud_image","_x","_x2","_x3","current_backgroud_color","get_font_name","current_font_name","load_text_font","dep_option_id","hide","show","is_randomizer_preset","t0","font_option","t1","t2","t3","t4","t5","add_fonts","creator_preset","active_value","is_background_image_option","background_image_option","is_background_color_option","background_color_option","is_font_option","random_preset","preset_thing","FakePreset","preset_option","default_preset_id","Option","_ref6","_ref6$is_creator_opti","input_args","user_input","before_dom","input_set","input_get","get_preset_value","preset_value","_Option","DateOption","_Option2","BooleanOption","_this10","_Option3","SelectOption","_this11","add_options","_SelectOption","_ref7","_Option4","TextOption","_this12","_Option5","ColorOption","_this13","_ColorOption","_TextOption","_SelectOption2","PresetOption","_ref8","_this14","get_input_options","refresh","_this$tab_settings$pr","presets_ordered","special_ones","saved_ones","native_ones","_ref9","_TextOption2","_this15","_ColorOption2","_getPrototypeOf3","_this16","_len2","_key2","_SelectOption3","FontOption","_ref10","_this17","input_optoins","get_all_preset_fonts","_load_text_font","_callee3","_ref21","_context3","PresetList","_ref13","_preset_savior","_native_presets","randomizer_preset","CreatorPreset","_ref14","_ref15","refresh_user_input","get_saved_presets","_ref16","_ref17","_ref17$can_be_null","_get_all_presets","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_this$presets_ordered","preset_font_names","preset_font_name","Set","preset_ids","_get_all_preset_ids","white_space_seralized","_i2","candidate","_this$presets_ordered2","_this$presets_ordered3","_get_saved_presets","PresetSerializer","preset_string","Preset","_ref18","prettified","_Preset","_getPrototypeOf4","_this18","_len3","_key3","_generated_link","to_url","_Preset2","NativePreset","_this19","PresetData","rest","PresetValues","PresetSavior","_ref19","_subapp_id","_get_presets","a","warning","_save_presets","old_length","new_length","_FakePreset","RandomizerPreset","_ref20","_this20","_picked","random_candidates","pick_random_preset","_FakePreset2","_getPrototypeOf5","_this21","_len4","_key4","NameIdConverter","sep_regex","word","toUpperCase","LinkSerializer","str__base64","btoa","atob","serialize_preset","preset_base64","_to_base64","url_base","name_encoded","pipe_data","_from_base64","deserialize_preset","is_error","log"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAKlC,IAFGe,GAAqBA,EAAoBhB,GAEtCO,EAASC,QACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrBiB,GAAI,GAGDZ,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU8B,QAGnC,IAAIC,EAASH,EAAiB5B,GAAY,CACzCK,EAAGL,EACHgC,GAAG,EACHF,QAAS,IAUV,OANAhB,EAAQd,GAAUW,KAAKoB,EAAOD,QAASC,EAAQA,EAAOD,QAASJ,GAG/DK,EAAOC,GAAI,EAGJD,EAAOD,QAKfJ,EAAoBO,EAAInB,EAGxBY,EAAoBQ,EAAIN,EAGxBF,EAAoBS,EAAI,SAASL,EAASM,EAAMC,GAC3CX,EAAoBY,EAAER,EAASM,IAClC5B,OAAO+B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEX,EAAoBgB,EAAI,SAASZ,GACX,oBAAXa,QAA0BA,OAAOC,aAC1CpC,OAAO+B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DrC,OAAO+B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKzC,OAAO0C,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBzC,OAAO+B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBS,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAL,EAAoBS,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRX,EAAoBY,EAAI,SAASgB,EAAQC,GAAY,OAAO/C,OAAOC,UAAUC,eAAeC,KAAK2C,EAAQC,IAGzG7B,EAAoB8B,EAAI,IAExB,IAAIC,EAAaC,OAAqB,aAAIA,OAAqB,cAAK,GAChEC,EAAmBF,EAAW5C,KAAKuC,KAAKK,GAC5CA,EAAW5C,KAAOf,EAClB2D,EAAaA,EAAWG,QACxB,IAAI,IAAIvD,EAAI,EAAGA,EAAIoD,EAAWlD,OAAQF,IAAKP,EAAqB2D,EAAWpD,IAC3E,IAAIU,EAAsB4C,EAI1B1C,EAAgBJ,KAAK,CAAC,IAAI,EAAE,EAAE,EAAE,IAEzBM,I,iXCVL0C,E,uCA/HJ,SAASC,EAAT,GAA8D,IAAjCC,EAAiC,EAAjCA,OAAQC,EAAyB,EAAzBA,UAAWC,EAAc,EAAdA,WAC9CC,IACEH,GAAUI,EAAiBH,IAAcG,EAAiBF,GAC1D,CAAED,YAAWC,aAAYF,WAHiC,MAmC9D,SAAuBK,GAAqD,IAAjDC,EAAiD,uDAAnCC,IAAUC,EAAyB,uDAAVD,IAChEJ,IAAOK,GAAgB,GAAKF,GAAe,EAAG,CAAEE,eAAcF,gBAE9D,IAAMG,EAAkB,IAEpBC,EAAaL,EAAGM,UAChBD,EAAWlE,OAAS,IAAGkE,EAAa,KAExC,IAAIE,EAAQC,EAASR,EAAGS,SACxBF,EAAMD,UAAYD,EAClB,IAAMK,EAAaH,EAAMI,YAEzB,GAAmB,KAAfD,EAKF,OAJAE,YAAY,CACV5C,KAAM,mDACNS,MAAO4B,IAEF,CACLQ,SAAU,EACVC,MAAO,EACPC,OAAQ,GAIZR,EAAMS,MAAMC,WAAaC,EAAmBlB,EAAI,eAChDO,EAAMS,MAAMH,SAAWT,EAAkB,KACzCG,EAAMS,MAAMG,WAAa,SACzBZ,EAAMS,MAAMI,cAAgBF,EAAmBlB,EAAI,kBACnDO,EAAMS,MAAMK,WAAaH,EAAmBlB,EAAI,eAEhD,IAAMsB,EAAeC,EAAShB,EAAO,UAC/BiB,EAAcD,EAAShB,EAAO,SASpC,GAPAT,IAAOY,EAAWvE,OAAS,GAC3B2D,IAAOC,EAAiByB,IAAgBzB,EAAiBuB,GAAe,CACtEE,cACAF,eACAjB,eAGmB,IAAjBiB,GAAsC,IAAhBE,EAaxB,OAZqB,IAAjBF,GAAsC,IAAhBE,EACxBZ,YAAY,CACV5C,KAAM,wBACNS,MAAOgD,KAAKC,UAAU,CAAEJ,eAAcE,cAAad,iBAE5CiB,EAAYpB,IACrBK,YAAY,CACV5C,KAAM,uCACNS,MAAO,iBAAmBiC,IAIvB,CACLG,SAAU,EACVC,MAAO,EACPC,OAAQ,GAIZjB,IAAOwB,EAAe,GAAKE,EAAc,GAEzC,IAAMI,EAAc3B,EAAcuB,EAC5BK,EAAe1B,EAAemB,EAC9BQ,EAAQC,KAAKC,IAAIJ,EAAaC,GAE9BhB,EAAWiB,EAAQ1B,EACnBU,EAAQgB,EAAQN,EAChBT,EAASe,EAAQR,EAiBvB,OAfAxB,IACEC,EAAiBc,IACfd,EAAiBgB,IACjBhB,EAAiBe,GACnB,CACED,WACAC,QACAC,SACAS,cACAF,eACArB,cACAE,iBAIG,CACLU,WACAC,QACAC,UAtHkCkB,CAClCtC,EACAC,EACAC,GAHMgB,EALoD,EAKpDA,SAAUE,EAL0C,EAK1CA,OAAQD,EALkC,EAKlCA,MAMpBoB,EAAW,CACfvC,OAAQA,EAAOwC,GACfpB,SACAD,QACAjB,aACAD,YACAiB,YAeF,OAXAf,IACEC,EAAiBc,IACfd,EAAiBgB,IACjBhB,EAAiBe,IACjBC,GALkB,KAKRlB,GACViB,GANkB,KAMTlB,EACXsC,GAKK,CAAErB,WAAUE,SAAQD,QAAOjB,aAAYD,aAgGhD,SAASY,EAASC,GAChB,IAAKhB,EAAU,CAGb,IAAM2C,EAAgBC,SAASC,cAAc,OAC7CF,EAAcG,cAAgB,OAC9BH,EAAcpB,MAAMwB,SAAW,SAC/BJ,EAAcpB,MAAMD,OAAS,MAC7BqB,EAAcpB,MAAMF,MAAQ,MAC5BsB,EAAcpB,MAAMyB,SAAW,WAC/BL,EAAcpB,MAAM0B,OAAS,YAC7BN,EAAcO,WAAa,UAE3BlD,EAAW4C,SAASC,cAAc7B,IACzBO,MAAMyB,SAAW,WAE1BL,EAAcQ,QAAQnD,GACtB4C,SAASQ,KAAKD,QAAQR,GAGxB,OADAtC,IAAOL,EAASgB,UAAYA,GACrBhB,EAGT,SAASyB,EAAmBlB,EAAI8C,GAC9B,OAAOT,SAASU,YAAYC,iBAAiBhD,GAAIiD,iBAAiBH,GAGpE,SAAS/C,EAAiBmD,GAIxB,OAFApD,KAAO,GAGG,OAARoD,IACS,IAARA,GAAcA,GAAOA,EAAIC,cAAgBC,QAAUF,EAAM,GAI9D,SAAS3B,EAASvB,EAAI8C,GACpBhD,IAAOE,EAAI,oBAAqB,CAAE8C,YAAW9C,OAE7C,IAAMqD,EAAQrD,EAAGmC,GAEXmB,EAAW3B,EAAY3B,GACvBkD,EAAMhC,EAAmBlB,EAAI8C,GAEnC,IAAKI,EAOH,OANII,GACF1C,YAAY,CACV5C,KAAM,4BACNS,MAAO,UAAYyE,IAGhB,EAGT,IAAMK,EAAcC,SAASN,EAAK,IAElC,OAAKK,GAA+B,IAAhBA,GAUpBzD,IAAOC,EAAiBwD,GAAc,oBAAqB,CACzDF,QACAP,YACAI,MACAK,gBAGKA,IAhBDD,GACF1C,YAAY,CACV5C,KAAM,kCACNS,MAAO,UAAYyE,IAGhB,GAaX,SAASvB,EAAY3B,GAEnB,OAA2B,OAApBA,EAAGyD,a,ICjJRC,E,QAlEWC,IAOf,YAA2D,IAAxCC,EAAwC,EAAxCA,eAAgBC,EAAwB,EAAxBA,iBAAkB1B,EAAM,EAANA,GACnD,OACE,yBAAKA,GAAG,oBAAoBnB,MAAO,CAAEF,MAAO,SAC1C,yBAAKqB,GAAG,sBAAsB2B,UAAU,sBACtC,yBAAK3B,GAAG,iBACN,yBAAKA,GAAG,yBAAyByB,IAGnC,yBAAKzB,GAAIA,EAAI2B,UAAU,oBACrB,2BAAO3B,GAAG,kBAAkB4B,aAAW,qBACrC,4BACE,wBAAI5B,GAAG,eAAe0B,IAExB,4BACE,wBAAI1B,GAAG,mBAKb,yBAAKA,GAAG,wBAMhB,SAAS6B,EAAkBvB,GACzB3C,IACE,CACE,WACA,MACA,YACA,cACA,SACA,eACA,cACA,SACA,gBACAmE,SAASxB,GACX,CAAEA,aAEJ,IAAMyB,EAAmB7B,SAAS8B,cAAc,wBAChD,CAAC,MAAO,SAAU,SAAU,QAAS,QAAQC,SAAQ,SAACC,GACpDH,EAAiBI,UAAU7B,EAASwB,SAASI,GAAQ,MAAQ,UAC3D,eAAiBA,MAKvB,SAASE,IAoBT,IACQC,EACAC,EACAC,EANNpF,OAAOqF,iBAAiB,SAAUC,EAAuB,CAAEC,SAAS,IAI9DL,EAAcnC,SAAS8B,cAAc,sBACrCM,EAAUpC,SAAS8B,cAAc,wBACjCO,EAASrC,SAAS8B,cAAc,oBACtCrE,IAAO0E,GAAeC,GAAWC,GACjCI,YAAsB,CAAEN,cAAaC,UAASC,WApBhD,SAASK,EAAgBC,GACvB,IAAMC,EAAS5C,SAAS6C,eAAe,eACvCpF,IAAOmF,GACPA,EAAO3E,UAAY0E,EAIrB,SAASG,EAAqBC,GAC5B1B,EAAgB0B,EAqBlB,SAASR,IACP,IAAMK,EAAS5C,SAAS6C,eAAe,eACjCG,EAAShD,SAAS6C,eAAe,eACvCpF,IAAOmF,GAAUI,EAAQ,0BAA2B,CAAEJ,SAAQI,WAH/B,MAkCjC,WACE,IAAIzF,EAAYN,OAAOgG,WACnBzF,EAAaP,OAAOiG,YACxBzF,IACEC,EAAiBH,IAAcG,EAAiBF,GAChD,0BACA,CACED,YACAC,eAMF,IACM2F,EAAkBjE,EADJc,SAAS8B,cAAc,sBACG,SAC9CrE,IAAOC,EAAiByF,GAAkB,6BAA8B,CACtEA,oBAEF5F,EAAYmC,KAAKC,IAAIpC,EAAW4F,GAKhC,IAAMC,EAAepD,SAAS6C,eAAe,mBACvCQ,EAAU,CACd5E,MACES,EAASkE,EAAc,gBACvBlE,EAASkE,EAAc,iBACzB1E,OACEQ,EAASkE,EAAc,eACvBlE,EAASkE,EAAc,mBAG3B7F,GAAwB8F,EAAQ5E,MAChCjB,GAA0B6F,EAAQ3E,OAKlC,IAAM4E,EAAqBtD,SAAS6C,eAAe,yBAC/CU,EAA4B,EAE5BD,IACFC,EAA4BrE,EAASoE,EAAoB,WAE3D9F,GAAc+F,EAKd,IAAMC,EAAcrC,SAASE,IAAiB,KAAOxD,IAoBvD,OAnBEJ,IAAOC,EAAiB8F,GAAc,CAAEA,gBACxCjG,EAAYmC,KAAKC,IAAIpC,EAAWiG,GAKhChG,EAAakC,KAAKC,IAAInC,EAAwB,IAAZD,GAKlCC,EAAakC,KAAK+D,IAAIjG,EAAY,GAClCD,EAAYmC,KAAK+D,IAAIlG,EAAW,GAGlCE,IAAOC,EAAiBH,IAAcG,EAAiBF,GAAa,CAClEA,aACAD,cAEK,CAAEA,YAAWC,cApGckG,GAA1BlG,EALuB,EAKvBA,WAAYD,EALW,EAKXA,UALW,EA4GjC,YAAuE,IACjEoG,EACAC,EAFwBhB,EAAyC,EAAzCA,OAAQI,EAAiC,EAAjCA,OAAQxF,EAAyB,EAAzBA,WAAYD,EAAa,EAAbA,UAUxD,GANAoG,EAAiBtG,EAAkB,CACjCC,OAAQ0F,EACRzF,YACAC,eAGsB,IAApBoF,EAAO3E,UAAiB,CAU1B,GAPA2F,EAAiBvG,EAAkB,CACjCC,OAAQsF,EACRrF,UAJgC,IAIrBoG,EAAelF,MAC1BjB,eAGcmG,EAAejF,OAASkF,EAAelF,OAASlB,EACnD,CAGXmG,EAAiBtG,EAAkB,CACjCC,OAAQ0F,EACRzF,YACAC,WAAYA,GAAc,EALN,EAAI,KAQ1BoG,EAAiBvG,EAAkB,CACjCC,OAAQsF,EACRrF,UApB8B,IAoBnBoG,EAAelF,MAC1BjB,WAAYA,GAXQ,EAAI,KAc1BmG,EAAiBtG,EAAkB,CACjCC,OAAQ0F,EACRzF,YACAC,WAAYA,EAAaoG,EAAelF,UAK9C,MAAO,CAAEkF,iBAAgBD,kBAzIkBE,CAAmB,CAC5DrG,aACAD,YACAyF,SACAJ,WAJMgB,EAduB,EAcvBA,eAAgBD,EAdO,EAcPA,eAQxBlG,IACEC,EAAiBiG,EAAenF,aAC5BoF,GAAkBlG,EAAiBkG,EAAepF,WACtD,CAAEmF,iBAAgBC,mBAGhBA,IACFhB,EAAOjE,MAAMH,SAAWoF,EAAepF,SAAW,MAEpDwE,EAAOrE,MAAMH,SAAWmF,EAAenF,SAAW,O,oBClIpDlD,EAAOD,QAAU,IAA0B,+D,2VCO3C,SAASyI,IAEP,IAAQC,IANc,oBAMS,MAAO,CACpCC,QAFc,O,uhBCcX,IAuTHC,EA4CAC,EA0GAC,E,SAlbWC,E,mFAAf,WAAwBC,GAAxB,gGACcC,EAAkBD,GADhC,kDAEUE,EAAeF,GAFzB,mBAGI5G,IAHJ,SAGmB+G,IAHnB,4DAMYA,IANZ,oCAOIxE,SAASyE,gBAAgBxC,UAAUyC,IAAI,oBAP3C,wBASIC,YAAW,WACT3E,SAASyE,gBAAgBxC,UAAUyC,IAAI,YACvCE,MACCC,MAZP,6C,sBAgBA,SAASC,IACPC,IAAMC,QA5CsB,cA4CE,GAC9BlB,IAGF,SAASmB,EAAT,GAA+B,IAAZC,EAAY,EAAZA,SACXC,EAAgBC,EAAc,cAAeF,GAC7CG,EAAgBD,EAAc,cAAeF,GAGnD,OAFAzH,IAAO0H,GAAiBE,GAGtB,yBAAKvF,GAAG,YACLqF,EACAE,GAKP,SAASD,EAAcE,EAAWJ,GAChC,IAAIK,EACAC,EAEIC,EAAaC,EAAoBJ,EAAWJ,GAC9CO,IACFF,EAAU,kBAACI,EAAD,CAAWC,QAASH,KAKhC,IAAMI,EAAaC,EAAeR,EAAWJ,GAC7C,GAAIW,EAAY,CACd,IAAME,EAAWF,EAAWD,QAC5BL,EAAU,kBAACS,EAAD,CAASD,SAAUA,IAE7BP,EAAcK,EAAWL,YACzB/H,IAAO,EAAC,OAAMwI,GAAWrE,SAAS4D,IAItC,OAAKD,EAKH,yBAAK9D,UAAU,aACb,yBACEA,UACE,yBAA2B+D,EAAc,eAAiB,KAG3DD,IAVE,KAgBX,SAASW,EAAT,GAAgC,IAI1BC,EAJcjB,EAAY,EAAZA,SAMVO,EAAaC,EALH,QAKkCR,GAClD,GAAIO,EASF,OARAU,EACE,kBAACR,EAAD,CACElE,UARU,WASVmE,QAASH,EACTW,YAAa,eASnB,IAAMP,EAAaC,EApBH,QAoB6BZ,GAC7C,GAAIW,EAAY,CACdpI,SAAwBwI,IAAjBE,GACP,IAAMJ,EAAWF,EAAWD,QAC5BO,EAAe,kBAACH,EAAD,CAASD,SAAUA,EAAUtE,UAvB9B,aA2BlB,OAAK0E,EAIE,yBAAK1E,UAAU,sBAAsB0E,GAHnC,KAMX,SAASE,EAAT,GAA8B,IAAZnB,EAAY,EAAZA,SAChB,OAAO,kBAACoB,EAAD,CAAQpB,SAAUA,EAAUI,UAAW,QAMhD,SAASgB,EAAT,GAAyC,IAAvBpB,EAAuB,EAAvBA,SAAUI,EAAa,EAAbA,UAC1B7H,IAAO,CAAC,MAAO,OAAOmE,SAAS0D,IAC/B,IAAMM,EAAUF,EAAoBJ,EAAWJ,GAC/C,OAAgB,OAAZU,EAAyB,KAE3B,yBAAKnE,UAAU,UACb,yBAAKA,UAAU,2BACb,kBAACkE,EAAD,CAAWC,QAASA,MAM5B,SAASI,EAAT,GAA0C,IAAvBD,EAAuB,EAAvBA,SAAUtE,EAAa,EAAbA,UAI3B,OAHAhE,IAAOsI,GACPtI,IAAOsI,EAASQ,WAAW,+BAC3B9E,EAAY,kBAAoBA,GAAa,IAE3C,yBAAKA,UAAWA,GACd,yBAAK3B,GAAIiG,IACT,yBAAKtE,UAAU,oBAKrB,SAASkE,EAAT,GAAwD,IAAnCC,EAAmC,EAAnCA,QAASnE,EAA0B,EAA1BA,UAAW2E,EAAe,EAAfA,YACvC3I,IAAO+I,IAAuBD,WAAW,YACzC9I,IAAO,MAACwI,EAAW,cAAcrE,SAASwE,IAE1C3E,EAAY,gBAAkBA,GAAa,IAE3C,IAAMgF,EAAQ,GAQd,OAPIL,GACFrM,OAAO2M,OAAOD,EAAO,CACnB,iBAAkBL,EAClB,8BAA8B,IAKhC,2BACE3E,UAAWA,EACXkF,iBAAgBH,IAChBI,eAAchB,GACVa,IAKV,SAASX,EAAeR,EAAWJ,GACjC,IA2BuBb,EA3BjBwC,GA2BiBxC,EA3Baa,EA4B7B4B,EAAazC,GAAU,SAACrC,GAAD,OAAUA,EAAK+E,aA5BCC,QAAO,SAAChF,GAGpD,OAFAvE,IAAO6H,GACP7H,IAAOuE,EAAKsD,WACLtD,EAAKsD,YAAcA,KAE5B7H,IAAOoJ,EAAY/M,QAAU,GAC7B,IAAMkI,EAAO6E,EAAY,GACzB,IAAK7E,EAAM,OAAO,KARyB,IASnC4D,EAAY5D,EAAZ4D,QAER,OADAnI,IAAOmI,GACA5D,EAGT,SAAS0D,EAAoBJ,EAAWJ,GACtC,IAAM+B,EAAgBC,EAAkBhC,GAAU8B,QAAO,SAAChF,GAGxD,OAFAvE,IAAO6H,GACP7H,IAAOuE,EAAKsD,WACLtD,EAAKsD,YAAcA,KAE5B7H,IAAOwJ,EAAcnN,QAAU,GAC/B,IAAMkI,EAAOiF,EAAc,GAC3B,IAAKjF,EAAM,OAAO,KAR8B,IASxC4D,EAAY5D,EAAZ4D,QAER,OADAnI,IAAOmI,GACAA,EAMT,SAASsB,EAAkB7C,GACzB,OAAOyC,EAAazC,GAAU,SAACrC,GAAD,OAAUA,EAAKmF,cAE/C,SAASC,EAAkB/C,GAEzB,OADsByC,EAAazC,GAAU,SAACrC,GAAD,OAAUA,EAAKqF,cAa9D,SAASP,EAAazC,EAAUiD,GAC9B,OAAOjD,EAAS2C,QAAO,SAAChF,GACtBvE,IAAO,EAAC,OAAMwI,GAAWrE,SAASI,EAAKmF,aACvC1J,IAAO,EAAC,OAAMwI,GAAWrE,SAASI,EAAKuF,YACvC9J,IAAO,EAAC,OAAMwI,GAAWrE,SAASI,EAAKqF,aACvC5J,IAAO,EAAC,OAAMwI,GAAWrE,SAASI,EAAK+E,WACvCtJ,KACGuE,EAAKmF,WAAa,EAAI,IACpBnF,EAAKuF,UAAY,EAAI,IACrBvF,EAAKqF,WAAa,EAAI,IACtBrF,EAAK+E,SAAW,EAAI,IACrB,GAEJ,IAAMS,EAAMF,EAAGtF,GAEf,OADAvE,IAAO,EAAC,OAAMwI,GAAWrE,SAAS4F,MACzBA,K,SA0CEjD,E,mFAAf,WAA8BF,GAA9B,+FACQ4C,EAAgBC,EAAkB7C,GACxC5G,IAAOwJ,EAAcnN,OAAS,GAFhC,SAIwB2N,IAJxB,OAIQC,EAJR,OAKEjK,KAAmB,IAAZiK,EAAkB,CAAEA,YAE3BzK,OAAO0K,YAAc1K,OAAO0K,aAAe,GAC3CV,EAAclF,SAAQ,WACpB9E,OAAO0K,YAAYvN,KAAK,OAG1BwN,YAAY,CAAEjM,KAAM,wBAZtB,4C,sBAgBA,SAAS8L,IACP,QAAkCxB,IAA9BhC,EAAyC,OAAOA,EACpD,IAAI4D,EAoLeC,EAAKC,EAAQC,EAC1BC,EApLFC,GAAmB,EA8BvB,OA7BAjE,EAA4B,IAAIkE,SAAQ,SAACC,GACvCP,EAAU,SAACH,GACTjK,IAAO,EAAC,GAAM,GAAOmE,SAAS8F,IAC1BQ,IACJA,GAAmB,EACnBE,EAASV,QAGbjK,IAAOoK,GA0KYC,EAvKjB,iEAuKsBC,EAtKtB,WACEH,YAAY,CAAEjM,KAAM,kCAAoC0M,MACxDR,GAAQ,IAoKoBG,EAlK9B,WACEJ,YAAY,CACVjM,KAAM,mCAAqC0M,MAE7CR,GAAQ,KA+JNI,EAAWjI,SAASC,cAAc,WAC/BqI,IAAMR,EACfG,EAASM,OAAQ,EACjBN,EAASF,OAASA,EAClBE,EAASD,QAAUA,EACnBhI,SAASwI,qBAAqB,QAAQ,GAAGC,YAAYR,GAjKrDtD,YAAW,WACLuD,IACJN,YAAY,CAAEjM,KAAM,qCACpBkM,GAAQ,MACP,KAEI5D,EAEP,SAASoE,IAEP,OADiBH,EAAmB,mBAAqB,IAQ7D,SAASQ,IAGP,OAFAjL,KAAQkL,UAEc1C,IAAlB/B,GACFzG,IAAO,EAAC,GAAM,GAAOmE,SAASsC,IACvBA,IAGTA,EAMSa,IAAM6D,QAlXa,cA6W5BnL,IAAO,EAAC,GAAM,GAAOmE,SAASsC,IAEvBA,G,SAaMM,I,gFAAf,qGAEIkE,KACAG,KACAC,IAJJ,qCAKWC,IALX,qG,+BASezE,E,mFAAf,WAAiCD,GAAjC,iGAEKqE,IAAkB,mBAClBI,KAAyB,wBACzBD,KAAqB,oBACrBG,KAAuB,kBACvBC,KAAwB,kBAN7B,qCAOYF,IAPZ,iDAO6B,aAP7B,gEAQKG,EAAiB7E,IAAa,mBARnC,aACQ8E,EADR,6BAa6B,mBAAnBA,IACF/M,EAAQgN,eAEa,qBAAnBD,IACF/M,EAAQgD,KAAKC,UAAUgK,MAEzBzB,YAAY,CAAEjM,KAAM,uBAAyBwN,EAAgB/M,UAnBnE,mBAsBW,GAtBX,kCAyBS,GAzBT,6C,sBA4BA,SAAS8M,EAAiB7E,GAExB,OAAgC,IADV6C,EAAkB7C,GACnBvK,OAGvB,SAASmP,IACP,OAAIK,eAA+C,EAMrD,SAAST,IAGP,OAFkBQ,IAAV5K,OAEQ,IAGlB,SAAS4K,IAAkB,MACCpM,OAAOsM,OAAzB9K,EADiB,EACjBA,MAAOC,EADU,EACVA,OAQf,OAPAjB,IACEsD,OAAOyI,UAAU/K,IACfA,EAAQ,GACRsC,OAAOyI,UAAU9K,IACjBA,EAAS,EACX,CAAED,QAAOC,WAEJ,CAAED,QAAOC,UAGlB,SAASsK,IACP,IAAMS,EAAeL,cACrB,OAAQ,CACN,SACA,WACA,SACA,UACA,oBACA,QACA,OACA,kBACAxH,SAAS6H,EAAaC,eAI1B,SAASZ,IAGP,GAFArL,KAAQkL,UAEyB1C,IAA7B9B,EACF,OAAOA,EAGT,IAAMwF,EAAkB3J,SAASC,cAAc,OAgB/C,OAbA0J,EAAgBhL,MAAMyB,SAAW,WACjCuJ,EAAgBhL,MAAM2B,WAAa,SACnCqJ,EAAgBhL,MAAMuB,cAAgB,OAEtCyJ,EAAgB1L,UAAY,YAG5B0L,EAAgBlI,UAAY,cAE5BzB,SAASQ,KAAKiI,YAAYkB,GAC1BxF,EAA4D,IAAjCwF,EAAgBC,aAC3C5J,SAASQ,KAAKqJ,YAAYF,GAEnBxF,E,SAGM4E,I,gFAAf,mHACwBtB,IADxB,cACQC,EADR,OAEEjK,IAAO,EAAC,GAAM,GAAOmE,SAAS8F,IAFhC,mBAGUA,GAHV,4C,sBAeA,SAASiB,IACP,MAAyB,oBAAX1L,OAGhB,SAAS2H,IACPkF,MAAMC,KAAK/J,SAASgK,iBAAiB,iBAAiBjI,SAAQ,SAACpE,GAC7D,IAIIsM,EAJAC,EAAmBvM,EAAGgB,MAAMyB,SAC5B+J,EAAcxM,EAAGgB,MAAMyL,IACvBC,EAAe1M,EAAGgB,MAAM2L,KACxBC,EAAcL,EAEdM,GAAgB,EAEpBC,aACE,SAACC,GACCjN,IAAOiN,GAAa,GADP,MAEyBC,YAAoBhN,GAAlDiN,EAFK,EAELA,aAAcC,EAFT,EAESA,YAElBL,GACF/M,IAAOwM,GAAuB,GAC9BO,EAAgBE,EAAYT,IAE5BO,EAAgBE,EAAYG,EAC5BZ,EAAsBY,GAGxB,IAAMC,EAAcN,EAAgB,QAAUN,EAE1CY,IAAgBP,IACE,UAAhBO,GACFnN,EAAGgB,MAAMyB,SAAW0K,EACpBnN,EAAGgB,MAAMyL,IAAM,MACfzM,EAAGgB,MAAM2L,KAAOM,EAAe,OAE/BjN,EAAGgB,MAAMyB,SAAW8J,EACpBvM,EAAGgB,MAAMyL,IAAMD,EACfxM,EAAGgB,MAAM2L,KAAOD,GAElBE,EAAcO,KAGlB,CAAEC,mBAAmB,EAAMC,gBAAgB,QAzhBjD,WACE,GAAIrC,IACF,OA8W2B,8BAAzB1L,OAAOgO,SAASC,OAClBjO,OAAOgO,SAASE,KAAOlO,OAAOgO,SAASG,OAAS,WA1WlD,IAAMC,EAAU3C,IAEZ2C,GACFrL,SAASyE,gBAAgBxC,UAAUyC,IAAI,gBAGrC2G,EACFvH,ID5BF,IAAQwH,OAZc,qBCwBxBC,I,mBC3BA;;;;;;;IAOE,SAAUC,GAUX,QAPe,0BAAd,KAAc,mCACa,EAG3BlQ,EAAOD,QAAUmQ,MACU,EAEG,CAC9B,IAAIC,EAAaxO,OAAOyO,QACpBC,EAAM1O,OAAOyO,QAAUF,IAC3BG,EAAIC,WAAa,WAEhB,OADA3O,OAAOyO,QAAUD,EACVE,IAfT,EAkBC,WACD,SAASE,IAGR,IAFA,IAAIjS,EAAI,EACJe,EAAS,GACNf,EAAIkS,UAAUhS,OAAQF,IAAK,CACjC,IAAImS,EAAaD,UAAWlS,GAC5B,IAAK,IAAI8C,KAAOqP,EACfpR,EAAO+B,GAAOqP,EAAWrP,GAG3B,OAAO/B,EAGR,SAASqR,EAAQ9Q,GAChB,OAAOA,EAAE+Q,QAAQ,mBAAoBC,oBA0HtC,OAvHA,SAASX,EAAMY,GACd,SAASR,KAET,SAAS5H,EAAKrH,EAAKN,EAAO2P,GACzB,GAAwB,oBAAb/L,SAAX,CAQkC,iBAJlC+L,EAAaF,EAAO,CACnBO,KAAM,KACJT,EAAIU,SAAUN,IAEK/H,UACrB+H,EAAW/H,QAAU,IAAIsI,KAAkB,EAAb,IAAIA,KAAkC,MAArBP,EAAW/H,UAI3D+H,EAAW/H,QAAU+H,EAAW/H,QAAU+H,EAAW/H,QAAQuI,cAAgB,GAE7E,IACC,IAAI5R,EAASyE,KAAKC,UAAUjD,GACxB,UAAUoQ,KAAK7R,KAClByB,EAAQzB,GAER,MAAO8R,IAETrQ,EAAQ+P,EAAUO,MACjBP,EAAUO,MAAMtQ,EAAOM,GACvBiQ,mBAAmBC,OAAOxQ,IACxB6P,QAAQ,4DAA6DC,oBAExExP,EAAMiQ,mBAAmBC,OAAOlQ,IAC9BuP,QAAQ,2BAA4BC,oBACpCD,QAAQ,UAAWY,QAErB,IAAIC,EAAwB,GAC5B,IAAK,IAAIC,KAAiBhB,EACpBA,EAAWgB,KAGhBD,GAAyB,KAAOC,GACE,IAA9BhB,EAAWgB,KAWfD,GAAyB,IAAMf,EAAWgB,GAAeC,MAAM,KAAK,KAGrE,OAAQhN,SAASiN,OAASvQ,EAAM,IAAMN,EAAQ0Q,GAG/C,SAAS9Q,EAAKU,EAAKwQ,GAClB,GAAwB,oBAAblN,SAAX,CAUA,IANA,IAAImN,EAAM,GAGNC,EAAUpN,SAASiN,OAASjN,SAASiN,OAAOD,MAAM,MAAQ,GAC1DpT,EAAI,EAEDA,EAAIwT,EAAQtT,OAAQF,IAAK,CAC/B,IAAIyT,EAAQD,EAAQxT,GAAGoT,MAAM,KACzBC,EAASI,EAAMlQ,MAAM,GAAGmQ,KAAK,KAE5BJ,GAA6B,MAArBD,EAAOM,OAAO,KAC1BN,EAASA,EAAO9P,MAAM,GAAI,IAG3B,IACC,IAAIxB,EAAOqQ,EAAOqB,EAAM,IAIxB,GAHAJ,GAAUd,EAAUqB,MAAQrB,GAAWc,EAAQtR,IAC9CqQ,EAAOiB,GAEJC,EACH,IACCD,EAAS7N,KAAKqO,MAAMR,GACnB,MAAOR,IAKV,GAFAU,EAAIxR,GAAQsR,EAERvQ,IAAQf,EACX,MAEA,MAAO8Q,KAGV,OAAO/P,EAAMyQ,EAAIzQ,GAAOyQ,GAoBzB,OAjBAxB,EAAI5H,IAAMA,EACV4H,EAAI3P,IAAM,SAAUU,GACnB,OAAOV,EAAIU,GAAK,IAEjBiP,EAAI+B,QAAU,SAAUhR,GACvB,OAAOV,EAAIU,GAAK,IAEjBiP,EAAIL,OAAS,SAAU5O,EAAKqP,GAC3BhI,EAAIrH,EAAK,GAAImP,EAAOE,EAAY,CAC/B/H,SAAU,MAIZ2H,EAAIU,SAAW,GAEfV,EAAIgC,cAAgBpC,EAEbI,EAGDJ,EAAK,mB,6ECjKb,IAK2DqC,EALrDC,EAAgBC,EAAQ,IAE9BD,EAAcE,cAAgB,GAE9BF,EAAcE,cAAgBF,EAAcE,eAAiB,GAC7DF,EAAcE,cAAd,aAAkL,MAAvHH,EAAME,EAAQ,MAAwF,IAAIvR,WAAoBqR,EAAG,QAAWA,EAEvMC,EAAcG,WAAc,WAAO,IAAMJ,EAAME,EAAQ,KAA2D,OAA8B,KAAtBF,GAAK,IAAIrR,WAAoBqR,EAAG,QAAWA,EAAzI,GAE5BC,EAAa,OAAc,WAAO,IAAMD,EAAME,EAAQ,IAA6E,OAA8B,KAAtBF,GAAK,IAAIrR,WAAoBqR,EAAG,QAAWA,EAA3J,GAE3BC,EAAa,gBAAuB,WAAO,IAAMD,EAAME,EAAQ,IAA4E,OAA8B,KAAtBF,GAAK,IAAIrR,WAAoBqR,EAAG,QAAWA,EAA1J,GAEpCC,EAAa,UAAiB,WAAO,IAAMD,EAAME,EAAQ,IAAoE,OAA8B,KAAtBF,GAAK,IAAIrR,WAAoBqR,EAAG,QAAWA,EAAlJ,GAE9B,WAAQ,IAAMA,EAAME,EAAQ,KAAyG,KAAtBF,GAAK,IAAIrR,YAAoBqR,EAAG,QAA/I,I,kICVI1I,EAAW,CAef,CAEEU,QAAS,aACTN,UAAW,cACX6B,YAAY,GACX,CAEDvB,QAAS,aACTN,UAAW,cACX6B,YAAY,GACX,CAEDvB,QAAS,aACTN,UAAW,QACX6B,YAAY,GACX,CACD8G,Q,OAAS,EACTC,WAAY,iBACZ5I,UAAW,cACXiC,WAAW,GACV,CACD4G,aAAc,oBACdC,aAAc,IAAMnO,cAAc,OAAQ,KAAM,2CAAiD,IAAMA,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,OAC5JoO,cAAe,0lBACfC,aAAc,iJACdjH,YAAY,GACX,CACD8G,aAAc,yBACdC,aAAc,+FACdC,cAAe,8rBACfC,aAAc,4RACdjH,YAAY,GACX,CACD8G,aAAc,yBACdC,aAAc,qEACdC,cAAe,+oBACfC,aAAc,+OACdjH,YAAY,I,gBCzCCkH,EAEf,WACE,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAASrJ,SAAUA,KAGrB,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC5D,EAAA,EAAD,CACExB,GAAI,kBACJyB,eAAgB,kBAAC,IAAD,CAAQ2D,SAAUA,IAClC1D,iBAAkB,kBAACgN,EAAD,SAItB,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAUtJ,SAAUA,IACpB,kBAACuJ,EAAA,EAAD,CAAcC,oBCpCI,UDqClB,kBAACC,EAAA,EAAD,CAAczJ,SAAUA,IACxB,kBAAC0J,EAAA,EAAD,CAAMF,oBCtCY,cD6C5B,SAASF,IACP,OACE,2BAAO7P,MAAO,CAAEkQ,OAAQ,SACtB,4BACE,wBAAI/O,GAAG,cACP,4BACE,+BACE,4BACE,wBAAIA,GAAG,WAET,4BACE,wBAAIA,GAAG,cAIb,4BACE,+BACE,4BACE,wBAAIA,GAAG,WAET,4BACE,wBAAIA,GAAG,gB,IE/DjBgP,E,OAEJ,SAASC,EAAYjH,GACnB,IAAKgH,EAAgB,CAKnB,IAJA,IAAIE,EAAM,OACNC,EAAO,gBACPC,EAAWlP,SAASwI,qBAAqB,QAEpC5O,EAAI,EAAGA,EAAIsV,EAASpV,OAAQF,IAC/B,CAACoV,EAAKC,GAAMrN,SAASsN,EAAStV,GAAGuV,aAAa,OAAOzF,gBAAgB1J,SAASoP,KAAKvF,YAAYqF,EAAStV,KAG9GkV,EAAiB9O,SAASC,cAAc,SACzBoP,IAAML,EACrBF,EAAeQ,KAAO,YAEtBtP,SAASoP,KAAK3G,YAAYqG,GAG5BA,EAAe3D,KAAOrD,E,SCXpByH,EAAgB,IAAIzF,MAAM,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,YAC5F0F,EAAc,IAAI1F,MAAM,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YAE1I,SAAS2F,EAASC,GAahB,IACIC,EAAU,IAAIrD,KAAKoD,EAAKE,cAAe,EAAG,GAC1CC,EAAMF,EAAQG,SAFF,EAIhBD,EAAMA,GAAO,EAAIA,EAAMA,EAAM,EAC7B,IACIE,EADAC,EAAStQ,KAAKuQ,OAAOP,EAAKQ,UAAYP,EAAQO,UAAuE,KAA1DR,EAAKS,oBAAsBR,EAAQQ,sBAAgC,OAAY,EAG9I,GAAIN,EAAM,GAGR,IAFAE,EAAUrQ,KAAKuQ,OAAOD,EAASH,EAAM,GAAK,GAAK,GAEjC,GAAI,CAChB,IACIO,EADQ,IAAI9D,KAAKoD,EAAKE,cAAgB,EAAG,EAAG,GAC/BE,SAbL,EAkBZC,GAJAK,EAAOA,GAAQ,EAAIA,EAAOA,EAAO,GAIhB,EAAI,EAAI,SAG3BL,EAAUrQ,KAAKuQ,OAAOD,EAASH,EAAM,GAAK,GAG5C,OAAOE,EAWT,SAASM,EAAUX,EAAMY,GAEvB,IAAI1C,EAAM8B,EAAKa,WAWf,OATID,GAES,IADX1C,GAAO,MACOA,EAAM,IAGjB0C,IACH1C,EAAM4C,EAAW5C,IAGZA,EAGT,SAAS6C,EAAYf,GACnB,OAAOc,EAAWd,EAAKgB,cAGzB,SAASC,EAAYjB,GACnB,OAAOc,EAAWd,EAAKkB,cAGzB,SAASC,EAASnB,GAChB,OAAOc,EAAWd,EAAKoB,WAGzB,SAASC,EAAQrB,GACf,OAAOH,EAAcG,EAAKI,UAG5B,SAASkB,EAAUtB,GACjB,OAAOF,EAAYE,EAAKuB,YAsH1B,SAASC,EAAUC,EAAOC,EAAOd,GAC1Ba,IAAOA,EAAQ,GACfC,IAAOA,EAAQ,SACpB,IAAI1V,EAAI,IAAI4Q,KACR+E,EAASrR,SAASC,cAAc,UACpCoR,EAAO3S,OAAS,GAAKyS,EACrBE,EAAO5S,MAAQ,GAAK0S,EACpB,IAAIG,EAAMD,EAAOE,WAAW,MAM5B,OALAD,EAAIE,UAAYJ,EAChBE,EAAIG,KAAO/R,KAAKuQ,MAAM,GAAKkB,GAAS,WACpCG,EAAII,SAASrB,EAAU3U,EAAG4U,GAAc,EAAG,GAAKa,GAChDG,EAAIG,KAAO,GAAKN,EAAQ,WACxBG,EAAII,SAASjB,EAAY/U,GAAI,EAAIyV,EAAO,GAAKA,GACtCE,EAAOM,YAGhB,SAASnB,EAAWoB,GAClB,OAAIA,EAAM,GAAW,IAAMA,EAAgB,GAAKA,EChOnC,IAQX,EARWC,EAUf,SAAoBC,GAClB,IAOIC,EAPAC,EAAmBF,EAAKE,iBACxBC,EAAejS,SAAS6C,eAAe,aACvCqP,EAASlS,SAAS6C,eAAe,UACjCsP,EAASnS,SAAS6C,eAAe,UASnC,EAAU,WACR,IAAIuP,EAAQtG,UAAUhS,OAAS,QAAsBmM,IAAjB6F,UAAU,IAAmBA,UAAU,GACvEpQ,EAAI,IAAI4Q,KACR+F,EAAwBL,EAAiB,4BACzCM,EAAQjC,EAAU3U,EAAG2W,GAAyB,IAAM5B,EAAY/U,IAAMsW,EAAiB,6BAA+B,IAAMrB,EAAYjV,GAAK,UAE/HuK,IAAdsM,GAA2BA,IAAcD,GAASF,KACpDG,EAAYD,EACZtS,SAASsS,MAAQA,GAGnB,IAAIE,EAAU/B,EAAY,IAAInE,MAEzBmG,GAAeA,IAAgBD,IAAWJ,IAC7CK,EAAcD,EACdzD,EAAYmC,OAAUjL,EAAW+L,EAAiB,wBAAyBK,KAI3E,IAAIK,GAAc,EAClB1S,SAASQ,KAAgB,UAAE9E,EAAE6U,WAAa,GAAK,SAAW,OAAO,QACjE,IAAIoC,EAAUhC,EAAYjV,GAC1BwW,EAAOjU,UAAY0U,EAAQ,GAC3BR,EAAOlU,UAAY0U,EAAQ,GAI3B,IAAIC,EAAUvC,EAAU3U,EAAG2W,GAAyB,IAAM5B,EAAY/U,SAErDuK,IAAb4M,GAA0BA,IAAaD,GAAWR,KACpDS,EAAWD,EACXX,EAAahU,UAAY2U,EAGzBF,GAAc,GAGhB,IAAI7C,EAAMnU,EAAEoU,SAEZ,IAAKgD,GAAWA,IAAYjD,GAAOuC,EAAO,CACxCU,EAAUjD,EACV,IAAIkD,EAAYf,EAAiB,sBAAwBjB,EAAQrV,GAAK,MAAQsV,EAAUtV,GAAK,IAAMmV,EAASnV,IAAMsW,EAAiB,sBAAwB,WAAavC,EAAS/T,GAAK,IAAM,GAC5L,YAAgBqX,GAChBL,GAAc,EAGZA,GAAa,eAIrBX,EAAQ,YACN,SAAUiB,IACR,aAA2B,WACzB,OAEF/V,OAAO0H,WAAWqO,EAAU,KAJ9B,IASJjB,IA/DA,IACMU,EAAaF,EAAWO,EAASD,GCJ1B,OACbI,MAAO,CACLC,eAAgB,SAChBC,uBAAwB,GAExBC,uBAAwB,gCACxBC,aAAc,oBACdC,WAAY,YACZC,WAAY,MACZC,YAAa,WAEfC,WAAY,CACVP,eAAgB,SAChBC,uBAAwB,GAExBC,uBAAwB,gCACxBC,aAAc,oBACdC,WAAY,UACZC,WAAY,MACZC,YAAa,WAEfE,KAAM,CACJR,eAAgB,SAChBC,uBAAwB,UACxBC,uBAAwB,GACxBC,aAAc,GACdC,WAAY,sBACZC,WAAY,MACZC,YAAa,WAEfG,OAAQ,CACNT,eAAgB,SAChBC,uBAAwB,UACxBC,uBAAwB,GACxBC,aAAc,GACdC,WAAY,YACZC,WAAY,MACZC,YAAa,WAEfI,KAAM,CACJV,eAAgB,SAChBC,uBAAwB,UACxBC,uBAAwB,GACxBC,aAAc,oBACdC,WAAY,OACZC,WAAY,MACZC,YAAa,WAEfK,MAAO,CACLX,eAAgB,SAEhBC,uBAAwB,GACxBC,uBAAwB,gCAGxBC,aAAc,OACdC,WAAY,WACZC,WAAY,MACZC,YAAa,WAEfM,OAAQ,CACNZ,eAAgB,SAChBC,uBAAwB,GACxBC,uBAAwB,gCACxBC,aAAc,oBACdC,WAAY,kBACZC,WAAY,MACZC,YAAa,WAEfO,aAAc,CACZb,eAAgB,SAChBC,uBAAwB,GACxBC,uBAAwB,gCACxBC,aAAc,oBACdC,WAAY,OACZC,WAAY,MACZC,YAAa,WAEfQ,QAAS,CACPd,eAAgB,SAChBC,uBAAwB,UACxBC,uBAAwB,GACxBC,aAAc,oBACdC,WAAY,UACZC,WAAY,MACZC,YAAa,WAEfS,OAAQ,CACNf,eAAgB,SAChBC,uBAAwB,UACxBC,uBAAwB,GACxBC,aAAc,OACdC,WAAY,eACZC,WAAY,MACZC,YAAa,WAEfU,IAAK,CACHhB,eAAgB,SAChBC,uBAAwB,QACxBC,uBAAwB,GACxBC,aAAc,OACdC,WAAY,MACZC,WAAY,MACZC,YAAa,WAEfW,UAAW,CACTjB,eAAgB,SAChBC,uBAAwB,QACxBC,uBAAwB,GACxBC,aAAc,OACdC,WAAY,MACZC,WAAY,MACZC,YAAa,WAEfY,QAAS,CACPlB,eAAgB,SAChBC,uBAAwB,QACxBC,uBAAwB,GACxBC,aAAc,OACdC,WAAY,WACZC,WAAY,MACZC,YAAa,WAEfa,MAAO,CACLnB,eAAgB,SAChBC,uBAAwB,GACxBC,uBAAwB,gCACxBC,aAAc,oBACdC,WAAY,YACZC,WAAY,MACZC,YAAa,WAEfc,OAAQ,CACNpB,eAAgB,SAChBC,uBAAwB,GACxBC,uBAAwB,gCACxBC,aAAc,OACdC,WAAY,uBACZC,WAAY,MACZC,YAAa,WAEfe,SAAU,CACRrB,eAAgB,SAChBC,uBAAwB,GACxBC,uBAAwB,kCACxBE,WAAY,UACZC,WAAY,MACZC,YAAa,WAEfgB,SAAU,CACRtB,eAAgB,SAChBC,uBAAwB,GACxBC,uBAAwB,kCACxBE,WAAY,UACZC,WAAY,MACZC,YAAa,WAEfiB,eAAgB,CACdvB,eAAgB,SAChBC,uBAAwB,GACxBC,uBAAwB,kCACxBC,aAAc,oBACdC,WAAY,UACZC,WAAY,MACZC,YAAa,WAEfkB,IAAK,CACHxB,eAAgB,SAChBC,uBAAwB,QACxBC,uBAAwB,GACxBC,aAAc,GACdC,WAAY,kBACZC,WAAY,MACZC,YAAa,WAEfmB,IAAK,CACHzB,eAAgB,SAChBC,uBAAwB,UACxBC,uBAAwB,GACxBC,aAAc,oBACdC,WAAY,OACZC,WAAY,MACZC,YAAa,WAEfoB,OAAQ,CACN1B,eAAgB,SAChBC,uBAAwB,UACxBC,uBAAwB,GACxBC,aAAc,GACdC,WAAY,cACZC,WAAY,MACZC,YAAa,WAEfqB,OAAQ,CACN3B,eAAgB,SAChBC,uBAAwB,GACxBC,uBAAwB,kCACxBC,aAAc,GACdC,WAAY,UACZC,WAAY,MACZC,YAAa,WAEfsB,qBAAsB,CACpB5B,eAAgB,MAChBE,uBAAwB,mCACxBC,aAAc,oBACdC,WAAY,gBACZC,WAAY,MACZC,YAAa,WAEfuB,SAAU,CACR7B,eAAgB,cAChBE,uBAAwB,kCACxBC,aAAc,GACdC,WAAY,gBACZC,WAAY,MACZC,YAAa,WAEfwB,cAAe,CACb9B,eAAgB,cAChBE,uBAAwB,kCACxBC,aAAc,oBACdC,WAAY,UACZC,WAAY,MACZC,YAAa,Y,QC/OFyB,MAEf,WACE,IAAMC,EAAiBlV,SAAS6C,eAAe,mBAEzCsS,EAAe,IAAIC,IAAY,CACnCC,iBAgDK,CACL,CACEC,UAAW,cACXC,YAAa,eAEbC,eAAgB,SAElB,CACEF,UAAW,yBACXC,YAAa,yBACbE,mBAAoB,mBACpBD,eAAgB,GAChBE,mBAAoB,YACpBC,mBAAmB,GAErB,CACEL,UAAW,yBACXC,YAAa,yBACbE,mBAAoB,mBACpBD,eAAgB,UAChBG,mBAAmB,GAErB,CACEL,UAAW,aACXC,YAAa,kBACbE,mBAAoB,aACpBD,eAAgB,eAChBG,mBAAmB,GAErB,CACEL,UAAW,eACXC,YAAa,oBACbE,mBAAoB,cACpBD,eAAgB,GAChBE,mBAAoB,sBACpBE,YAAa,QACbD,mBAAmB,GAErB,CACEL,UAAW,cACXC,YAAa,mBACbE,mBAAoB,cACpBD,eAAgB,UAChBG,mBAAmB,GAErB,CACEL,UAAW,aACXC,YAAa,aACbE,mBAAoB,aACpBD,eAAgB,MAChBI,YAAa,OACbD,mBAAmB,GAErB,CACEL,UAAW,iBACXC,YAAa,eACbM,eAAgB,CACd,WACA,MACA,YACA,cACA,SACA,eACA,cACA,SACA,gBAEFJ,mBAAoB,iBACpBD,eAAgB,SAChBG,mBAAmB,GAErB,CACEL,UAAW,2BACXC,YAAa,gBACbE,mBAAoB,UACpBD,eAiDF,YAAYhJ,MAAK,IAAIF,MAAOwJ,uBACE,UAA9B7Y,OAAO8Y,UAAUC,UAhDjB,CACEV,UAAW,uBACXC,YAAa,gBACbE,mBAAoB,QACpBD,gBAAgB,EAChBS,kBAAmB,4BAErB,CACEX,UAAW,wBACXC,YAAa,gBACbE,mBAAoB,UACpBD,gBAAgB,GAElB,CACEF,UAAW,qBACXC,YAAa,gBACbE,mBAAoB,OACpBD,gBAAgB,GAElB,CACEF,UAAW,qBACXC,YAAa,gBACbE,mBAAoB,OACpBD,gBAAgB,EAChBS,kBAAmB,sBAErB,CACEX,UAAW,4BACXC,YAAa,gBACbE,mBAAoB,oBACpBD,gBAAgB,GAElB,CACEF,UAAW,uBACXC,YAAa,cACbE,mBAAoB,iBACpBD,gBCzKAU,EAAQjZ,OAAOkZ,YAAclZ,OAAOkZ,WAAW,gCAE/CD,GAASA,EAAME,SD6KK,UAAY,YAtKlCC,iBAAkBC,EAClBpB,iBACAqB,cAiBF,YAA2C,IAAlBC,EAAkB,EAAlBA,eACvBC,IACKD,KF3BT,WACE,GAAK,EACE,EAAQ/b,WAAM,EAAQqR,WE0BzB4K,EAAS,GACTnU,gBApBFoU,eAaF,WACEpU,eAbAqU,sBAAsB,EACtBC,UAAW,QACXnI,oBLrBwB,UKwBpBsD,EAAmBmD,EAAanD,iBAAiBrV,KAAKwY,GACpD2B,EAAwB3B,EAAxB2B,oBCrBV,IAEMZ,EDuBJ,OAFAf,EAAa4B,eAEN,CAAE/E,mBAAkB8E,uBAa3B,SAASL,IACPvB,EAAevW,MAAMyS,MAAQY,EAAiB,eAC9CkD,EAAevW,MAAMqY,WAAahF,EAAiB,gBAEjD,IAAMiF,EAAejF,EAAiB,yBACtChS,SAASQ,KAAT,UAA2ByW,EAAe,SAAW,OAAO,aAI5D,IAAMC,EAAUlF,EAAiB,wBAC3BmF,EAAcnF,EAAiB,4BACrChS,SAASQ,KAAT,UAA2B0W,GAAWC,EAAc,SAAW,OAC7D,YAGJxV,YAAkBqQ,EAAiB,qB,gVEjDxBoF,M,6FAEf,WAA0BC,GAA1B,mGACoDpC,IAA1CjD,EADV,EACUA,iBAAkB8E,EAD5B,EAC4BA,oBAE1BhU,aAAqB,kBAAMkP,EAAiB,iBAE5CH,EAAW,CAAEG,qBAEb9P,cAEAoV,cATF,SAWQnP,QAAQoP,KAAK,CAACT,EAAqBU,YAAM,CAAE7E,QAAS,OAX5D,OAaE0E,IAEAjT,YAASc,GAfX,4C,sBCLeuS,sBAAO,CACpBC,MAAO,IACPC,KAAMpJ,EAEN+D,MAAO,YAEPlD,KAAM,CACJ,oDACA,qJAEFgI,gB,kECfaQ,MAEf,WAGE3a,OAAO4a,QAAQC,UACb,GACA9X,SAASsS,MACTrV,OAAOgO,SAAS8M,SAAW9a,OAAOgO,SAAS+M,SCNhCV,IAIf,WAA8D,6DAAJ,GAA9BW,EAAkC,EAAlCA,YAAaC,EAAqB,EAArBA,aAQvC,SAASC,IAAQ,IACPjN,EAASjO,OAAOgO,SAAhBC,KAEJkN,IACFR,KAIGK,GAAgBC,KAGjBD,GAAeA,EAAYrW,SAASsJ,IAGpCgN,IAAiBA,EAAatW,SAASsJ,IAI3C0M,KAzBFO,IACA,CAAC,IAAK,IAAK,IAAK,KAAKpW,SAAQ,SAACsW,GAAD,OAAa1T,WAAWwT,EAAOE,MAC5Dpb,OAAOqF,iBAAiB,aAAc6V,EAAO,CAC3C3V,SAAS,EACT8V,SAAS,KAyBb,SAASF,IAEP,MAA6B,MAAzBnb,OAAOgO,SAASC,QAIhBjO,OAAOgO,SAASE,KAAKoN,SAAS,O,gCC1CpC,+GAEA,SAASC,IAA2Q,OAA9PA,EAAWze,OAAO2M,QAAU,SAAU+R,GAAU,IAAK,IAAI7e,EAAI,EAAGA,EAAIkS,UAAUhS,OAAQF,IAAK,CAAE,IAAI8e,EAAS5M,UAAUlS,GAAI,IAAK,IAAI8C,KAAOgc,EAAc3e,OAAOC,UAAUC,eAAeC,KAAKwe,EAAQhc,KAAQ+b,EAAO/b,GAAOgc,EAAOhc,IAAY,OAAO+b,IAA2Bhe,MAAMke,KAAM7M,WAShT,SAAS6C,EAAamD,GACpB,IAAI5M,EAAW4M,EAAK5M,SAChB0T,EAAgB,YAAkB1T,GACtC,OAAO,IAAMjF,cAAc,MAAO,CAChCH,GAAI,mBACJnB,MAAO,CACLka,QAAS,QAEXpX,UAAW,oBACV,IAAMxB,cAAc,MAAO,CAC5BwB,UAAW,0BACV,YAAa,IAAMxB,cAAc,MAAO,CACzCH,GAAI,gBACH8Y,EAAcE,KAAI,SAAUC,GAC7B,OAAO,IAAM9Y,cAAc+Y,EAAaR,EAAS,CAC/C9b,IAAKqc,EAAa5K,cACjB4K,SAIP,SAASC,EAAYC,GACnB,IAAI3K,EAAe2K,EAAM3K,aACrBF,EAAe6K,EAAM7K,aACrBD,EAAe8K,EAAM9K,aACrBE,EAAgB4K,EAAM5K,cAC1B,OAAO,IAAMpO,cAAc,MAAO,CAChC,aAAckO,EACdxP,MAAO,CACLF,MAAO,MAER,IAAMwB,cAAc,MAAO,KAAM,IAAMA,cAAc,KAAM,CAC5DtB,MAAO,CACLua,YAAa,GACbC,UAAW,KAEZ,IAAMlZ,cAAc,KAAM,KAAMmO,KAAiB,IAAMnO,cAAc,MAAO,CAC7EtB,MAAO,CACLka,QAAS,OACTna,OAAQ,IACRD,MAAO,IACP2a,WAAY,SACZC,eAAgB,SAChBC,gBAAiB,SAEnBC,wBAAyB,CACvBC,OAAQnL,KAER,IAAMpO,cAAc,IAAK,CAC3BwB,UAAW,eACX0J,KAAMmD,EACNmK,OAAQ,YAIZ,SAASgB,IACP,IAAIC,EAAmB1Z,SAAS8B,cAAc,qBAC9C4X,EAAiB/a,MAAMka,QAAU,GAEjC7Y,SAAS8B,cAAc,kBAAkB6X,QAAU,WACjD,YAAgBD,M,oDChBpB,SAASpN,EAAT,GAA4B,IAAZsN,EAAY,EAAZA,SACd,OAAO,yBAAKjb,MAAO,CAAEkb,UAAW,GAAIC,cAAe,KAAOF,GArD7ChL,IAEf,YAAuC,EAAvBF,oBACd,OACE,yBAAKjN,UAAU,oBACb,yBAAKA,UAAU,0BAAf,QACA,kBAAC6K,EAAD,qBACA,4BACE,6DAEF,kBAACA,EAAD,mBACA,4BACE,4DAEF,kBAACA,EAAD,mBACA,4BACE,oEAEF,kBAACA,EAAD,oBACA,4BACE,qDAEF,kBAACA,EAAD,oBACA,4BACE,oFAEF,kBAACA,EAAD,oBACA,4BACE,oFACA,oEAEF,kBAACA,EAAD,oBACA,4BACE,kFAIA,kGAIA,8FAGA,0FAxCJ,0DA0C0D,IACxD,uBAAGnB,KAAK,WAAR,eA3CF,O,sFCFJ,SAASsD,EAAT,GAA+C,IAAvBC,EAAuB,EAAvBA,oBACtB,OACE,oCACE,yBAAKjN,UAAU,oBACb,yBAAKA,UAAU,0BAA0BiN,GACzC,yBAAK5O,GAAG,qBAEV,yBAAKA,GAAG,iBAAiB2B,UAAU,oBACjC,yBAAKA,UAAU,0BAAf,QACA,yBAAK3B,GAAG,kBAEV,yBAAKA,GAAG,oBAAoB2B,UAAU,oBACpC,yBAAKA,UAAU,0BAAf,WACA,yBAAK3B,GAAG,qBAEV,yBAAKA,GAAG,kBAAkB2B,UAAU,oBAClC,yBAAKA,UAAU,0BAAf,SACA,yBAAK3B,GAAG,kBAAR,4BAC4B4O,EAD5B,2BACyE,IACtEA,EAFH,wDAKA,yBAAK5O,GAAG,iBAAR,oB,0kCCxBOia,ICAX3K,EDAW2K,E,6FAEf,WAAyBC,GAAzB,YAgBWC,EAhBX,uFAgBWA,EAhBX,WAiBIxc,IAAOuc,EAAW,CAAEA,cACpBE,EAAQC,KAAR,KACKC,EAAcJ,GADnB,CAEEK,WAAYxS,EACZyS,aAAc,WACZC,IACA,IAAM5a,EAAMD,KAAK8a,IAAI,EAAGD,GAElB5H,EAAUjT,KAAK+D,IAAI9D,EADb,IAGZgF,WAAWsV,EADe,IAAVtH,QAzBtBlV,IAAOuc,EAAW,CAAEA,cAEdE,EAAUpM,EAAQ,KAGlB2M,EAAU,IAAItS,SAAQ,SAAClM,GAAD,OAAQ4L,EAAU5L,KAE9Cse,EAAW,EACXN,IATF,SAWQQ,EAXR,6E,sBAiCA,SAASL,EAAcJ,GAErB,MADe,CAAC,eAAgB,OACrBpY,SAASoY,GACX,CACLU,OAAQ,CACNC,SAAU,CAACX,GACXY,KAAM,CAAC,UAAYZ,EAAY,IAAMA,EAAY,UAI9C,CACLa,OAAQ,CACNF,SAAU,CAACX,KE/CJc,IAEXL,EAFWK,EAIf,WACE,GAAIL,EACF,OAAOA,EAGT,IAAIM,EA2BJ,OA1BAN,EAAU,IAAItS,SAAQ,SAAClM,GAAD,OAAQ8e,EAAkB9e,KAEhDgB,OAAM,YAAkB,SAAU+d,GAChC,GAAIA,EAAKC,MAGP,OAFAC,QAAQD,MAAMD,EAAKC,MAAME,cACzBJ,EAAgB,IAIlB,IAAIK,EAAYJ,EAAI,MAAUlC,KAAI,SAACuC,GAAD,OAAOA,EAAEC,UAAQC,OAUnDR,EAAgBK,ID3BpB,SAAmBtT,EAAK0T,GACtBpM,EAAOA,GAAQpP,SAASwI,qBAAqB,QAAQ,GAErD,IAAI+R,EAAW,GACf,SAASkB,IAEP,IAAIC,EAAS1b,SAASC,cAAc,UACpCyb,EAAOpT,IAAMR,EAEb4T,EAAO1T,QAAU,WACfoH,EAAKvF,YAAY6R,GACjB/W,WAAW8W,EAAK/b,KAAKC,IAA4B,IAAxBD,KAAK8a,IAAI,EAAGD,GAAkB,OAIrDiB,IAAWE,EAAO3T,OAASyT,GAC/BjB,IACAnL,EAAK3G,YAAYiT,GAEnBD,GCWAE,CACE,oIAGKlB,G,IC4ILmB,EAEAC,E,OAlLJ,SAAS,EAAmBC,EAAKjU,EAASkU,EAAQC,EAAOC,EAAQvf,EAAKwf,GAAO,IAAM,IAAIC,EAAOL,EAAIpf,GAAKwf,GAAU9f,EAAQ+f,EAAK/f,MAAS,MAAO6e,GAAwB,YAAfc,EAAOd,GAAsBkB,EAAKC,KAAQvU,EAAQzL,GAAiB+L,QAAQN,QAAQzL,GAAOigB,KAAKL,EAAOC,GAE7P,SAAS,EAAkB3U,GAAM,OAAO,WAAc,IAAIgV,EAAO3D,KAAM4D,EAAOzQ,UAAW,OAAO,IAAI3D,SAAQ,SAAUN,EAASkU,GAAU,IAAID,EAAMxU,EAAG7M,MAAM6hB,EAAMC,GAAO,SAASP,EAAM5f,GAAS,EAAmB0f,EAAKjU,EAASkU,EAAQC,EAAOC,EAAQ,OAAQ7f,GAAU,SAAS6f,EAAOO,GAAO,EAAmBV,EAAKjU,EAASkU,EAAQC,EAAOC,EAAQ,QAASO,GAAQR,OAAM/V,OAoBjX,SAASwW,IAgCP,OA/BAA,EAAkB,EAAgCC,mBAAmBC,MAAK,SAASC,EAAQC,EAAYC,EAAWC,GAChH,IAAIC,EAAaC,EACjB,OAAOP,mBAAmBQ,MAAK,SAAkBC,GAC/C,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EAIH,OAHAL,EAAcM,IACd,EAAKP,GACLI,EAASE,KAAO,EACTE,EAAWT,EAAWE,GAE/B,KAAK,EAGH,GAFAC,EAAaE,EAASK,MAEjBR,IAAe,CAClBG,EAASE,KAAO,EAChB,MAGF,OAAOF,EAASM,OAAO,UAEzB,KAAK,EACHhjB,EAAMoiB,EAAYI,GAAY,GAEhC,KAAK,EACL,IAAK,MACH,OAAOE,EAASO,UAGrBd,QAEkBniB,MAAMke,KAAM7M,WAGrC,SAASrR,EAAMoiB,EAAYI,EAAYU,IAuGvC,SAAqBd,GACnBA,EAAaA,GAAc,cAEvBjB,EAAMjd,MAAM2a,kBAAoBuD,IAClCjB,EAAMjd,MAAM2a,gBAAkBuD,GA1GhCe,CAAYf,GA8Gd,SAAqBI,GACnBA,EAAaA,GAAc,OAEvBrB,EAAMjd,MAAMkf,kBAAoBZ,IAClCrB,EAAMjd,MAAMkf,gBAAkBZ,GAjHhCa,CAAYb,GACZrB,EAAM3Z,UAAU0b,EAAc,MAAQ,UAAU,uBAGlD,SAASJ,EAAWQ,EAAKC,GACvB,OAAOC,EAAYxjB,MAAMke,KAAM7M,WAGjC,SAASmS,IA0FP,OAzFAA,EAAc,EAAgCvB,mBAAmBC,MAAK,SAASuB,EAASpB,EAAWE,GACjG,IAAiBC,EAAYkB,EAAOtW,EAAS4S,EAAS2D,EAAQC,EAASC,EAAUC,EACjF,OAAO7B,mBAAmBQ,MAAK,SAAmBsB,GAChD,OACE,OAAQA,EAAUpB,KAAOoB,EAAUnB,MACjC,KAAK,EAoCH,GAnCAkB,EAAuB,WACrBthB,OAAO0H,YAAW,WACZqY,KAIAoB,GAIJ3jB,EAAM,KAAM,MAAM,KACjB,KAGL6jB,EAAW,WACJtB,KACHyB,MAAM,SAAW3B,EAAY,gNAIjCuB,EAAU,WACR,IAAIK,EAAIP,EAAM1f,MACVkgB,EAAIR,EAAMzf,OAEd,OAAIggB,EAAIC,EAAI,KACL3B,KACHyB,MAAM,oCAAsCC,EAAI,IAAMC,EAAI,0KAGrD,MAEA,QAAU7B,EAAY,MAI7BA,EAAW,CACb0B,EAAUnB,KAAO,EACjB,MAGF,OAAOmB,EAAUf,OAAO,SAAU,MAEpC,KAAK,EAGH,IAFc,cAAcjR,KAAKsQ,GAEf,CAChB0B,EAAUnB,KAAO,EACjB,MAIF,OADAJ,EAAaH,EAAY,GAClB0B,EAAUf,OAAO,SAAUR,GAEpC,KAAK,EAqBH,OApBAkB,EAAQne,SAASC,cAAc,OAC/Bwa,EAAU,IAAItS,SAAQ,SAAUlM,GAC9B4L,EAAU5L,KAEZmiB,GAAS,EAETD,EAAMpW,OAAS,WACbqW,GAAS,EACT,IAAIQ,EAAYP,IAChBxW,EAAQ+W,IAGVT,EAAMnW,QAAU,WACdoW,GAAS,EACTE,IACAzW,EAAQ,OAGV0W,IACAJ,EAAM7V,IAAMwU,EACL0B,EAAUf,OAAO,SAAUhD,GAEpC,KAAK,GACL,IAAK,MACH,OAAO+D,EAAUd,UAGtBQ,QAEczjB,MAAMke,KAAM7M,WAuBjC,SAAS,EAAKiR,GACZ,IAAOA,EAAuB,CAC5BA,sBAAuBA,IAEzB,SAAkC9W,IAA3B4V,GAAwCkB,IAA0BlB,EAAwB,CAC/FkB,sBAAuBA,EACvBlB,uBAAwBA,IAE1BA,EAAyBkB,EACzB,IAAI8B,EAAe7e,SAAS8B,cAAcib,GAS1C,GARA,IAAO8B,EAAc,CACnB9B,sBAAuBA,IAEzB,KAAO+B,EAA+D,CACpED,aAAcA,EACdC,mBAlBAA,KAqBElD,EAAJ,CAIA,IAAImD,EAAM/e,SAASC,cAAc,OACjC8e,EAAIjf,GAAK,0BACT,IAAIkf,EAAMhf,SAASC,cAAc,OACjC+e,EAAIlf,GAAK,kBACTkf,EAAIrgB,MAAMsgB,eAAiB,QAC3BF,EAAIxe,QAAQye,GACZH,EAAate,QAAQwe,GACrBnD,EAAQoD,GAGV,IAAIE,EAAc,EAElB,SAAS5B,IAEP,IAAI6B,IADFD,EAOF,OAJkB,WAChB,OAAOC,IAAYD,G,4DC3NvB,SAASE,EAAyB1G,EAAQ2G,GAAY,GAAc,MAAV3G,EAAgB,MAAO,GAAI,IAAkEhc,EAAK9C,EAAnE6e,EAEzF,SAAuCC,EAAQ2G,GAAY,GAAc,MAAV3G,EAAgB,MAAO,GAAI,IAA2Dhc,EAAK9C,EAA5D6e,EAAS,GAAQ6G,EAAavlB,OAAOwlB,KAAK7G,GAAqB,IAAK9e,EAAI,EAAGA,EAAI0lB,EAAWxlB,OAAQF,IAAO8C,EAAM4iB,EAAW1lB,GAAQylB,EAASG,QAAQ9iB,IAAQ,IAAa+b,EAAO/b,GAAOgc,EAAOhc,IAAQ,OAAO+b,EAFxMgH,CAA8B/G,EAAQ2G,GAAuB,GAAItlB,OAAO2lB,sBAAuB,CAAE,IAAIC,EAAmB5lB,OAAO2lB,sBAAsBhH,GAAS,IAAK9e,EAAI,EAAGA,EAAI+lB,EAAiB7lB,OAAQF,IAAO8C,EAAMijB,EAAiB/lB,GAAQylB,EAASG,QAAQ9iB,IAAQ,GAAkB3C,OAAOC,UAAU4lB,qBAAqB1lB,KAAKwe,EAAQhc,KAAgB+b,EAAO/b,GAAOgc,EAAOhc,IAAU,OAAO+b,EAIne,SAASoH,EAAQC,GAAmV,OAAtOD,EAArD,mBAAX3jB,QAAoD,iBAApBA,OAAO6jB,SAAmC,SAAiBD,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,mBAAX5jB,QAAyB4jB,EAAIhf,cAAgB5E,QAAU4jB,IAAQ5jB,OAAOlC,UAAY,gBAAkB8lB,IAAyBA,GAEnX,SAASE,EAA2B1D,EAAMpiB,GAAQ,OAAIA,GAA2B,WAAlB2lB,EAAQ3lB,IAAsC,mBAATA,EAEpG,SAAgCoiB,GAAQ,QAAa,IAATA,EAAmB,MAAM,IAAI2D,eAAe,6DAAgE,OAAO3D,EAFb4D,CAAuB5D,GAAtCpiB,EAInI,SAASimB,EAAK1H,EAAQ3b,EAAUsjB,GAAuV,OAAtRD,EAA9B,oBAAZE,SAA2BA,QAAQrkB,IAAcqkB,QAAQrkB,IAAqB,SAAcyc,EAAQ3b,EAAUsjB,GAAY,IAAIE,EAErL,SAAwBzjB,EAAQC,GAAY,MAAQ/C,OAAOC,UAAUC,eAAeC,KAAK2C,EAAQC,IAA8D,QAAjDD,EAAS0jB,EAAgB1jB,MAAuC,OAAOA,EAFO2jB,CAAe/H,EAAQ3b,GAAW,GAAKwjB,EAAL,CAAmB,IAAIG,EAAO1mB,OAAO2mB,yBAAyBJ,EAAMxjB,GAAW,OAAI2jB,EAAKzkB,IAAcykB,EAAKzkB,IAAI9B,KAAKkmB,GAAoBK,EAAKrkB,SAAwBqc,EAAQ3b,EAAUsjB,GAAY3H,GAIja,SAAS8H,EAAgB1kB,GAAwJ,OAAnJ0kB,EAAkBxmB,OAAO4mB,eAAiB5mB,OAAO6mB,eAAiB,SAAyB/kB,GAAK,OAAOA,EAAEglB,WAAa9mB,OAAO6mB,eAAe/kB,KAA8BA,GAExM,SAASilB,EAAUC,EAAUC,GAAc,GAA0B,mBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIC,UAAU,sDAAyDF,EAAS/mB,UAAYD,OAAO0C,OAAOukB,GAAcA,EAAWhnB,UAAW,CAAE8G,YAAa,CAAE1E,MAAO2kB,EAAUG,UAAU,EAAMC,cAAc,KAAeH,GAAYI,EAAgBL,EAAUC,GAEnX,SAASI,EAAgBvlB,EAAGkB,GAA+G,OAA1GqkB,EAAkBrnB,OAAO4mB,gBAAkB,SAAyB9kB,EAAGkB,GAAsB,OAAjBlB,EAAEglB,UAAY9jB,EAAUlB,IAA6BA,EAAGkB,GAErK,SAAS,EAAQF,EAAQwkB,GAAkB,IAAI9B,EAAOxlB,OAAOwlB,KAAK1iB,GAAS,GAAI9C,OAAO2lB,sBAAuB,CAAE,IAAI4B,EAAUvnB,OAAO2lB,sBAAsB7iB,GAAawkB,IAAgBC,EAAUA,EAAQta,QAAO,SAAUua,GAAO,OAAOxnB,OAAO2mB,yBAAyB7jB,EAAQ0kB,GAAKxlB,eAAgBwjB,EAAKnlB,KAAKK,MAAM8kB,EAAM+B,GAAY,OAAO/B,EAI9U,SAAS,EAAgBO,EAAKpjB,EAAKN,GAAiK,OAApJM,KAAOojB,EAAO/lB,OAAO+B,eAAegkB,EAAKpjB,EAAK,CAAEN,MAAOA,EAAOL,YAAY,EAAMolB,cAAc,EAAMD,UAAU,IAAkBpB,EAAIpjB,GAAON,EAAgB0jB,EAE3M,SAAS0B,EAAgBC,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIT,UAAU,qCAEhH,SAASU,EAAkBlJ,EAAQhS,GAAS,IAAK,IAAI7M,EAAI,EAAGA,EAAI6M,EAAM3M,OAAQF,IAAK,CAAE,IAAIgoB,EAAanb,EAAM7M,GAAIgoB,EAAW7lB,WAAa6lB,EAAW7lB,aAAc,EAAO6lB,EAAWT,cAAe,EAAU,UAAWS,IAAYA,EAAWV,UAAW,GAAMnnB,OAAO+B,eAAe2c,EAAQmJ,EAAWllB,IAAKklB,IAE7S,SAASC,EAAaH,EAAaI,EAAYC,GAAmJ,OAAhID,GAAYH,EAAkBD,EAAY1nB,UAAW8nB,GAAiBC,GAAaJ,EAAkBD,EAAaK,GAAqBL,EAEzM,SAASM,EAA4B5B,EAAU6B,GAAc,IAAKloB,OAAOC,UAAUC,eAAeC,KAAKkmB,EAAU6B,GAAe,MAAM,IAAIhB,UAAU,kDAAqD,OAAOb,EAEhN,IAAI,EAAK,EAET,SAAS8B,EAA2BvmB,GAAQ,MAAO,aAAe,IAAO,IAAMA,EAS/E,IAAI,EAA+B,WACjC,SAASwmB,EAAgB1b,GACvB+a,EAAgB7I,KAAMwJ,GAEtBxJ,KAAKyJ,YAAS,EACdzJ,KAAK0J,eAAY,EACjBtoB,OAAO+B,eAAe6c,KAAM2J,EAAkB,CAC5CpB,UAAU,EACV9kB,WAAO,IAETrC,OAAO+B,eAAe6c,KAAM4J,EAAgB,CAC1CrB,UAAU,EACV9kB,WAAO,IAETrC,OAAO+B,eAAe6c,KAAM6J,EAAc,CACxCtB,UAAU,EACV9kB,WAAO,IAETuc,KAAK8J,eAAY,EACjB9J,KAAK+J,gBAAa,EAClB/J,KAAKgK,aAAU,EACfhK,KAAKiK,eAAY,EACjBjK,KAAKyJ,OAAS3b,EACd,IAAIoc,EAAWpc,EAAMoc,SACjBC,EAAkBrc,EAAMqc,gBACxBC,EAAgBtc,EAAMsc,cAC1B,IAAOF,GAAYC,GACnBnK,KAAK0J,UAAYQ,EACjBb,EAA4BrJ,KAAM2J,GAAkBA,GAAoBQ,EACxEd,EAA4BrJ,KAAM4J,GAAgBA,GAAkBQ,EACpEf,EAA4BrJ,KAAM6J,GAAcA,GAAgBK,EAmGlE,OA/FAhB,EAAaM,EAAiB,CAAC,CAC7BzlB,IAAK,YACLN,MAAO,WACL,OAAOuc,KAAKqK,qBAEb,CACDtmB,IAAK,mBACLN,MAAO,WACL,OAAO2I,EAAA,EAAM6D,QAAQoZ,EAA4BrJ,KAAM6J,GAAcA,MAEtE,CACD9lB,IAAK,mBACLN,MAAO,WACL,OAAO2I,EAAA,EAAMke,QAAQjB,EAA4BrJ,KAAM6J,GAAcA,MAEtE,CACD9lB,IAAK,mBACLN,MAAO,SAA0ByE,GAC/BkE,EAAA,EAAMC,QAAQgd,EAA4BrJ,KAAM6J,GAAcA,GAAe3hB,KAE9E,CACDnE,IAAK,YACLN,MAAO,SAAmByE,GACxB8X,KAAKuK,iBAAiBriB,GAEtB8X,KAAKwK,gBAAgBtiB,GAErBmhB,EAA4BrJ,KAAM2J,GAAkBA,OAErD,CACD5lB,IAAK,OACLN,MAAO,WACL,IAAIgnB,EAAQzK,KAER8J,EAAY9J,KAAK8J,UACjBC,EAAa/J,KAAK+J,WACtB,IAAOD,GACP,IAAOC,GAA4B,UAAdD,GAErB,IAAIY,EAsbV,SAAwBC,GACtB,IAAIb,EAAYa,EAAMb,UAClBC,EAAaY,EAAMZ,WACnBG,EAAWS,EAAMT,SACjBU,EAAoBD,EAAMC,kBAC1B3N,EAAc0N,EAAM1N,YACpB4N,EAAkBF,EAAME,gBAC5B,IAAOf,GACP,IAAOC,GAA4B,UAAdD,GACrB,IAAOI,GACP,IAAOW,EAAiB,CACtBX,SAAUA,IAEZ,IAAIvlB,EAAS0C,SAASC,cAAc,SACpC,IAAO,CAAC,SAAU,SAAS2B,SAAS6gB,IACpC,IAGIgB,EAHAC,EAAW1jB,SAASC,cAAcwiB,GACtCiB,EAAS5jB,GAAK+iB,EACVH,GAAYgB,EAASC,aAAa,OAAQjB,GAG1Ca,KACFE,EAAiBzjB,SAASC,cAAc,SACzB3B,YAAcilB,GAGZ,aAAfb,GACFplB,EAAOmL,YAAYib,GAEfD,GACFnmB,EAAOmL,YAAYgb,KAGjBA,GACFnmB,EAAOmL,YAAYgb,GAGrBnmB,EAAOmL,YAAYib,IAGjB9N,IACF8N,EAAS/kB,MAAMF,MAAQmX,GAIzB,OADA4N,EAAgB/a,YAAYnL,GACrB,CACLA,OAAQA,EACRomB,SAAUA,GApecE,CAhG5B,SAAuBnL,GAAU,IAAK,IAAI7e,EAAI,EAAGA,EAAIkS,UAAUhS,OAAQF,IAAK,CAAE,IAAI8e,EAAyB,MAAhB5M,UAAUlS,GAAakS,UAAUlS,GAAK,GAAQA,EAAI,EAAK,EAAQG,OAAO2e,IAAS,GAAM3W,SAAQ,SAAUrF,GAAO,EAAgB+b,EAAQ/b,EAAKgc,EAAOhc,OAAsB3C,OAAO8pB,0BAA6B9pB,OAAO+pB,iBAAiBrL,EAAQ1e,OAAO8pB,0BAA0BnL,IAAmB,EAAQ3e,OAAO2e,IAAS3W,SAAQ,SAAUrF,GAAO3C,OAAO+B,eAAe2c,EAAQ/b,EAAK3C,OAAO2mB,yBAAyBhI,EAAQhc,OAAe,OAAO+b,EAgGle,CAAc,CACjDgK,UAAWA,EACXC,WAAYA,GACX/J,KAAKyJ,SACJ9kB,EAAS+lB,EAAgB/lB,OACzBomB,EAAWL,EAAgBK,SAE/B/K,KAAKgK,QAAUrlB,EACfqb,KAAKiK,UAAYc,EAEb/K,KAAKoL,WACPpL,KAAKoL,YAGP,IAAIC,EAAWrL,KAAKsL,mBAAqBtL,KAAKuL,mBAAqBlC,EAA4BrJ,KAAM4J,GAAgBA,QAEpGtc,IAAb+d,GACFrL,KAAKwK,gBAAgBa,GAGvBrL,KAAKiK,UAAUtgB,iBAAiBqW,KAAKwL,eAAe,WAClD,IAAItjB,EAAMuiB,EAAMJ,mBAEhBI,EAAMF,iBAAiBriB,GAEvBmhB,EAA4BoB,EAAOd,GAAkBA,QACpD,KAEJ,CACD5lB,IAAK,OACLN,MAAO,WACLgoB,GAAazL,KAAKgK,SAAS,KAE5B,CACDjmB,IAAK,OACLN,MAAO,WACLgoB,GAAazL,KAAKgK,WAGnB,CACDjmB,IAAK,mBACLN,MAAO,WACL,OAAOuc,KAAKiK,UAAUxmB,QAEvB,CACDM,IAAK,kBACLN,MAAO,SAAyByE,GAC9B8X,KAAKiK,UAAUxmB,MAAQyE,IAExB,CACDnE,IAAK,gBACLV,IAAK,WACH,MAAO,aAIJmmB,EAjI0B,GAoI/BG,EAAmBJ,EAA2B,mBAE9CK,EAAiBL,EAA2B,iBAE5CM,EAAeN,EAA2B,eAE1CmC,EAA4B,SAAUC,GAGxC,SAASD,EAAa9H,GACpB,IAAIgI,EASJ,OAPA/C,EAAgB7I,KAAM0L,IAEtBE,EAASvE,EAA2BrH,KAAM4H,EAAgB8D,GAAcnqB,KAAKye,KAAM4D,KAC5EkG,eAAY,EACnB8B,EAAO7B,gBAAa,EACpB6B,EAAO9B,UAAY,QACnB8B,EAAO7B,WAAa,WACb6B,EA0BT,OAtCAzD,EAAUuD,EAAcC,GAexBzC,EAAawC,EAAc,CAAC,CAC1B3nB,IAAK,mBACLN,MAAO,WACL,QAASuc,KAAKiK,UAAU4B,UAEzB,CACD9nB,IAAK,kBACLN,MAAO,SAAyByE,GACxBA,EACJ8X,KAAKiK,UAAUe,aAAa,UAAW,QAEvChL,KAAKiK,UAAU6B,gBAAgB,aAGlC,CACD/nB,IAAK,OACLN,MAAO,WACL+jB,EAAKI,EAAgB8D,EAAarqB,WAAY,OAAQ2e,MAAMze,KAAKye,MAEjEA,KAAKgK,QAAmB,UAAO,IAAE,sBAI9B0B,EAvCuB,CAwC9B,GAEEK,EAAyB,SAAUC,GAGrC,SAASD,EAAUnI,GACjB,IAAIqI,EASJ,OAPApD,EAAgB7I,KAAM+L,IAEtBE,EAAS5E,EAA2BrH,KAAM4H,EAAgBmE,GAAWxqB,KAAKye,KAAM4D,KACzEkG,eAAY,EACnBmC,EAAOlC,gBAAa,EACpBkC,EAAOnC,UAAY,QACnBmC,EAAOlC,WAAa,OACbkC,EAuBT,OAnCA9D,EAAU4D,EAAWC,GAerB9C,EAAa6C,EAAW,CAAC,CACvBhoB,IAAK,OACLN,MAAO,WACL+jB,EAAKI,EAAgBmE,EAAU1qB,WAAY,OAAQ2e,MAAMze,KAAKye,MAE9D,IAAIkM,EAAoBlM,KAAKyJ,OAAOyC,kBAEhCA,IACFlM,KAAKiK,UAAUkC,YAAcD,KAGhC,CACDnoB,IAAK,gBACLV,IAAK,WAGH,MAAO,YAIJ0oB,EApCoB,CAqC3B,GAEE,EAA2B,SAAUK,GA0BvC,SAASC,EAAYlT,GACnB,IAAImT,EAEAC,EAAgBpT,EAAKoT,cACrB3I,EAAO6C,EAAyBtN,EAAM,CAAC,kBAS3C,OAPA0P,EAAgB7I,KAAMqM,IAEtBC,EAASjF,EAA2BrH,KAAM4H,EAAgByE,GAAa9qB,KAAKye,KAAM4D,KAC3EkG,eAAY,EACnBwC,EAAOC,mBAAgB,EACvBD,EAAOxC,UAAY,SACnBwC,EAAOC,cAAgBA,EAChBD,EA4FT,OAlIAnE,EAAUkE,EAAaD,GAEvBlD,EAAamD,EAAa,CAAC,CACzBtoB,IAAK,UACLN,MAAO,WACLuc,KAAKoL,eAEL,CAAC,CACHrnB,IAAK,cACLN,MAAO,SAAqB+oB,GAU1B,MAAO,CACLC,aAFiB,qBANfD,EACa,OAASA,EAAO,OAEhB,mBAGuC,iBAuB5DtD,EAAamD,EAAa,CAAC,CACzBtoB,IAAK,YACLN,MAAO,WACL,IAAIipB,EAAS1M,KAEb,IAAOA,KAAKuM,cAAcprB,OAAS,EAAG6e,KAAK0J,WAC3C,IAAIpkB,EAAY,GAChB0a,KAAKuM,cAAcnjB,SAAQ,SAAUujB,GACnCrnB,GAAaonB,EAAOE,sBAAsBD,MAE5C3M,KAAKiK,UAAU3kB,UAAYA,IAE5B,CACDvB,IAAK,cACLN,MAAO,SAAqBopB,GAC1B,IAAIC,EAAS9M,KAET+M,EAAgB/M,KAAKqK,mBAErB2C,EAAwB7b,MAAMC,KAAK4O,KAAKiK,UAAU9gB,cAAc,WAAWgX,KAAI,SAAUnb,GAC3F,OAAOA,EAAGvB,SAER6B,EAAY0a,KAAKiK,UAAU3kB,UAC/BunB,EAAYzjB,SAAQ,SAAUujB,GAC5B,IACIzkB,EADwB4kB,EAAOG,kBAAkBN,GACrBzkB,IAE5BA,GAAO8kB,EAAsB/jB,SAASf,KAI1C5C,GAAawnB,EAAOF,sBAAsBD,OAE5C3M,KAAKiK,UAAU3kB,UAAYA,EAE3B0a,KAAKwK,gBAAgBuC,KAEtB,CACDhpB,IAAK,kBACLN,MAAO,SAAyByE,GAC9B,IAAOA,EAAK,eAAwB,KAARA,EAAY8X,KAAKiK,UAAU9iB,GAAI,CACzDe,IAAKA,IAGF8X,KAAKiK,UAAU9gB,cAAc,iBAAmBjB,EAAM,QACzD8X,KAAKiK,UAAU3kB,UAAY0a,KAAK4M,sBAAsB1kB,GAAOmkB,EAAYa,cAAcT,aAAezM,KAAKiK,UAAU3kB,WAGvHkiB,EAAKI,EAAgByE,EAAYhrB,WAAY,kBAAmB2e,MAAMze,KAAKye,KAAM9X,KAElF,CACDnE,IAAK,wBACLN,MAAO,SAA+BkpB,GACpC,IAAIQ,EAAwBnN,KAAKiN,kBAAkBN,GAC/CzkB,EAAMilB,EAAsBjlB,IAC5BklB,EAAaD,EAAsBC,WACnCX,EAAeU,EAAsBV,aAEzC,OAAIA,GAIG,kBAAoBW,EAAa,YAAcllB,EAAM,KAAmBklB,EC7WxE9Z,QAAQ,KAAM,SAASA,QAAQ,KAAM,QAAQA,QAAQ,KAAM,QAAQA,QAAQ,KAAM,UAAUA,QAAQ,KAAM,UD6WnB,cAE9F,CACDvP,IAAK,oBACLN,MAAO,SAA2BkpB,GAChC,IAAOA,EAAY3M,KAAK0J,UAAW,CACjCiD,WAAYA,IAEd,IAAIF,EAAeE,EAAWF,aAE9B,GAAIA,EACF,MAAO,CACLA,aAAcA,GAIlB,IAAIvkB,EAAMykB,EAAWzkB,KAAOykB,EAC5B,IAAOzkB,GAAOA,EAAIC,cAAgB8L,OAAQ0Y,GAC1C,IAAIS,EAAaT,EAAWS,YAAcllB,EAE1C,OADA,IAAOklB,EAAWjlB,cAAgB8L,OAAQmZ,GACnC,CACLllB,IAAKA,EACLklB,WAAYA,OAKXf,EAnIsB,CAoI7B,GAEE,GAAyB,SAAUgB,GAGrC,SAASC,IACP,IAAIC,EAEAC,EAEJ3E,EAAgB7I,KAAMsN,GAEtB,IAAK,IAAIG,EAAOta,UAAUhS,OAAQyiB,EAAO,IAAIzS,MAAMsc,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC/E9J,EAAK8J,GAAQva,UAAUua,GAMzB,OAHAF,EAASnG,EAA2BrH,MAAOuN,EAAmB3F,EAAgB0F,IAAY/rB,KAAKO,MAAMyrB,EAAkB,CAACvN,MAAM2N,OAAO/J,MAC9HkG,UAAY,QACnB0D,EAAOzD,WAAa,WACbyD,EA2BT,OA3CArF,EAAUmF,EAAWD,GAmBrBnE,EAAaoE,EAAW,CAAC,CACvBvpB,IAAK,YASLN,MAAO,WACL,IAAUuc,KAAKiK,UAAW,CACxB2D,YAAY,QAYXN,EA5CoB,CA6C3B,GAEEO,GAA0B,SAAUC,GAGtC,SAASD,EAAWjK,GAClB,IAAImK,EASJ,OAPAlF,EAAgB7I,KAAM6N,IAEtBE,EAAS1G,EAA2BrH,KAAM4H,EAAgBiG,GAAYtsB,KAAKye,KAAM4D,KAC1EkG,eAAY,EACnBiE,EAAOhE,gBAAa,EACpBgE,EAAOjE,UAAY,QACnBiE,EAAOhE,WAAa,QACbgE,EAYT,OAxBA5F,EAAU0F,EAAYC,GAetB5E,EAAa2E,EAAY,CAAC,CACxB9pB,IAAK,OACLN,MAAO,WACL+jB,EAAKI,EAAgBiG,EAAWxsB,WAAY,OAAQ2e,MAAMze,KAAKye,MAE/DA,KAAKgK,QAAmB,UAAO,IAAE,sBAI9B6D,EAzBqB,CA0B5B,GAEEG,GAAsB,WACxB,SAASA,EAAO1N,GACd,IAAI2N,EAAW3N,EAAM2N,SACjBzB,EAAOlM,EAAMkM,KACb3B,EAAkBvK,EAAMuK,gBACxBqD,EAAkB5N,EAAMxX,UACxBA,OAAgC,IAApBolB,EAA6B,KAAOA,EAChD/mB,EAAKmZ,EAAMnZ,GAEf0hB,EAAgB7I,KAAMgO,GAEtBhO,KAAKiO,cAAW,EAChBjO,KAAKwM,UAAO,EACZxM,KAAK6K,qBAAkB,EACvB7K,KAAKlX,eAAY,EACjBkX,KAAK7Y,QAAK,EACV6Y,KAAKrb,YAAS,EACdqb,KAAKiO,SAAWA,EAChBjO,KAAKwM,KAAOA,EACZxM,KAAK6K,gBAAkBA,EACvB7K,KAAKlX,UAAYA,EACjBkX,KAAK7Y,GAAKA,EAwCZ,OArCA+hB,EAAa8E,EAAQ,CAAC,CACpBjqB,IAAK,eACLN,MAAO,WACL,IAAI0qB,EAASnO,KAETrb,EAAS0C,SAASC,cAAc,UAEhC0Y,KAAKlX,WACPnE,EAAOqmB,aAAa,QAAShL,KAAKlX,WAGpCnE,EAAOqmB,aAAa,OAAQ,UAC5BrmB,EAAOqmB,aAAa,KAAMhL,KAAK7Y,IAE/BxC,EAAOqc,QAAU,SAAUoN,GACzBA,EAAGC,iBAEHF,EAAOF,YAGTtpB,EAAOgB,YAAcqa,KAAKwM,KAC1BxM,KAAK6K,gBAAgB/a,YAAYnL,GACjCqb,KAAKrb,OAASA,IAGf,CACDZ,IAAK,OACLN,MAAO,WACLgoB,GAAazL,KAAKrb,QAAQ,KAE3B,CACDZ,IAAK,OACLN,MAAO,WACLgoB,GAAazL,KAAKrb,YAIfqpB,EA7DiB,GAqI1B,SAASvC,GAAazmB,GACpB,IAAIspB,EAAUnb,UAAUhS,OAAS,QAAsBmM,IAAjB6F,UAAU,IAAmBA,UAAU,GAEzEmb,EACFtpB,EAAGgmB,aAAa,WAAY,QAE5BhmB,EAAG8mB,gBAAgB,YAGrB9mB,EAAGgB,MAAMF,MAAQwoB,EAAU,MAAQ,GACnCtpB,EAAGgB,MAAMD,OAASuoB,EAAU,MAAQ,GACpCtpB,EAAGgB,MAAM2B,WAAa2mB,EAAU,SAAW,UAC3CtpB,EAAGgB,MAAMyB,SAAW6mB,EAAU,WAAa,GAC3CtpB,EAAGgB,MAAM0B,OAAS4mB,EAAU,KAAO,G,ogBE3mBrC,SAASC,GAAT,GAA0E,IAAxCC,EAAwC,EAAxCA,iBAAkBC,EAAsB,EAAtBA,mBAC5CC,EAAK,GAEPC,GAAc,EAoBlB,GAlBAvtB,OAAOwtB,QAAQC,cAAczlB,SAAQ,YAAgB,cAAdrF,EAAc,KAATmE,EAAS,KAC/CsmB,GAAoBzqB,KAAOyqB,IAC7BzqB,EAAMyqB,EAAiBzqB,GACvB4qB,GAAc,GAIdF,GACA1qB,KAAO0qB,GACPvmB,KAAOumB,EAAmB1qB,KAE1BmE,EAAMumB,EAAmB1qB,GAAKmE,GAC9BymB,GAAc,GAGhBD,EAAG3qB,GAAOmE,KAGPymB,EAYL,OARIA,IACFE,aAAaC,QAEb1tB,OAAOwlB,KAAK8H,GAAItlB,SAAQ,SAACrF,GACvB8qB,aAAa9qB,GAAO2qB,EAAG3qB,OAIpB4qB,E,yHC9BT,SAASI,KAAyB,MAChCR,GAAuB,CACrBC,kBAAgB,GACdQ,MAAO,cACPC,SAAU,yBACVC,SAAU,yBACVC,YAAa,eACbC,WAAY,cACZC,UAAW,cANG,KAOb,UAAY,4BAPC,eAQL,wBARK,oBASA,yBATA,iBAUH,sBAVG,iBAWH,sBAXG,0BAYM,6BAZN,kBAaF,wBAbE,GAehBZ,mBAAoB,CAClBa,YAAa,CACX,GAAI,WACJC,OAAQ,cCzBhB,SAASC,GAAqBC,GAC5B,CAAC,oBAAqB,iBAAiBrmB,SAAQ,SAACsmB,GAC9C,IAAMC,EAAkBd,aAAaa,GACrC,GAAKC,EAAL,CAGA,IAAMC,EAAUnpB,KAAKqO,MAAM6a,GACvBhB,GAAc,EAMlB,GALAiB,EAAQxmB,SAAQ,SAACymB,GACXJ,EAASI,KACXlB,GAAc,MAGdA,EAAa,CACf,IAAMmB,EAA2BrpB,KAAKC,UAAUkpB,GAChDf,aAAaa,GAAwBI,OCV3C,SAASC,KACPP,IAAqB,SAACK,GAEpB,OADA/qB,IAAO+qB,EAAOG,aAAeH,EAAOI,WAChCJ,EAAOG,aACTH,EAAOI,UAAYJ,EAAOG,mBACnBH,EAAOG,aACP,IAETlrB,IAAO+qB,EAAOK,gBAAkBL,EAAOM,eACnCN,EAAOK,gBACTL,EAAOM,cAAgBN,EAAOK,sBACvBL,EAAOK,gBACP,QAHT,MCTJ,SAASE,KACPZ,IAAqB,SAACK,GAEpB,GADA/qB,IAAO+qB,EAAOQ,UAAYR,EAAO3R,WAC7B2R,EAAOQ,SAGT,OAFAR,EAAO3R,UAAY2R,EAAOQ,gBACnBR,EAAOQ,UACP,KCNb,SAASC,KACa/B,GAAuB,CACzCC,iBAAkB,CAChB+B,OAAQ,yBACRC,SAAU,2BAIZ3B,aAAY,YAAkB,YCblC,SAAS,GAAe4B,EAAKxvB,GAAK,OAMlC,SAAyBwvB,GAAO,GAAItf,MAAMuf,QAAQD,GAAM,OAAOA,EANtB,CAAgBA,IAIzD,SAA+BA,EAAKxvB,GAAK,KAAMsC,OAAO6jB,YAAYhmB,OAAOqvB,KAAgD,uBAAxCrvB,OAAOC,UAAUsvB,SAASpvB,KAAKkvB,GAAkC,OAAU,IAAIG,EAAO,GAAQC,GAAK,EAAUC,GAAK,EAAWC,OAAKzjB,EAAW,IAAM,IAAK,IAAiC0jB,EAA7BC,EAAKR,EAAIltB,OAAO6jB,cAAmByJ,GAAMG,EAAKC,EAAGvM,QAAQjB,QAAoBmN,EAAKnvB,KAAKuvB,EAAGvtB,QAAYxC,GAAK2vB,EAAKzvB,SAAWF,GAA3D4vB,GAAK,IAAoE,MAAOhN,GAAOiN,GAAK,EAAMC,EAAKlN,EAAO,QAAU,IAAWgN,GAAsB,MAAhBI,EAAW,QAAWA,EAAW,SAAO,QAAU,GAAIH,EAAI,MAAMC,GAAQ,OAAOH,EAJpc,CAAsBH,EAAKxvB,IAE5F,WAA8B,MAAM,IAAIqnB,UAAU,wDAFgD,GAYlG,SAAS4I,KACP9vB,OAAOwtB,QAAQC,cAAczlB,SAAQ,SAAU+P,GAC7C,IAAImH,EAAQ,GAAenH,EAAM,GAC7BpV,EAAMuc,EAAM,GACZpY,EAAMoY,EAAM,IAEZvc,EAAI6J,WAAW,WAAa7J,EAAI6J,WAAW,WAAa7J,EAAI6J,WAAW,eAAyB,6BAAR7J,KACtFA,EAAI6b,SAAS,cACf1X,EAAMzB,KAAKqO,MAAM5M,IAGP,6BAARnE,IACFmE,GAAM,GAGRkE,EAAA,EAAMC,QAAQtI,EAAKmE,GACnB5D,OAAOuqB,aAAasC,WAAWptB,OAGnCqI,EAAA,EAAMglB,qBAAqB,CACzB,2BAA4B,eChChC,SAAS,GAAeX,EAAKxvB,GAAK,OAMlC,SAAyBwvB,GAAO,GAAItf,MAAMuf,QAAQD,GAAM,OAAOA,EANtB,CAAgBA,IAIzD,SAA+BA,EAAKxvB,GAAK,KAAMsC,OAAO6jB,YAAYhmB,OAAOqvB,KAAgD,uBAAxCrvB,OAAOC,UAAUsvB,SAASpvB,KAAKkvB,GAAkC,OAAU,IAAIG,EAAO,GAAQC,GAAK,EAAUC,GAAK,EAAWC,OAAKzjB,EAAW,IAAM,IAAK,IAAiC0jB,EAA7BC,EAAKR,EAAIltB,OAAO6jB,cAAmByJ,GAAMG,EAAKC,EAAGvM,QAAQjB,QAAoBmN,EAAKnvB,KAAKuvB,EAAGvtB,QAAYxC,GAAK2vB,EAAKzvB,SAAWF,GAA3D4vB,GAAK,IAAoE,MAAOhN,GAAOiN,GAAK,EAAMC,EAAKlN,EAAO,QAAU,IAAWgN,GAAsB,MAAhBI,EAAW,QAAWA,EAAW,SAAO,QAAU,GAAIH,EAAI,MAAMC,GAAQ,OAAOH,EAJpc,CAAsBH,EAAKxvB,IAE5F,WAA8B,MAAM,IAAIqnB,UAAU,wDAFgD,GAQlG,SAAS,GAAKxI,EAAQ3b,EAAUsjB,GAAuV,OAAtR,GAA9B,oBAAZC,SAA2BA,QAAQrkB,IAAcqkB,QAAQrkB,IAAqB,SAAcyc,EAAQ3b,EAAUsjB,GAAY,IAAIE,EAErL,SAAwBzjB,EAAQC,GAAY,MAAQ/C,OAAOC,UAAUC,eAAeC,KAAK2C,EAAQC,IAA8D,QAAjDD,EAAS,GAAgBA,MAAuC,OAAOA,EAFO,CAAe4b,EAAQ3b,GAAW,GAAKwjB,EAAL,CAAmB,IAAIG,EAAO1mB,OAAO2mB,yBAAyBJ,EAAMxjB,GAAW,OAAI2jB,EAAKzkB,IAAcykB,EAAKzkB,IAAI9B,KAAKkmB,GAAoBK,EAAKrkB,SAAwBqc,EAAQ3b,EAAUsjB,GAAY3H,GAIja,SAAS,GAAQqH,GAAmV,OAAtO,GAArD,mBAAX5jB,QAAoD,iBAApBA,OAAO6jB,SAAmC,SAAiBD,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,mBAAX5jB,QAAyB4jB,EAAIhf,cAAgB5E,QAAU4jB,IAAQ5jB,OAAOlC,UAAY,gBAAkB8lB,IAAyBA,GAEnX,SAAS,GAA2BxD,EAAMpiB,GAAQ,OAAIA,GAA2B,WAAlB,GAAQA,IAAsC,mBAATA,EAA8C,GAAuBoiB,GAAtCpiB,EAEnI,SAAS,GAAuBoiB,GAAQ,QAAa,IAATA,EAAmB,MAAM,IAAI2D,eAAe,6DAAgE,OAAO3D,EAE/J,SAAS,GAAgBzgB,GAAwJ,OAAnJ,GAAkB9B,OAAO4mB,eAAiB5mB,OAAO6mB,eAAiB,SAAyB/kB,GAAK,OAAOA,EAAEglB,WAAa9mB,OAAO6mB,eAAe/kB,KAA8BA,GAExM,SAAS,GAAUklB,EAAUC,GAAc,GAA0B,mBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIC,UAAU,sDAAyDF,EAAS/mB,UAAYD,OAAO0C,OAAOukB,GAAcA,EAAWhnB,UAAW,CAAE8G,YAAa,CAAE1E,MAAO2kB,EAAUG,UAAU,EAAMC,cAAc,KAAeH,GAAY,GAAgBD,EAAUC,GAEnX,SAAS,GAAgBnlB,EAAGkB,GAA+G,OAA1G,GAAkBhD,OAAO4mB,gBAAkB,SAAyB9kB,EAAGkB,GAAsB,OAAjBlB,EAAEglB,UAAY9jB,EAAUlB,IAA6BA,EAAGkB,GAErK,SAAS,GAAQF,EAAQwkB,GAAkB,IAAI9B,EAAOxlB,OAAOwlB,KAAK1iB,GAAS,GAAI9C,OAAO2lB,sBAAuB,CAAE,IAAI4B,EAAUvnB,OAAO2lB,sBAAsB7iB,GAAawkB,IAAgBC,EAAUA,EAAQta,QAAO,SAAUua,GAAO,OAAOxnB,OAAO2mB,yBAAyB7jB,EAAQ0kB,GAAKxlB,eAAgBwjB,EAAKnlB,KAAKK,MAAM8kB,EAAM+B,GAAY,OAAO/B,EAE9U,SAAS,GAAc9G,GAAU,IAAK,IAAI7e,EAAI,EAAGA,EAAIkS,UAAUhS,OAAQF,IAAK,CAAE,IAAI8e,EAAyB,MAAhB5M,UAAUlS,GAAakS,UAAUlS,GAAK,GAAQA,EAAI,EAAK,GAAQG,OAAO2e,IAAS,GAAM3W,SAAQ,SAAUrF,GAAO,GAAgB+b,EAAQ/b,EAAKgc,EAAOhc,OAAsB3C,OAAO8pB,0BAA6B9pB,OAAO+pB,iBAAiBrL,EAAQ1e,OAAO8pB,0BAA0BnL,IAAmB,GAAQ3e,OAAO2e,IAAS3W,SAAQ,SAAUrF,GAAO3C,OAAO+B,eAAe2c,EAAQ/b,EAAK3C,OAAO2mB,yBAAyBhI,EAAQhc,OAAe,OAAO+b,EAE7gB,SAAS,GAAgBqH,EAAKpjB,EAAKN,GAAiK,OAApJM,KAAOojB,EAAO/lB,OAAO+B,eAAegkB,EAAKpjB,EAAK,CAAEN,MAAOA,EAAOL,YAAY,EAAMolB,cAAc,EAAMD,UAAU,IAAkBpB,EAAIpjB,GAAON,EAAgB0jB,EAE3M,SAAS,GAAyBpH,EAAQ2G,GAAY,GAAc,MAAV3G,EAAgB,MAAO,GAAI,IAAkEhc,EAAK9C,EAAnE6e,EAEzF,SAAuCC,EAAQ2G,GAAY,GAAc,MAAV3G,EAAgB,MAAO,GAAI,IAA2Dhc,EAAK9C,EAA5D6e,EAAS,GAAQ6G,EAAavlB,OAAOwlB,KAAK7G,GAAqB,IAAK9e,EAAI,EAAGA,EAAI0lB,EAAWxlB,OAAQF,IAAO8C,EAAM4iB,EAAW1lB,GAAQylB,EAASG,QAAQ9iB,IAAQ,IAAa+b,EAAO/b,GAAOgc,EAAOhc,IAAQ,OAAO+b,EAFxM,CAA8BC,EAAQ2G,GAAuB,GAAItlB,OAAO2lB,sBAAuB,CAAE,IAAIC,EAAmB5lB,OAAO2lB,sBAAsBhH,GAAS,IAAK9e,EAAI,EAAGA,EAAI+lB,EAAiB7lB,OAAQF,IAAO8C,EAAMijB,EAAiB/lB,GAAQylB,EAASG,QAAQ9iB,IAAQ,GAAkB3C,OAAOC,UAAU4lB,qBAAqB1lB,KAAKwe,EAAQhc,KAAgB+b,EAAO/b,GAAOgc,EAAOhc,IAAU,OAAO+b,EAIne,SAASuR,GAAmBZ,GAAO,OAMnC,SAA4BA,GAAO,GAAItf,MAAMuf,QAAQD,GAAM,CAAE,IAAK,IAAIxvB,EAAI,EAAGqwB,EAAO,IAAIngB,MAAMsf,EAAItvB,QAASF,EAAIwvB,EAAItvB,OAAQF,IAAOqwB,EAAKrwB,GAAKwvB,EAAIxvB,GAAM,OAAOqwB,GANnHC,CAAmBd,IAI7D,SAA0Be,GAAQ,GAAIjuB,OAAO6jB,YAAYhmB,OAAOowB,IAAkD,uBAAzCpwB,OAAOC,UAAUsvB,SAASpvB,KAAKiwB,GAAgC,OAAOrgB,MAAMC,KAAKogB,GAJrFC,CAAiBhB,IAEtF,WAAgC,MAAM,IAAInI,UAAU,mDAF0CoJ,GAQ9F,SAAS,GAAmBvO,EAAKjU,EAASkU,EAAQC,EAAOC,EAAQvf,EAAKwf,GAAO,IAAM,IAAIC,EAAOL,EAAIpf,GAAKwf,GAAU9f,EAAQ+f,EAAK/f,MAAS,MAAO6e,GAAwB,YAAfc,EAAOd,GAAsBkB,EAAKC,KAAQvU,EAAQzL,GAAiB+L,QAAQN,QAAQzL,GAAOigB,KAAKL,EAAOC,GAE7P,SAAS,GAAkB3U,GAAM,OAAO,WAAc,IAAIgV,EAAO3D,KAAM4D,EAAOzQ,UAAW,OAAO,IAAI3D,SAAQ,SAAUN,EAASkU,GAAU,IAAID,EAAMxU,EAAG7M,MAAM6hB,EAAMC,GAAO,SAASP,EAAM5f,GAAS,GAAmB0f,EAAKjU,EAASkU,EAAQC,EAAOC,EAAQ,OAAQ7f,GAAU,SAAS6f,EAAOO,GAAO,GAAmBV,EAAKjU,EAASkU,EAAQC,EAAOC,EAAQ,QAASO,GAAQR,OAAM/V,OAEjX,SAAS,GAAgBwb,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIT,UAAU,qCAEhH,SAAS,GAAkBxI,EAAQhS,GAAS,IAAK,IAAI7M,EAAI,EAAGA,EAAI6M,EAAM3M,OAAQF,IAAK,CAAE,IAAIgoB,EAAanb,EAAM7M,GAAIgoB,EAAW7lB,WAAa6lB,EAAW7lB,aAAc,EAAO6lB,EAAWT,cAAe,EAAU,UAAWS,IAAYA,EAAWV,UAAW,GAAMnnB,OAAO+B,eAAe2c,EAAQmJ,EAAWllB,IAAKklB,IAE7S,SAAS,GAAaF,EAAaI,EAAYC,GAAmJ,OAAhID,GAAY,GAAkBJ,EAAY1nB,UAAW8nB,GAAiBC,GAAa,GAAkBL,EAAaK,GAAqBL,EAEzM,SAAS,GAA4BtB,EAAU6B,GAAc,IAAKloB,OAAOC,UAAUC,eAAeC,KAAKkmB,EAAU6B,GAAe,MAAM,IAAIhB,UAAU,kDAAqD,OAAOb,ENnDhNsH,GAAuB4C,eAAiB,IAAIhe,KAAK,cEAjDoc,GAAmC4B,eAAiB,IAAIhe,KAAK,cCA7Dyc,GAAkBuB,eAAiB,IAAIhe,KAAK,cCA5C2c,GAA6BqB,eAAiB,IAAIhe,KAAK,cCQvDud,GAA6BS,eAAiB,IAAIhe,KAAK,cC6CvD,IAAI,GAAK,EAET,SAAS,GAA2B3Q,GAAQ,MAAO,aAAe,KAAO,IAAMA,GC/C/E,WACE,GAAsB,oBAAXsB,OAAX,CAIA,IAAIstB,EAAY,CAAC7C,GAAwBgB,GAAoCK,GAAmBE,GAA8BY,IAC1HW,EAAyBzlB,EAAA,EAAM0lB,qBACnC,IAAOD,EAAuB1pB,cAAgBwL,MAC9Cie,EAAUxoB,SAAQ,SAAUqmB,EAAUxuB,GACpC,IAAI0wB,EAAiBlC,EAASkC,eAC9B,IAAOA,EAAexpB,cAAgBwL,MACtC,IAAO1S,IAAM2wB,EAAUzwB,OAAS,GAAKwwB,EAAepa,UAAYqa,EAAU3wB,EAAI,GAAG0wB,eAAepa,WAE5Fsa,EAAuBta,UAAYoa,EAAepa,YACpDkY,IACArjB,EAAA,EAAM2lB,mBAAmBJ,QD6C/BK,GACO,IAAI,GAA2B,WACpC,SAASvV,EAAYtD,GACnB,IAAIsR,EAAQzK,KAERtD,EAAmBvD,EAAKuD,iBACxBgB,EAAmBvE,EAAKuE,iBACxBuU,EAAsB9Y,EAAKoD,eAC3BA,OAAyC,IAAxB0V,EAAiC,KAAOA,EACzDC,EAAwB/Y,EAAKgZ,iBAC7BA,OAA6C,IAA1BD,GAA2CA,EAC9DtU,EAAgBzE,EAAKyE,cACrBwU,EAAsBjZ,EAAK6E,eAC3BA,OAAyC,IAAxBoU,EAAiC,KAAOA,EACzDnU,EAAuB9E,EAAK8E,qBAC5BC,EAAY/E,EAAK+E,UACjBnI,EAAsBoD,EAAKpD,oBAE/B,GAAgBiK,KAAMvD,GAEtBuD,KAAKjK,yBAAsB,EAC3BiK,KAAKzD,oBAAiB,EACtByD,KAAKmS,sBAAmB,EACxBnS,KAAKpC,mBAAgB,EACrBoC,KAAKhC,oBAAiB,EACtBgC,KAAK/B,0BAAuB,EAC5B+B,KAAK9B,eAAY,EACjB8B,KAAKqS,qBAAkB,EACvBrS,KAAKsS,qBAAkB,EACvBtS,KAAKuS,uBAAoB,EACzBvS,KAAKwS,kBAAe,EACpBxS,KAAKyS,oBAAiB,EACtBzS,KAAK0S,mBAAgB,EACrB1S,KAAK2S,qBAAkB,EACvB3S,KAAK4S,iBAAc,EACnB5S,KAAK6S,iBAAc,EACnB7S,KAAK8S,iCAA8B,EACnC9S,KAAK7B,yBAAsB,EAC3B6B,KAAK+S,gBAAa,EAClB/S,KAAKgT,gBAAa,EAClBhT,KAAKiT,iBAAc,EACnBjT,KAAKkT,gBAAa,EAClB9xB,OAAO+B,eAAe6c,KAAMmT,GAA+B,CACzD5K,UAAU,EACV9kB,MAAO,OAETrC,OAAO+B,eAAe6c,KAAMoT,GAAgB,CAC1C7K,UAAU,EACV9kB,MAAO,OAETrC,OAAO+B,eAAe6c,KAAMqT,GAAU,CACpC9K,UAAU,EACV9kB,MAAO,OAETrC,OAAO+B,eAAe6c,KAAMsT,GAA4B,CACtD/K,UAAU,EACV9kB,OAAO,IAET,IAAOsS,GAEL,IA6lCuBwd,EACvB/W,EA9lCIgX,IAAqB9W,EAAiB+W,MAAK,SAAUnT,GAEvD,MAAuB,oBADLA,EAAM1D,eAGtB8W,IAAuBhX,EAAiB+W,MAAK,SAAU9I,GAEzD,MAAuB,sBADLA,EAAM/N,eAGtB+W,IAAsBjX,EAAiB+W,MAAK,SAAUG,GAExD,MAAuB,qBADLA,EAAMhX,eAG1B,KAAQL,IAAmByB,IAAmBwV,IAAqBE,IAAuBC,GAAqBpX,GAAkByB,GAAkBwV,GAAoBE,GAAsBC,GAE/L3T,KAAKjK,oBAAsBA,EAC3BiK,KAAKzD,eAAiBA,EACtByD,KAAKmS,iBAAmBA,EACxBnS,KAAKpC,cAAgBA,EACrBoC,KAAKhC,eAAiBA,EACtBgC,KAAK/B,qBAAuBA,EAC5B+B,KAAK9B,UAAYA,EACjB8B,KAAKqS,gBAAkBhrB,SAAS6C,eAAe,mBAC/C8V,KAAKsS,gBAAkBjrB,SAAS6C,eAAe,mBAC/C8V,KAAKuS,kBAAoBlrB,SAAS6C,eAAe,qBACjD8V,KAAKwS,aAAenrB,SAAS6C,eAAe,gBAC5C8V,KAAKyS,eAAiBprB,SAAS6C,eAAe,kBAC9C8V,KAAK0S,cAAgBrrB,SAAS6C,eAAe,iBAC7C8V,KAAK2S,gBAAkBtrB,SAAS6C,eAAe,mBAC/C8V,KAAK4S,YAAc,IAAI,GAAW,CAChClV,iBAAkBA,EAClBlB,aAAcwD,OAEhBA,KAAK6S,aA8jCHrW,GADuB+W,EA7jCc,CACrC/W,aAAcwD,KACdtD,iBAAkBA,IA4jCIF,aACH+W,EAAO7W,iBACNyD,KAAI,SAAU0T,GACpC,IAAIjX,EAAciX,EAAOjX,YACrBkX,EAAc,GAAyBD,EAAQ,CAAC,gBAEpD,IAAOC,EAAYnX,UAAWmX,GAE9B,IAAIlQ,EAAO,GAAc,GAAIkQ,EAAa,CACxCtX,aAAcA,IAGhB,MAAoB,oBAAhBI,EACK,IAAI,GAAWgH,GAGJ,iBAAhBhH,EACK,IAAI,GAAagH,GAGN,qBAAhBhH,EACK,IAAImX,GAAgBnQ,GAGT,gBAAhBhH,EACK,IAAI,GAAYgH,GAGL,sBAAhBhH,EACK,IAAIoX,GAAiBpQ,GAGV,eAAhBhH,EACK,IAAI,GAAWgH,GAGJ,2BAAhBhH,EACK,IAAIqX,GAAsBrQ,GAGf,2BAAhBhH,EACK,IAAIsX,GAAsBtQ,GAGf,kBAAhBhH,EACK,IAAI,GAAcgH,GAGP,eAAhBhH,EACK,IAAI,GAAWgH,GAGJ,iBAAhBhH,EACK,IAAIuX,GAAavQ,QAG1B,KAAO,EAAO,CACZhH,YAAaA,QAnnCfoD,KAAK8S,4BACL9S,KAAK7B,oBAAsB,IAAI3O,SAAQ,SAAUlM,GAC/C,OAAOmnB,EAAMqI,4BAA8BxvB,KA8btC,IACD8wB,EA3FAC,EAyQR,OAzmBA,GAAa5X,EAAa,CAAC,CACzB1Y,IAAK,eACLN,MAAO,WACLuc,KAAK6S,YAAYzpB,SAAQ,SAAUkrB,GACjCA,EAAIlW,kBAGF4B,KAAK/B,sBACP+B,KAAKuU,6BAGPvU,KAAKwU,oBAAoB,CACvB3W,gBAAgB,MAGnB,CACD9Z,IAAK,6BACLN,MAAO,WACL,IAAImoB,EAAS5L,KAET6K,EAAkB7K,KAAKqS,gBAErBoC,EAAM,IAAIzG,GAAO,CACnBnD,gBAAiBA,EACjB2B,KAAM,YACN1jB,UAAW,gBACXmlB,SAAU,WACRrC,EAAO8I,iBAETvtB,GAAI,yBAENstB,EAAIrW,eACJ4B,KAAK+S,WAAa0B,EAGlB,IAAIE,EAAO,IAAI3G,GAAO,CACpBnD,gBAAiBA,EACjB2B,KAAM,SACN1jB,UAAW,gBACXmlB,SAAU,WACRrC,EAAOgJ,iBAETztB,GAAI,yBAGNwtB,EAAKvW,eAEL4B,KAAKgT,WAAa2B,EAEpB9J,EAAkB7K,KAAKwS,aAErB,IAAItU,EAAY8B,KAAK9B,UACrB,IAAOA,GACP,IAAI+U,EAAc,IAAI,GAAW,CAC/BpI,gBAAiBA,EACjBlO,UAAWuB,EAAY,QACvBjB,YAAa,QACbH,mBAAoBkD,KAAKjK,oBAAsB,QAC/C8G,eAAgB,GAChBL,aAAcwD,KACd7Y,GAAI,sBAEN8rB,EAAY7U,eACZ4B,KAAKiT,YAAcA,EAGnB,IAAI4B,EAAQ,IAAI7G,GAAO,CACrBnD,gBAAiBA,EACjB2B,KAAM,OACNyB,SAAU,WACRrC,EAAOkJ,uBAET3tB,GAAI,uBAGN0tB,EAAMzW,eAEN4B,KAAKkT,WAAa2B,IAGrB,CACD9wB,IAAK,sBACLN,MAAO,WACL,IAAIsxB,EAAkB/U,KAAK+U,gBAC3B,IAAOA,EAAgBC,kBAAmBD,GAC1C,IAAI/E,EAAchQ,KAAKiT,YAAYgC,YAEnC,GAAKjF,EAAL,CAKA,IAAIC,EAAY,GAAgBiF,gBAAgBlF,GAEhD,GAAIhQ,KAAK4S,YAAYuC,mBAAmBlF,EAAW,CACjDmF,aAAa,IADf,CAGE,IAAIC,EAAY,2BAA6BrV,KAAKjK,oBAAsB,wBAA+BiK,KAAKjK,oBAAsB,mBAAqBka,EAAY,6DACnKnK,MAAMuP,OAJR,CAQA,IAAIlF,EAAgB,GACpBnQ,KAAK6S,YAAYxkB,QAAO,SAAUinB,GAChC,OAAOA,EAAOtY,qBACb5T,SAAQ,SAAUksB,GACnB,IAAIC,EAAaD,EAAOL,YACxB,IAAO,EAAC,EAAO,IAAIhsB,SAASssB,IAAeA,EAAYD,EAAO3Y,eAA0BrP,IAAfioB,EAA0B,CACjGA,WAAYA,IAEdpF,EAAcmF,EAAO3Y,WAAa4Y,KAEpC,IAAIC,EAAa,IAAIC,GAAY,CAC/BxF,UAAWA,EACXE,cAAeA,EACf3T,aAAcwD,OAEhBA,KAAK4S,YAAY8C,YAAYF,GAC7BxV,KAAK2V,cAAcH,GACnBxV,KAAK4V,sBA/BH9P,MAAM,uCAAyC9F,KAAKjK,oBAAsB,2BAiC7E,CACDhS,IAAK,gBACLN,MAAO,WAELuc,KAAK6S,YAAYzpB,SAAQ,SAAUksB,GACjCA,EAAOO,aAGV,CACD9xB,IAAK,kBACLN,MAAO,WACL,IAAIwoB,EAASjM,KAET6P,EAAS7P,KAAK8V,cAClB,IAAOjG,EAAOkG,gBACd,IAAI5F,EAAgBN,EAAOM,cAEvB6F,EAAQ,SAAeC,GACzB,IAAIC,EAAU/F,EAAc8F,GAC5B,KAAQ,CAAC,cAAe,YAAa,KAAM,QAAQhtB,SAASitB,IAE5DjK,EAAOkK,aAAY,SAAUb,GAC3B,OAAOA,EAAO3Y,YAAcsZ,KAC3BG,gBAAgBF,IAGrB,IAAK,IAAID,KAAU9F,EACjB6F,EAAMC,GAGRjW,KAAKqW,0BAEN,CACDtyB,IAAK,gBACLN,MAAO,WACL,IAAIosB,EAAS7P,KAAK8V,cAClB,IAAOjG,EAAOkG,eAAgBlG,GAC9B,IAAIyG,EAAgBtW,KAAK4S,YAAY2D,+BAA+B1G,GACpE7P,KAAKwW,kBACLxW,KAAKiT,YAAYmD,gBAAgB,GAAgBK,gBAAgBH,MAElE,CACDvyB,IAAK,gBACLN,MAAO,WACL,IAAIosB,EAAS7P,KAAK8V,cAClB,IAAOjG,EAAO6G,gBAAiB7G,GAC/B7P,KAAKwW,kBACLxW,KAAKiT,YAAYmD,gBAAgBvG,EAAOG,aACxChQ,KAAK4S,YAAY+D,cAAc9G,KAEhC,CACD9rB,IAAK,sBACLN,MAAO,WACL,IAAI6oB,EAAStM,KAET4W,EAAQzjB,UAAUhS,OAAS,QAAsBmM,IAAjB6F,UAAU,GAAmBA,UAAU,GAAK,GAC5E0jB,EAAuBD,EAAM/Y,eAC7BA,OAA0C,IAAzBgZ,GAA0CA,EAE3DhZ,EACFmC,KAAK8W,kBAAiB,GAIpB,GAA4B9W,KAAMmT,IAA+BA,MAIrE,GAA4BnT,KAAMmT,IAA+BA,IAAiC4D,uBAAsB,WACtHzK,EAAOwK,mBAEP,GAA4BxK,EAAQ6G,IAA+BA,IAAiC,WAGvG,CACDpvB,IAAK,mBACLN,MAAO,WACL,IAAIipB,EAAS1M,KAETnC,EAAiB1K,UAAUhS,OAAS,QAAsBmM,IAAjB6F,UAAU,IAAmBA,UAAU,GACpF6M,KAAKgX,oBAEDhX,KAAKzD,iBACPyD,KAAKiX,cACLjX,KAAKmC,kBAGPnC,KAAKkX,2BACLlX,KAAKmX,2BACLnX,KAAKpC,cAAc,CACjBC,eAAgBA,IAElBmC,KAAKoX,oBACLpX,KAAKqX,oBAEDxZ,IACFmC,KAAKsX,uBACLhzB,OAAOqF,iBAAiB,cAAc,WACpC,OAAO+iB,EAAO4K,yBACb,CACDztB,SAAS,IAEXmW,KAAKuX,qBACLvX,KAAKwX,sCAGR,CACDzzB,IAAK,mCACLN,MAAO,WACSuc,KAAK6S,YAAY4E,OAAM,SAAUnD,GAE7C,OADA,IAAOA,EAAItX,kBAAkB7U,cAAgBuvB,SACtCpD,EAAItX,mBAAqBsX,EAAIqD,wBAIpC3X,KAAKuS,kBAAkBvsB,MAAMka,QAAU,UAG1C,CACDnc,IAAK,qBACLN,MAAO,WACL,YAAY,CACVT,KAAM,cACNS,MAAOuc,KAAK+U,gBAAgB9E,UAAY,IAAMjQ,KAAKjK,oBAAoBhF,kBAG1E,CACDhN,IAAK,oBACLN,MAAO,WACL,IAAIsxB,EAAkB/U,KAAK+U,gBAE3B,GAAKA,EAAgB2B,gBAArB,CAIE1W,KAAK2S,gBAAgBrpB,UAAUqJ,OAAO,iBAGxC,IAAIilB,EAAe7C,EAAgB8C,WAE/B,GAA4B7X,KAAMoT,IAAgBA,MAAoBwE,IAGxE,GAA4B5X,KAAMoT,IAAgBA,IAAkBwE,EAGjE,GAA4B5X,KAAMqT,IAAUA,MAC/C,GAA4BrT,KAAMqT,IAAUA,IAAYhsB,SAASC,cAAc,KAC/E,GAA4B0Y,KAAMqT,IAAUA,IAAUlsB,GAAK,iBAE3D6Y,KAAK0S,cAAc5iB,YAAY,GAA4BkQ,KAAMqT,IAAUA,MAG7E,GAA4BrT,KAAMqT,IAAUA,IAAUrI,aAAa,OAAQ4M,GAE3E,GAA4B5X,KAAMqT,IAAUA,IAAU1tB,YAAciyB,QAvBlE5X,KAAK2S,gBAAgBrpB,UAAUyC,IAAI,mBAyBtC,CACDhI,IAAK,oBACLN,MAAO,WACLuc,KAAKyS,eAAezsB,MAAMka,QAAUF,KAAK+U,gBAAgBC,kBAAoB,GAAK,SAEnF,CACDjxB,IAAK,uBACLN,MAAO,WACL,IAAIq0B,EAAaxzB,OAAOgO,SAASE,KAC7BulB,EAAc,GAAeC,WAEjC,GAAoB,OAAhBD,EAAJ,CAIA,IAAI9H,EAAY8H,EAAY9H,UAC5B,IAAOA,GACP,IAAIgI,EAAkBjY,KAAK4S,YAAYuC,mBAAmBlF,EAAW,CACnEmF,aAAa,IAGf,GAAI6C,EAIF,OAHAjY,KAAK2V,cAAcsC,GACnB,OAAAC,GAAA,GAAWlY,KAAKjK,oBAAsB,KAAOkiB,EAAgBjI,YAAc,yBAC3E,cAIF,IAAI9R,EAAY6Z,EAAY7Z,UAW5B,GAVA,IAAOA,GAQSA,IAAc8B,KAAK9B,UAGjC4H,MAAM,oEADR,CAKA,IAAIqK,EAAgB4H,EAAY5H,cAChC,IAAOA,GACP,IAAIqF,EAAa,IAAIC,GAAY,CAC/BxF,UAAWA,EACXE,cAAeA,EACf3T,aAAcwD,OAEhBA,KAAK4S,YAAY8C,YAAYF,GAC7BxV,KAAK2V,cAAcH,GACnB,OAAA0C,GAAA,GAAWlY,KAAKjK,oBAAsB,KAAOyf,EAAWxF,YAAc,yBACtE,cACA,YAAY,CACVhtB,KAAM,kBACNS,MAAOuc,KAAKjK,oBAAsB,IAAMyf,EAAWxF,YACnDrvB,KAAM,CACJm3B,WAAYA,SAIjB,CACD/zB,IAAK,oBACLN,MAAO,WACL,IAAI00B,EAAQnY,KAAKoY,yBVjfvB,SAAwBC,EAAIC,EAAKC,GACxBzU,EAAgBhiB,MAAMke,KAAM7M,WUmf/B,CAFY6M,KAAKwY,wBAEKL,EAAO,UAE9B,CACDp0B,IAAK,cACLN,OACM4wB,EAAe,GAAgCtQ,mBAAmBC,MAAK,SAASC,IAClF,IAEI1H,EAAgBkc,EAFhB3L,EAAS9M,KAGb,OAAO+D,mBAAmBQ,MAAK,SAAkBC,GAC/C,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EAQH,OAPAnI,EAAiByD,KAAKzD,eAEtBkc,EAAgB,WACd,OAAO3L,EAAO4L,mBAGhBlU,EAASE,KAAO,EACTiU,GAAe,CACpBpc,eAAgBA,EAChBkc,cAAeA,IAGnB,KAAK,EACHzY,KAAKhC,iBACLgC,KAAK8S,8BAEP,KAAK,EACL,IAAK,MACH,OAAOtO,EAASO,UAGrBd,EAASjE,UAGd,WACE,OAAOqU,EAAavyB,MAAMke,KAAM7M,cAKnC,CACDpP,IAAK,2BACLN,MAAO,WACL,IAAI+pB,EAASxN,KASbA,KAAK6S,YAAYzpB,SAAQ,SAAUkrB,GACjC,IAPyCsE,EAO3BtE,EAAIhX,oBAPuBsb,EAOatE,EAAIhX,mBANnDkQ,EAAO2I,aAAY,SAAUb,GAClC,OAAOA,EAAO3Y,YAAcic,KAC3B3D,cAI6EX,EAAItX,oBAAsBwQ,EAAOuH,gBAAgBC,kBAG/HV,EAAIuE,OAEJvE,EAAIwE,YAIT,CACD/0B,IAAK,2BACLN,MAAO,WACAuc,KAAK/B,uBAIN+B,KAAK+U,gBAAgB2B,gBACvB1W,KAAKgT,WAAW8F,OAEhB9Y,KAAKgT,WAAW6F,OAGd7Y,KAAK+U,gBAAgBC,mBACvBhV,KAAK+S,WAAW8F,OAChB7Y,KAAKkT,WAAW4F,OAChB9Y,KAAKiT,YAAY6F,SAEjB9Y,KAAKkT,WAAW2F,OAChB7Y,KAAKiT,YAAY4F,OAEZ7Y,KAAK+U,gBAAgBgE,qBAGxB/Y,KAAK+S,WAAW8F,OAFhB7Y,KAAK+S,WAAW+F,WAMrB,CACD/0B,IAAK,iBACLN,OACM2wB,EAAmB,GAAgCrQ,mBAAmBC,MAAK,SAASuB,IACtF,OAAOxB,mBAAmBQ,MAAK,SAAmBsB,GAChD,OACE,OAAQA,EAAUpB,KAAOoB,EAAUnB,MACjC,KAAK,EACH,GAAI1E,KAAK+U,gBAAgBC,kBAAmB,CAC1CnP,EAAUnB,KAAO,EACjB,MAGF,OAAOmB,EAAUf,OAAO,UAE1B,KAAK,EACH,IAAK,GAA4B9E,KAAMsT,IAA4BA,IAA6B,CAC9FzN,EAAUnB,KAAO,EACjB,MAGF,OAAOmB,EAAUf,OAAO,UAE1B,KAAK,EAMH,OALA,GAA4B9E,KAAMsT,IAA4BA,KAA8B,EAC5FzN,EAAUmT,GAAKhZ,KAAKiZ,YACpBpT,EAAUqT,GAAK,CAAC,EAAYhM,eAC5BrH,EAAUsT,GAAK9H,GACfxL,EAAUnB,KAAO,GACV,IAET,KAAK,GACHmB,EAAUuT,GAAKvT,EAAUhB,KACzBgB,EAAUwT,IAAK,EAAIxT,EAAUsT,IAAItT,EAAUuT,IAC3CvT,EAAUyT,GAAKzT,EAAUqT,GAAGvL,OAAOpsB,KAAKskB,EAAUqT,GAAIrT,EAAUwT,IAEhExT,EAAUmT,GAAGO,UAAUh4B,KAAKskB,EAAUmT,GAAInT,EAAUyT,IAEtD,KAAK,GACL,IAAK,MACH,OAAOzT,EAAUd,UAGtBQ,EAAUvF,UAGf,WACE,OAAOoU,EAAiBtyB,MAAMke,KAAM7M,cAKvC,CACDpP,IAAK,cACLN,MAAO,SAAqB8Z,GAC1B,IAAI+X,EAAStV,KAAK6S,YAAYY,KAAKlW,GAEnC,OADA,IAAO+X,GACAA,IAER,CACDvxB,IAAK,wBACLN,MAAO,WACLuc,KAAK8V,cAAgB9V,KAAK4S,YAAY4G,iBAEvC,CACDz1B,IAAK,gBACLN,MAAO,SAAuBosB,GAC5B7P,KAAK8V,cAAgBjG,IAEtB,CACD9rB,IAAK,mBACLN,MAAO,SAA0BkZ,GAC/B,OAAOqD,KAAKmW,aAAY,SAAUb,GAChC,OAAOA,EAAO3Y,YAAcA,KAC3B8c,eAEJ,CACD11B,IAAK,0BACLV,IAAK,WACH,OAAO2c,KAAKmW,aAAY,SAAUb,GAChC,OAAOA,EAAOoE,gCAGjB,CACD31B,IAAK,0BACLV,IAAK,WACH,OAAO2c,KAAK2Z,wBAAwBF,eAErC,CACD11B,IAAK,0BACLV,IAAK,WACH,OAAO2c,KAAKmW,aAAY,SAAUb,GAChC,OAAOA,EAAOsE,gCAGjB,CACD71B,IAAK,0BACLV,IAAK,WACH,OAAO2c,KAAK6Z,wBAAwBJ,eAErC,CACD11B,IAAK,cACLV,IAAK,WACH,OAAO2c,KAAKmW,aAAY,SAAUb,GAChC,OAAOA,EAAOwE,oBAGjB,CACD/1B,IAAK,oBACLV,IAAK,WACH,OAAO2c,KAAKiZ,YAAYQ,eAEzB,CACD11B,IAAK,gBACLV,IAAK,WACH,IAAIyyB,EACAf,EAAkB/U,KAAK+U,gBAc3B,OAXEe,EADEf,EAAgBgE,qBACFhE,EAAgBgF,cAEhBhF,EAGlB,KAAQe,EAAciD,qBAAsB,CAC1CjD,cAAeA,IAEjB,IAAOA,EAAc7F,UAAW,CAC9B6F,cAAeA,IAEVA,GAET1qB,IAAK,SAAa4uB,GAChB,IAAI/J,EAEA+J,EAAa7xB,cAAgB8L,SAC/Bgc,EAAY+J,IAGVA,aAAwB,IAAUA,aAAwBC,MAC5DhK,EAAY+J,EAAa/J,WAG3B,IAAOA,EAAW,CAChB+J,aAAcA,EACd/J,UAAWA,IAEbjQ,KAAKka,cAAc9D,gBAAgBnG,KAEpC,CACDlsB,IAAK,kBACLV,IAAK,WACH,IAAI4sB,EAAYjQ,KAAKka,cAAcjF,YAC/BpF,EAAS7P,KAAK4S,YAAYuC,mBAAmBlF,EAAW,CAC1DmF,aAAa,IAGf,GAAIvF,EACF,OAAOA,EAGT,IAAIsK,EAAoBna,KAAKka,cAAcrd,eAK3C,OAJA,IAAOsd,EAAmB,CACxBA,kBAAmBA,IAEAna,KAAK4S,YAAYuC,mBAAmBgF,KAG1D,CACDp2B,IAAK,gBACLV,IAAK,WACH,OAAO2c,KAAKmW,aAAY,SAAUb,GAChC,OAAOA,EAAOqC,0BAKblb,EA9sB6B,GAitBlC0W,GAAgC,GAA2B,gCAE3DC,GAAiB,GAA2B,iBAE5CC,GAAW,GAA2B,WAEtCC,GAA6B,GAA2B,6BAExD,GAAsB,WACxB,SAAS8G,EAAOC,GACd,IAAItM,EAAS/N,KAETrD,EAAY0d,EAAM1d,UAClBG,EAAqBud,EAAMvd,mBAC3BD,EAAiBwd,EAAMxd,eACvBI,EAAcod,EAAMpd,YACpBT,EAAe6d,EAAM7d,aACrBqO,EAAkBwP,EAAMxP,gBACxByP,EAAwBD,EAAMrd,kBAC9BA,OAA8C,IAA1Bsd,GAA2CA,EAC/DxsB,EAAQ,GAAyBusB,EAAO,CAAC,YAAa,qBAAsB,iBAAkB,cAAe,eAAgB,kBAAmB,sBAEpJ,GAAgBra,KAAMoa,GAEtBpa,KAAKxD,kBAAe,EACpBwD,KAAKrD,eAAY,EACjBqD,KAAKlD,wBAAqB,EAC1BkD,KAAKua,gBAAa,EAClBva,KAAKhD,uBAAoB,EACzBgD,KAAKnD,oBAAiB,EACtBmD,KAAKwa,gBAAa,EAClB,IAAO7d,GACP,IAAOH,GACPpb,OAAO2M,OAAOiS,KAAM,GAAc,CAChCrD,UAAWA,EACXH,aAAcA,GACb1O,IACHkS,KAAKhD,kBAAoBA,EACzBgD,KAAKnD,eAAiBA,EACtBgO,EAAkBA,IAAoB7N,EAAoBgD,KAAKxD,aAAa6V,gBAAkBrS,KAAKxD,aAAa8V,iBAChH,IAAOzH,EAAiB,CACtBlO,UAAWA,IAEbqD,KAAKua,WAAa,CAChBrQ,SAAUvN,EACViO,kBAAmB9N,EACnBqN,gBAAiB,WACf4D,EAAOvR,aAAagY,uBAEtBpK,cAAevN,EACfgO,gBAAiBA,EACjB5N,YAAaA,GAiEjB,OA7DA,GAAamd,EAAQ,CAAC,CACpBr2B,IAAK,eACLN,MAAO,WACDuc,KAAKya,YACPza,KAAKya,aAGP,IAAOza,KAAKwa,YACZxa,KAAKwa,WAAW5nB,SAEjB,CACD7O,IAAK,kBACLN,MAAO,SAAyByE,GAC9B8X,KAAKwa,WAAWE,UAAUxyB,KAE3B,CACDnE,IAAK,OACLN,MAAO,WACLuc,KAAKwa,WAAW3B,SAEjB,CACD90B,IAAK,OACLN,MAAO,WACLuc,KAAKwa,WAAW1B,SAEjB,CACD/0B,IAAK,QACLN,MAAO,cAEN,CACDM,IAAK,cACLV,IAAK,WACH,OAAO2c,KAAKwa,WAAWG,cAExB,CACD52B,IAAK,eACLV,IAAK,WAEH,OADiB2c,KAAKxD,aAAasZ,cAAc8E,iBAAiB5a,QAGnE,CACDjc,IAAK,eACLV,IAAK,WACH,GAAI2c,KAAKxD,aAAauY,gBAAgBC,kBACpC,OAAOhV,KAAKiV,YAGd,IAAI4F,EAAe7a,KAAK6a,aAExB,OAAI7a,KAAKhD,mBAIY,OAAjB6d,EAHKA,EAOF7a,KAAKiV,gBAITmF,EA5GiB,GA+GtB,GAA0B,SAAUU,GAGtC,SAASC,EAAWnX,GAClB,IAAIuK,EAMJ,OAJA,GAAgBnO,KAAM+a,IAEtB5M,EAAS,GAA2BnO,KAAM,GAAgB+a,GAAYx5B,KAAKye,KAAM4D,KAC1E4W,WAAa,IAAI,GAAUrM,EAAOoM,YAClCpM,EAGT,OAZA,GAAU4M,EAAYD,GAYfC,EAbqB,CAc5B,IAEE,GAA6B,SAAUC,GAGzC,SAASC,EAAcrX,GACrB,IAAIsX,EAMJ,OAJA,GAAgBlb,KAAMib,IAEtBC,EAAU,GAA2Blb,KAAM,GAAgBib,GAAe15B,KAAKye,KAAM4D,KAC7E4W,WAAa,IAAI9O,EAAawP,EAAQX,YACvCW,EAGT,OAZA,GAAUD,EAAeD,GAYlBC,EAbwB,CAc/B,IAEE,GAA4B,SAAUE,GAGxC,SAASC,EAAaxX,EAAM2I,GAC1B,IAAI8O,EASJ,OAPA,GAAgBrb,KAAMob,IAEtBC,EAAU,GAA2Brb,KAAM,GAAgBob,GAAc75B,KAAKye,KAAM4D,KAC5E4W,gBAAa,EACrBa,EAAQb,WAAa,IAAI,EAAY,GAAc,CACjDjO,cAAeA,GACd8O,EAAQd,aACJc,EAUT,OAtBA,GAAUD,EAAcD,GAexB,GAAaC,EAAc,CAAC,CAC1Br3B,IAAK,cACLN,MAAO,SAAqBmgB,GAC1B5D,KAAKwa,WAAWc,YAAY1X,OAIzBwX,EAvBuB,CAwB9B,IAEEjH,GAA4B,SAAUoH,GAGxC,SAASpH,EAAaqH,GACpB,IAAIte,EAAiBse,EAAMte,eACvB0G,EAAO,GAAyB4X,EAAO,CAAC,mBAI5C,OAFA,GAAgBxb,KAAMmU,GAEf,GAA2BnU,KAAM,GAAgBmU,GAAc5yB,KAAKye,KAAM,GAAc,CAC7F/C,YAAa,SACZ2G,GAAO1G,IAGZ,OAbA,GAAUiX,EAAcoH,GAajBpH,EAduB,CAe9B,IAEE,GAA0B,SAAUsH,GAGtC,SAASC,EAAW9X,GAClB,IAAI+X,EAOJ,OALA,GAAgB3b,KAAM0b,IAEtBC,EAAU,GAA2B3b,KAAM,GAAgB0b,GAAYn6B,KAAKye,KAAM4D,KAC1E2W,WAAWrO,kBAAoBtI,EAAK7G,mBAC5C4e,EAAQnB,WAAa,IAAIzO,EAAU4P,EAAQpB,YACpCoB,EAGT,OAbA,GAAUD,EAAYD,GAafC,EAdqB,CAe5B,IAYE,GAA2B,SAAUE,GAGvC,SAASC,EAAYjY,GACnB,IAAIkY,EAQJ,OANA,GAAgB9b,KAAM6b,IAEtBC,EAAU,GAA2B9b,KAAM,GAAgB6b,GAAat6B,KAAKye,KAAM,GAAc,CAC/F/C,YAAa,QACZ2G,MACK4W,WAAa,IAAI3M,GAAWiO,EAAQvB,YACrCuB,EAGT,OAdA,GAAUD,EAAaD,GAchBC,EAfsB,CAgB7B,IAEE9H,GAA+B,SAAUgI,GAG3C,SAAShI,IAGP,OAFA,GAAgB/T,KAAM+T,GAEf,GAA2B/T,KAAM,GAAgB+T,GAAiBjyB,MAAMke,KAAM7M,YAGvF,OARA,GAAU4gB,EAAiBgI,GAQpBhI,EAT0B,CAUjC,IAEEC,GAAgC,SAAUgI,GAG5C,SAAShI,IAGP,OAFA,GAAgBhU,KAAMgU,GAEf,GAA2BhU,KAAM,GAAgBgU,GAAkBlyB,MAAMke,KAAM7M,YAGxF,OARA,GAAU6gB,EAAkBgI,GAQrBhI,EAT2B,CAUlC,IAEE,GAA4B,SAAUiI,GAGxC,SAASC,EAAaC,GACpB,IAAIC,EAEA7P,EAAgB4P,EAAM5P,cACtB3I,EAAO,GAAyBuY,EAAO,CAAC,kBAS5C,OAPA,GAAgBnc,KAAMkc,IAEtBE,EAAU,GAA2Bpc,KAAM,GAAgBkc,GAAc36B,KAAKye,KAAM,GAAc,CAChG/C,YAAa,QACb4N,gBAAiBjH,EAAKpH,aAAa6V,iBAClCzO,GAAO2I,KACFoL,oBAAqB,EACtByE,EAyCT,OAxDA,GAAUF,EAAcD,GAkBxB,GAAaC,EAAc,CAAC,CAC1Bn4B,IAAK,aACLN,MAAO,WACLuc,KAAKwa,WAAWjO,cAAgBvM,KAAKqc,sBAEtC,CACDt4B,IAAK,UACLN,MAAO,WACLuc,KAAKya,aACLza,KAAKwa,WAAW8B,YAEjB,CACDv4B,IAAK,oBACLN,MAAO,WACL,IAAI84B,EAAwBvc,KAAKxD,aAAaoW,YAAY4J,gBACtDC,EAAeF,EAAsBE,aACrCC,EAAaH,EAAsBG,WACnCC,EAAcJ,EAAsBI,YAElCxc,EAAM,SAAayc,GACrB,IAAI3M,EAAY2M,EAAM3M,UAClBD,EAAc4M,EAAM5M,YAGxB,OAFA,IAAOC,GACP,IAAOD,GACA,CACL9nB,IAAK+nB,EACL7C,WAAY4C,IAQlB,OAJEyM,EAAeA,EAAatc,IAAIA,GAChCuc,EAAaA,EAAWvc,IAAIA,GAC5Bwc,EAAcA,EAAYxc,IAAIA,GAEzBuc,EAAWv7B,OAAS,EAAI,GAAGwsB,OAAO0D,GAAmBoL,GAAe,CAAC,EAAYvP,YAAY,UAAWmE,GAAmBqL,GAAa,CAAC,EAAYxP,YAAY,WAAYmE,GAAmBsL,IAAgB,GAAGhP,OAAO0D,GAAmBoL,GAAe,CAAC,EAAYvP,eAAgBmE,GAAmBsL,QAIhTT,EAzDuB,CA0D9B,IAEEjI,GAAqC,SAAU4I,GAGjD,SAAS5I,IACP,IAAI1G,EAEAuP,EAEJ,GAAgB9c,KAAMiU,GAEtB,IAAK,IAAIxG,EAAOta,UAAUhS,OAAQyiB,EAAO,IAAIzS,MAAMsc,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC/E9J,EAAK8J,GAAQva,UAAUua,GAKzB,OAFAoP,EAAU,GAA2B9c,MAAOuN,EAAmB,GAAgB0G,IAAwB1yB,KAAKO,MAAMyrB,EAAkB,CAACvN,MAAM2N,OAAO/J,MAC1I8V,4BAA6B,EAC9BoD,EAGT,OAlBA,GAAU7I,EAAuB4I,GAkB1B5I,EAnBgC,CAoBvC,IAEEC,GAAqC,SAAU6I,GAGjD,SAAS7I,IACP,IAAI8I,EAEAC,EAEJ,GAAgBjd,KAAMkU,GAEtB,IAAK,IAAIgJ,EAAQ/pB,UAAUhS,OAAQyiB,EAAO,IAAIzS,MAAM+rB,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFvZ,EAAKuZ,GAAShqB,UAAUgqB,GAK1B,OAFAF,EAAU,GAA2Bjd,MAAOgd,EAAmB,GAAgB9I,IAAwB3yB,KAAKO,MAAMk7B,EAAkB,CAAChd,MAAM2N,OAAO/J,MAC1IgW,4BAA6B,EAC9BqD,EAGT,OAlBA,GAAU/I,EAAuB6I,GAkB1B7I,EAnBgC,CAoBvC,IAEE,GAA0B,SAAUkJ,GAGtC,SAASC,EAAWC,GAClB,IAAIC,EAEAC,EAAgBF,EAAOE,cACvB5Z,EAAO,GAAyB0Z,EAAQ,CAAC,kBAQ7C,OANA,GAAgBtd,KAAMqd,IAEtBE,EAAU,GAA2Bvd,KAAM,GAAgBqd,GAAY97B,KAAKye,KAAM,GAAc,CAC9F/C,YAAa,SACZ2G,GAAO4Z,KACF1D,gBAAiB,EAClByD,EAyBT,OAvCA,GAAUF,EAAYD,GAiBtB,GAAaC,EAAY,CAAC,CACxBt5B,IAAK,aACLN,MAAO,WACLuc,KAAKwa,WAAWjO,cAAgBvM,KAAKxD,aAAaoW,YAAY6K,yBAE/D,CACD15B,IAAK,YACLN,MAAO,SAAmBmgB,GACxB5D,KAAKsb,YAAY1X,KAElB,CACD7f,IAAK,cACLV,IAAK,WACH,IAAI6E,EAAM,GAAK,GAAgBm1B,EAAWh8B,WAAY,cAAe2e,MAKrE,OAHA,IAAO9X,EAAK,wBAA4BoF,IAARpF,EAA2B,KAARA,EAAY,CAC7DA,IAAKA,IAEAA,MAIJm1B,EAxCqB,CAyC5B,IAEF,SAAS1E,GAAeN,GACtB,OAAOqF,GAAgB57B,MAAMke,KAAM7M,WAGrC,SAASuqB,KAsCP,OArCAA,GAAkB,GAAgC3Z,mBAAmBC,MAAK,SAAS2Z,EAASC,GAC1F,IAAIrhB,EAAgBkc,EAAepX,EACnC,OAAO0C,mBAAmBQ,MAAK,SAAmBsZ,GAChD,OACE,OAAQA,EAAUpZ,KAAOoZ,EAAUnZ,MACjC,KAAK,EAIH,OAHAnI,EAAiBqhB,EAAOrhB,eAAgBkc,EAAgBmF,EAAOnF,cAC/DpX,EAAYoX,IACZoF,EAAUnZ,KAAO,EACVtD,EAAUC,GAEnB,KAAK,EACH,GAAMA,IAAcoX,IAAkB,CACpCoF,EAAUnZ,KAAO,EACjB,MAGF,OAAOmZ,EAAU/Y,OAAO,UAE1B,KAAK,EACH,GAAMzD,IAAc9E,EAAevW,MAAMC,WAAa,CACpD43B,EAAUnZ,KAAO,EACjB,MAGF,OAAOmZ,EAAU/Y,OAAO,UAE1B,KAAK,EACHvI,EAAevW,MAAMC,WAAaob,EAEpC,KAAK,EACL,IAAK,MACH,OAAOwc,EAAU9Y,UAGtB4Y,QAEkB77B,MAAMke,KAAM7M,WAkErC,IAAI,GAA0B,WAC5B,SAAS2qB,EAAWC,GAClB,IAAIrgB,EAAmBqgB,EAAOrgB,iBAC1BlB,EAAeuhB,EAAOvhB,aAE1B,GAAgBwD,KAAM8d,GAEtB18B,OAAO+B,eAAe6c,KAAMge,GAAgB,CAC1CzV,UAAU,EACV9kB,MAAO,OAETrC,OAAO+B,eAAe6c,KAAMie,GAAiB,CAC3C1V,UAAU,EACV9kB,MAAO,OAETuc,KAAKxD,kBAAe,EACpBwD,KAAKke,uBAAoB,EACzBle,KAAKwZ,oBAAiB,EACtBxZ,KAAKxD,aAAeA,EACpB,GAA4BwD,KAAMge,IAAgBA,IAAkB,IAAI,GAAa,CACnF9f,UAAW1B,EAAa0B,YAGrB8B,KAAKxD,aAAa2V,mBACrBnS,KAAKke,kBAAoB,IAAI,GAAiB,CAC5CtL,YAAa5S,QAIjBA,KAAKwZ,eAAiB,IAAI2E,GAC1B,GAA4Bne,KAAMie,IAAiBA,IAAmB78B,OAAOwtB,QAAQlR,GAAkByC,KAAI,SAAUie,GACnH,IAAIC,EAAS,GAAeD,EAAQ,GAChCnO,EAAYoO,EAAO,GACnBlO,EAAgBkO,EAAO,GAE3B,OAAO,IAAI,GAAa,CACtBpO,UAAWA,EACXE,cAAeA,EACf3T,aAAcA,OA8KpB,OAzKA,GAAashB,EAAY,CAAC,CACxB/5B,IAAK,cACLN,MAAO,SAAqBosB,GAC1B,GAA4B7P,KAAMge,IAAgBA,IAAgBtI,YAAY7F,GAE9E7P,KAAKse,uBAEN,CACDv6B,IAAK,gBACLN,MAAO,SAAuBosB,GAC5B,GAA4B7P,KAAMge,IAAgBA,IAAgBrH,cAAc9G,GAEhF7P,KAAKse,uBAEN,CACDv6B,IAAK,qBACLN,MAAO,WACLuc,KAAKxD,aAAa0d,cAAcoC,YAEjC,CACDv4B,IAAK,qBACLN,MAAO,WACL,IAAI+Y,EAAewD,KAAKxD,aACxB,OAAO,GAA4BwD,KAAMge,IAAgBA,IAAgBO,oBAAoBpe,KAAI,SAAUqe,GACzG,IAAIvO,EAAYuO,EAAOvO,UACnBE,EAAgBqO,EAAOrO,cAC3B,OAAO,IAAIsF,GAAY,CACrBxF,UAAWA,EACXE,cAAeA,EACf3T,aAAcA,SAInB,CACDzY,IAAK,qBACLN,MAAO,SAA4BwsB,GACjC,IAAIwO,EAAStrB,UAAUhS,OAAS,QAAsBmM,IAAjB6F,UAAU,GAAmBA,UAAU,GAAK,GAC7EurB,EAAqBD,EAAOrJ,YAC5BA,OAAqC,IAAvBsJ,GAAwCA,EAE1D,IAAOzO,GAEP,IAAIL,EAAU5P,KAAK2e,mBAEfC,GAA4B,EAC5BC,GAAoB,EACpBC,OAAiBxxB,EAErB,IACE,IAAK,IAA4CyxB,EAAxCC,EAAYpP,EAAQrsB,OAAO6jB,cAAsBwX,GAA6BG,EAAQC,EAAUta,QAAQjB,MAAOmb,GAA4B,EAAM,CACxJ,IAAI/O,EAASkP,EAAMt7B,MAEnB,GAAIosB,EAAOI,YAAcA,EACvB,OAAOJ,GAGX,MAAOhM,GACPgb,GAAoB,EACpBC,EAAiBjb,EACjB,QACA,IACO+a,GAAoD,MAAvBI,EAAkB,QAClDA,EAAkB,SAEpB,QACA,GAAIH,EACF,MAAMC,GAKZ,IAAO1J,EAAa,wBAAyB,CAC3CnF,UAAWA,MAGd,CACDlsB,IAAK,uBACLN,MAAO,WACL,IAAIw7B,EAAwBjf,KAAKwc,gBAC7BE,EAAauC,EAAsBvC,WACnCC,EAAcsC,EAAsBtC,YACpC/M,EAAU,GAAGjC,OAAO0D,GAAmBqL,GAAarL,GAAmBsL,IAC3E/M,EAAQxmB,SAAQ,SAAUymB,GACxB,OAAO,IAAOA,EAAOkG,eAAgBlG,EAAOI,cAE9C,IA0hBeQ,EA1hBXyO,EAAoBtP,EAAQzP,KAAI,SAAU0P,GAC5C,IAAIxO,EAAYwO,EAAOsP,iBAEvB,OADA,IAAO9d,EAAWwO,EAAOI,WAClB5O,KAGT,OAohBeoP,EArhBiByO,EAAhCA,EAshBG/tB,MAAMC,KAAK,IAAIguB,IAAI3O,EAAIpiB,OAAOqpB,WAAW9U,SAnhB7C,CACD7e,IAAK,iCACLN,MAAO,SAAwCosB,GAC7C,IAAIwP,EAAarf,KAAKsf,sBAElBrP,EAAYJ,EAAOI,UACvB,IAAOA,GACP,IAAI1tB,EAAI,GAAgBg9B,sBACxB,IAAOh9B,GAGP,IAFA,IAAIolB,EAAOsI,EAAU5b,MAAM,KAAKM,KAAKpS,GAAG8R,MAAM,cAAc,GAAK9R,EAAI,OAE5Di9B,EAAM,EAAGA,EAAM,IAAKA,IAAO,CAClC,IAAIC,EAAY9X,GAAgB,IAAR6X,EAAY,GAAKj9B,EAAIi9B,GAE7C,IAAKH,EAAWp2B,SAASw2B,GACvB,OAAOA,EAIX,KAAO,KAER,CACD17B,IAAK,sBACLN,MAAO,WAML,OALcuc,KAAK2e,mBAEMxe,KAAI,SAAU0P,GACrC,OAAOA,EAAOI,eAIjB,CACDlsB,IAAK,mBACLN,MAAO,WACL,IAAIi8B,EAAyB1f,KAAKwc,gBAC9BC,EAAeiD,EAAuBjD,aACtCC,EAAagD,EAAuBhD,WACpCC,EAAc+C,EAAuB/C,YAEzC,MADc,GAAGhP,OAAO0D,GAAmBoL,GAAepL,GAAmBqL,GAAarL,GAAmBsL,MAG9G,CACD54B,IAAK,oBACLV,IAAK,WACH,IAAIs8B,EAAyB3f,KAAKwc,gBAC9BE,EAAaiD,EAAuBjD,WACpCC,EAAcgD,EAAuBhD,YAEzC,OAAID,EAAWv7B,OAAS,EACfu7B,EAGFC,IAER,CACD54B,IAAK,kBACLV,IAAK,WACH,IAAIo5B,EAAe,CAACzc,KAAKwZ,gBAErBxZ,KAAKke,mBACPzB,EAAah7B,KAAKue,KAAKke,mBAGzB,IAAIxB,EAAa1c,KAAK4f,qBAElBjD,EAAc,GAA4B3c,KAAMie,IAAiBA,IAGrE,OADA,IAAOxB,GAAgBC,GAAcC,GAC9B,CACLF,aAAcA,EACdC,WAAYA,EACZC,YAAaA,OAKZmB,EApNqB,GAuN1BE,GAAiB,GAA2B,iBAE5CC,GAAkB,GAA2B,kBAE7C,GAAgC,WAClC,SAAS4B,IACP,GAAgB7f,KAAM6f,GA0CxB,OAvCA,GAAaA,EAAkB,KAAM,CAAC,CACpC97B,IAAK,mBACLN,MAAO,SAA0BosB,GAC/B,IAAOA,aAAkB4F,IAEzB,IAAIxF,EAAYJ,EAAOI,UACnBE,EAAgBN,EAAOM,cACvBjS,EAAY2R,EAAOrT,aAAa0B,UAChC6Z,EAAc,IAAI,GAAW,CAC/B9H,UAAWA,EACXE,cAAeA,EACfjS,UAAWA,IAGb,OADoB,YAAU6Z,KAG/B,CACDh0B,IAAK,qBACLN,MAAO,SAA4Bq8B,GACjC,IAAOA,EAAc33B,cAAgB8L,QACrC,IAAI8jB,EAAc,YAAY+H,GAe9B,OAbI/H,EAAY/H,cAAgB+H,EAAY9H,WAAa8H,EAAY7H,iBAAmB6H,EAAY5H,gBAClG4H,EAAY9H,UAAY8H,EAAY/H,mBAC7B+H,EAAY/H,YACnB+H,EAAY5H,cAAgB4H,EAAY7H,sBACjC6H,EAAY7H,gBAGjB6H,EAAY1H,WAAa0H,EAAY7Z,YACvC6Z,EAAY7Z,UAAY6Z,EAAY1H,gBAC7B0H,EAAY1H,UAGrB0H,EAAc,IAAI,GAAWA,OAK1B8H,EA5C2B,GA+ChC,GAAsB,WACxB,SAASE,EAAOC,GACd,IAAI/P,EAAY+P,EAAO/P,UACnBE,EAAgB6P,EAAO7P,cACvB3T,EAAewjB,EAAOxjB,aAgB1B,GAdA,GAAgBwD,KAAM+f,GAEtB/f,KAAKiQ,eAAY,EACjBjQ,KAAKmQ,mBAAgB,EACrBnQ,KAAKxD,kBAAe,EACpBwD,KAAK+Y,sBAAuB,EAC5B/Y,KAAKgV,mBAAoB,EACzB,IAAO/E,GACP,IAAO,CAAC7uB,OAAQ,IAAc6H,SAASknB,EAAchoB,cACrD,IAAOqU,GACPwD,KAAKiQ,UAAYA,EACjBjQ,KAAKmQ,cAAgBA,EACrBnQ,KAAKxD,aAAeA,GAEfwD,gBAAgB+f,EAAS/f,KAAK7X,iBAAc,KAAY43B,EAC3D,MAAM,IAAIzX,UAAU,+CA4CxB,OAxCA,GAAayX,EAAQ,CAAC,CACpBh8B,IAAK,mBACLN,MAAO,SAA0B6xB,GAC/B,IAAI3Y,EAAY2Y,EAAO3Y,UACvB,IAAOA,GACP,IAAIwT,EAAgBnQ,KAAKmQ,cAEzB,GAAIxT,KAAawT,EAAe,CAC9B,IAAIjoB,EAAMioB,EAAcxT,GAExB,OADA,IAAe,OAARzU,GACAA,EAGT,OAAO,OAER,CACDnE,IAAK,iBACLV,IAAK,WACH,OAAQ2c,KAAK+Y,uBAAyB/Y,KAAKgV,oBAE5C,CACDjxB,IAAK,mBACLV,IAAK,WACH,IAAI87B,EAAmBnf,KAAK4a,iBAAiB5a,KAAKxD,aAAayc,aAI/D,OAHA,IAAOkG,EAAkB,CACvBA,iBAAkBA,IAEbA,IAER,CACDp7B,IAAK,cACLV,IAAK,WACH,IAAI48B,EAAa,GAAgBxJ,gBAAgBzW,KAAKiQ,WAItD,OAHA,IAAOgQ,EAAY,CACjBA,WAAYA,IAEPA,MAIJF,EAjEiB,GAoEtBtK,GAA2B,SAAUyK,GAGvC,SAASzK,IACP,IAAI0K,EAEAC,EAEJ,GAAgBpgB,KAAMyV,GAEtB,IAAK,IAAI4K,EAAQltB,UAAUhS,OAAQyiB,EAAO,IAAIzS,MAAMkvB,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IACpF1c,EAAK0c,GAASntB,UAAUmtB,GAQ1B,OALAF,EAAU,GAA2BpgB,MAAOmgB,EAAmB,GAAgB1K,IAAcl0B,KAAKO,MAAMq+B,EAAkB,CAACngB,MAAM2N,OAAO/J,KACxIxiB,OAAO+B,eAAe,GAAuBi9B,GAAUG,GAAiB,CACtEhY,UAAU,EACV9kB,MAAO,OAEF28B,EAmBT,OArCA,GAAU3K,EAAayK,GAqBvB,GAAazK,EAAa,CAAC,CACzB1xB,IAAK,kBACLV,IAAK,WACH,OAAO,IAER,CACDU,IAAK,aACLV,IAAK,WACH,OAAK,GAA4B2c,KAAMugB,IAAiBA,IAIjD,GAA4BvgB,KAAMugB,IAAiBA,IAHjD,GAA4BvgB,KAAMugB,IAAiBA,IAAmB,GAAeC,OAAOxgB,UAOlGyV,EAtCsB,CAuC7B,IAEE8K,GAAkB,GAA2B,kBAE7C,GAA4B,SAAUE,GAGxC,SAASC,EAAa9c,GACpB,IAAI+c,EAEJ,GAAgB3gB,KAAM0gB,GAEtBC,EAAU,GAA2B3gB,KAAM,GAAgB0gB,GAAcn/B,KAAKye,KAAM4D,IACpF,IAAIqM,EAAYrM,EAAKqM,UAOrB,OANA,KAAQA,EAAUhnB,SAAS,KAAM,CAC/BgnB,UAAWA,IAEb,IAAO,mBAAmBpc,KAAKoc,GAAY,CACzCA,UAAWA,IAEN0Q,EAGT,OAlBA,GAAUD,EAAcD,GAkBjBC,EAnBuB,CAoB9B,IAEE,GAAa,SAASE,EAAWhd,GACnC,GAAgB5D,KAAM4gB,GAEtB5gB,KAAK9B,eAAY,EACjB8B,KAAKiQ,eAAY,EACjBjQ,KAAKmQ,mBAAgB,EAIjBvM,EAAKsM,iBAAmBtM,EAAKuM,gBAC/BvM,EAAKuM,cAAgBvM,EAAKsM,sBACnBtM,EAAKsM,gBAGd,IAAID,EAAYrM,EAAKqM,UACjBE,EAAgBvM,EAAKuM,cACrBjS,EAAY0F,EAAK1F,UACjB2iB,EAAO,GAAyBjd,EAAM,CAAC,YAAa,gBAAiB,cAEzE,IAAoC,IAA7BxiB,OAAOwlB,KAAKia,GAAM1/B,QAAgB8uB,GAAaE,GAAiBjS,EAAW,2BAA4B0F,GAC9G5D,KAAK9B,UAAYA,EACjB8B,KAAKiQ,UAAYA,EACjBjQ,KAAKmQ,cAAgB,IAAI,GAAaA,IAGpC,GAAe,SAAS2Q,EAAald,GACvC,GAAgB5D,KAAM8gB,GAEtB,IAAO,CAAC1/B,OAAQ0/B,GAAc73B,SAAS2a,EAAKzb,aAAcyb,EAAMA,EAAKzb,aACrE/G,OAAO2M,OAAOiS,KAAM4D,IAGlB,GAA4B,WAC9B,SAASmd,EAAaC,GACpB,IAAI9iB,EAAY8iB,EAAO9iB,UAEvB,GAAgB8B,KAAM+gB,GAEtB3/B,OAAO+B,eAAe6c,KAAMihB,GAAY,CACtC1Y,UAAU,EACV9kB,MAAO,OAET,IAAOya,GACP,GAA4B8B,KAAMihB,IAAYA,IAAc/iB,EA2F9D,OAxFA,GAAa6iB,EAAc,CAAC,CAC1Bh9B,IAAK,oBACLN,MAAO,WACL,OAAOuc,KAAKkhB,iBAEb,CACDn9B,IAAK,cACLN,MAAO,SAAqBosB,GAC1B,IAAII,EAAYJ,EAAOI,UACnBE,EAAgBN,EAAOM,cAC3B,IAAOF,GACP,IAAOE,GAEP,IAAIP,EAAU5P,KAAKkhB,eAEnB,GAAItR,EAAQ6D,MAAK,SAAU5D,GACzB,OAAOA,EAAOI,YAAcA,KAG5B,EAAAkR,EAAOC,QAAQ,kBAAoBnR,EAAY,iCAJjD,CAQA,IAAI/R,EAAY,GAA4B8B,KAAMihB,IAAYA,IAE1DlJ,EAAc,IAAI,GAAW,CAC/B9H,UAAWA,EACXE,cAAeA,EACfjS,UAAWA,IAEb0R,EAAQnuB,KAAKs2B,GAEb/X,KAAKqhB,cAAczR,MAEpB,CACD7rB,IAAK,gBACLN,MAAO,SAAuBosB,GAC5B,IAAII,EAAYJ,EAAOI,UACvB,IAAOA,GAEP,IAAIL,EAAU5P,KAAKkhB,eAEfI,EAAa1R,EAAQzuB,OAIrBogC,GAHJ3R,EAAUA,EAAQvhB,QAAO,SAAUwhB,GACjC,OAAOA,EAAOI,YAAcA,MAEL9uB,OAErBogC,IAAeD,GAEjB,EAAAH,EAAOC,SAAQ,EAAO,UAAYnR,EAAY,eAG5CsR,IAAeD,EAAa,GAE9B,EAAAH,EAAOC,SAAQ,EAAO,UAAYnR,EAAY,0BAGhDjQ,KAAKqhB,cAAczR,KAEpB,CACD7rB,IAAK,eACLN,MAAO,WACL,IAAImsB,EAAUxjB,EAAA,EAAMke,QAAQtK,KAAK6J,eAAiB,GAMlD,OAJA,IAAO+F,EAAQznB,cAAgBgJ,OAC/Bye,EAAUA,EAAQzP,KAAI,SAAU4X,GAC9B,OAAO,IAAI,GAAWA,QAIzB,CACDh0B,IAAK,gBACLN,MAAO,SAAuBmsB,GAE5B,IAAOA,EAAQznB,cAAgBgJ,OAC/Bye,EAAQxmB,SAAQ,SAAU2uB,GACxB,IAAOA,aAAuB,OAEhC3rB,EAAA,EAAMC,QAAQ2T,KAAK6J,aAAc+F,KAElC,CACD7rB,IAAK,eACLV,IAAK,WACH,OAAO,GAA4B2c,KAAMihB,IAAYA,IAAc,eAIhEF,EAtGuB,GAyG5BE,GAAa,GAA2B,aAExChH,GAA0B,WAC5B,SAASA,IACP,GAAgBja,KAAMia,GAEtBja,KAAK+Y,0BAAuB,EAC5B/Y,KAAKgV,uBAAoB,EACzBhV,KAAKiQ,eAAY,EACjBjQ,KAAKgQ,iBAAc,EAUrB,OAPA,GAAaiK,EAAY,CAAC,CACxBl2B,IAAK,mBACLN,MAAO,WACL,OAAO,SAIJw2B,EAjBqB,GAoB1B,GAAgC,SAAUuH,GAG5C,SAASC,EAAiBC,GACxB,IAAIC,EAEA/O,EAAc8O,EAAO9O,YAgBzB,OAdA,GAAgB5S,KAAMyhB,GAEtBE,EAAU,GAA2B3hB,KAAM,GAAgByhB,GAAkBlgC,KAAKye,OAClF5e,OAAO+B,eAAe,GAAuBw+B,GAAUC,GAAS,CAC9DrZ,UAAU,EACV9kB,MAAO,OAETk+B,EAAQ5I,sBAAuB,EAC/B4I,EAAQ3M,mBAAoB,EAC5B2M,EAAQ1R,UAAY,UACpB0R,EAAQ3R,YAAc,WACtB2R,EAAQ/O,iBAAc,EACtB+O,EAAQ5I,sBAAuB,EAC/B4I,EAAQ/O,YAAcA,EACf+O,EAsBT,OA3CA,GAAUF,EAAkBD,GAwB5B,GAAaC,EAAkB,CAAC,CAC9B19B,IAAK,qBACLN,MAAO,WACL,IAAIo+B,EAAoB7hB,KAAK4S,YAAYiP,kBAEzC,OAAOA,EADG96B,KAAKuQ,MAAMvQ,KAAKwoB,SAAWsS,EAAkB1gC,WAGxD,CACD4C,IAAK,gBACLV,IAAK,WAMH,OALK,GAA4B2c,KAAM4hB,IAASA,MAC9C,GAA4B5hB,KAAM4hB,IAASA,IAAW5hB,KAAK8hB,sBAG7D,IAAO,GAA4B9hB,KAAM4hB,IAASA,IAAS7L,eAAgB,GAA4B/V,KAAM4hB,IAASA,IAAS3R,UAAW,GAA4BjQ,KAAM4hB,IAASA,KAC9K,GAA4B5hB,KAAM4hB,IAASA,QAI/CH,EA5C2B,CA6ClCxH,IAEE2H,GAAU,GAA2B,UAErCzD,GAA6B,SAAU4D,GAGzC,SAAS5D,IACP,IAAI6D,EAEAC,EAEJ,GAAgBjiB,KAAMme,GAEtB,IAAK,IAAI+D,EAAQ/uB,UAAUhS,OAAQyiB,EAAO,IAAIzS,MAAM+wB,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFve,EAAKue,GAAShvB,UAAUgvB,GAQ1B,OALAF,EAAU,GAA2BjiB,MAAOgiB,EAAmB,GAAgB7D,IAAgB58B,KAAKO,MAAMkgC,EAAkB,CAAChiB,MAAM2N,OAAO/J,MAClImV,sBAAuB,EAC/BkJ,EAAQjN,mBAAoB,EAC5BiN,EAAQhS,UAAY,WACpBgS,EAAQjS,YAAc,YACfiS,EAGT,OArBA,GAAU9D,EAAe4D,GAqBlB5D,EAtBwB,CAuB/BlE,IAEE,GAA+B,WACjC,SAASmI,IACP,GAAgBpiB,KAAMoiB,GA2BxB,OAxBA,GAAaA,EAAiB,KAAM,CAAC,CACnCr+B,IAAK,kBACLN,MAAO,SAAyB0D,GAC9B,IAAOA,GACP,IAAIk7B,EAAY,OAMhB,OALA,IAAiE,MAA1D,YAAYhuB,MAAMguB,GAAWh0B,OAAOqpB,SAAS/iB,KAAK,KAC9CxN,EAAGkN,MAAMguB,GAAWh0B,OAAOqpB,SAASvX,KAAI,SAAUmiB,GAC3D,OAAOA,EAAK,GAAGC,cAAgBD,EAAK99B,MAAM,MACzCmQ,KAAK,OAIT,CACD5Q,IAAK,kBACLN,MAAO,SAAyBT,GAC9B,IAAOA,GACP,IAAIq/B,EAAY,SAIhB,OAHA,IAAwE,MAAjE,mBAAmBhuB,MAAMguB,GAAWh0B,OAAOqpB,SAAS/iB,KAAK,KACvD3R,EAAKqR,MAAMguB,GAAWh0B,OAAOqpB,SAAS/iB,KAAKytB,EAAgB7C,uBAAuBxuB,kBAMxFqxB,EA7B0B,GAgCnC,GAAgB7C,sBAAwB,IAUxC,IAAI,GAA8B,WAChC,SAASiD,IACP,GAAgBxiB,KAAMwiB,GAoGxB,OAjGA,GAAaA,EAAgB,KAAM,CAAC,CAClCz+B,IAAK,aACLN,MAAO,SAAoBwV,GACzB,IAAIwpB,EAAcn+B,OAAOo+B,KAAKzpB,GAK9B,OAJA,IAA8B,SAAvB3U,OAAOo+B,KAAK,QACnBD,EAAcA,EAAYpuB,MAAM,KAAKM,KAAK,KAC1C,IAA8B,SAAvBrQ,OAAOo+B,KAAK,QACnBD,EAAcA,EAAYpuB,MAAM,KAAKM,KAAK,OAG3C,CACD5Q,IAAK,eACLN,MAAO,SAAsBg/B,GAI3B,OAFAA,GADAA,EAAcA,EAAYpuB,MAAM,KAAKM,KAAK,MAChBN,MAAM,KAAKM,KAAK,KAChCrQ,OAAOq+B,KAAKF,KAGvB,CACD1+B,IAAK,SACLN,MAAO,SAAgBosB,GACrB,IAAOA,aAAkB,IACzB,IAAOA,EAAO6G,iBACd,IAAIoJ,EAAgB,GAAiB8C,iBAAiB/S,GAElDgT,EAAgB7iB,KAAK8iB,WAAWhD,GAEhCiD,EAAWz+B,OAAOgO,SAASE,KAAK6B,MAAM,KAAK,GAC3C4b,EAAYJ,EAAOI,UACnB+S,EAAehvB,mBAAmBic,GAOtC,OALA,EAAAkR,EAAOC,QAAQp+B,OAASggC,EAAc,CACpChgC,KAAMA,KACNggC,aAAcA,IAELD,EAAW,IAAMC,EAAe,IAAMH,IAGlD,CACD9+B,IAAK,WACLN,MAAO,WACL,IA8BIs0B,EA7BAkL,EADa3+B,OAAOgO,SAASE,KACN6B,MAAM,KAAK,GAEtC,IAAK4uB,EACH,OAAO,KAIT,GAAI,CAAC,cAAe,cAAch6B,SAASg6B,GACzC,OAAO,KAIT,GAAIA,EAAUr1B,WAAW,cACvB,OAAO,KAKT,KAFAq1B,EAAYA,EAAU5uB,MAAM,KAAKhG,OAAOqpB,SAAS,IAG/C,OAAO,KAGT,IACEuL,EAAYjjB,KAAKkjB,aAAaD,GAC9B,MAAOpf,GAEP,OADA8B,EAAS9B,GACF,KAKT,IACEkU,EAAc,GAAiBoL,mBAAmBF,GAClD,MAAOpf,GAEP,OADA8B,EAAS9B,GACF,KAGT,OAAOkU,EAEP,SAASpS,EAAS9B,GAChB,OAAAqU,GAAA,GAAW,6CAA8C,CACvDkL,UAAU,IAEZ,YAAY,CACVpgC,KAAM,qBACNS,MAAOw/B,EACPpf,IAAKA,IAEPtB,QAAQ8gB,IAAIJ,GACZ1gB,QAAQD,MAAMuB,QAKb2e,EAtGyB","file":"views/ClockPage/clock.page.js.hash_f7dbcd4d30c174c2b8f2.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t22: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([487,1,4,0,2]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import assert from \"@brillout/assert\";\nimport { track_error } from \"../../tab-utils/views/common/tracker\";\nimport { get_browser_info } from \"../../tab-utils/utils/get_browser_info\";\n\nexport { get_max_font_size };\nexport { isPositiveNumber };\nexport { get_size };\n\n/*/\nconst DEBUG = true;\n/*/\nconst DEBUG = false;\n//*/\n\nfunction get_max_font_size({ dom_el, max_width, max_height }) {\n  assert(\n    dom_el && isPositiveNumber(max_width) && isPositiveNumber(max_height),\n    { max_width, max_height, dom_el }\n  );\n  const { fontSize, height, width } = getEstimation(\n    dom_el,\n    max_width,\n    max_height\n  );\n\n  const log_data = {\n    dom_el: dom_el.id,\n    height,\n    width,\n    max_height,\n    max_width,\n    fontSize,\n  };\n\n  const approximation = 1.02;\n  assert(\n    isPositiveNumber(fontSize) &&\n      isPositiveNumber(height) &&\n      isPositiveNumber(width) &&\n      height <= max_height * approximation &&\n      width <= max_width * approximation,\n    log_data\n  );\n\n  DEBUG && assert.log(\"[max-font-size-computation]\", log_data);\n\n  return { fontSize, height, width, max_height, max_width };\n}\n\nfunction getEstimation(el, outer_width = Infinity, outer_height = Infinity) {\n  assert(outer_height >= 0 && outer_width >= 0, { outer_height, outer_width });\n\n  const DUMMY_FONT_SIZE = 100; //intuitively: the bigger the font-size the more precise the approximation\n\n  let dummy_html = el.innerHTML;\n  if (dummy_html.length < 1) dummy_html = \"y\";\n\n  var dummy = getDummy(el.tagName);\n  dummy.innerHTML = dummy_html;\n  const dummy_text = dummy.textContent;\n\n  if (dummy_text === \"\") {\n    track_error({\n      name: \"[known_unexpected][get_max_font_size]empty_dummy\",\n      value: dummy_html,\n    });\n    return {\n      fontSize: 0,\n      width: 0,\n      height: 0,\n    };\n  }\n\n  dummy.style.fontFamily = get_computed_style(el, \"font-family\");\n  dummy.style.fontSize = DUMMY_FONT_SIZE + \"px\";\n  dummy.style.whiteSpace = \"nowrap\"; //should el be equal to get_computed_style('white-space')?\n  dummy.style.letterSpacing = get_computed_style(el, \"letter-spacing\");\n  dummy.style.lineHeight = get_computed_style(el, \"line-height\");\n\n  const dummy_height = get_size(dummy, \"height\");\n  const dummy_width = get_size(dummy, \"width\");\n\n  assert(dummy_text.length > 0);\n  assert(isPositiveNumber(dummy_width) && isPositiveNumber(dummy_height), {\n    dummy_width,\n    dummy_height,\n    dummy_html,\n  });\n\n  if (dummy_height === 0 || dummy_width === 0) {\n    if (dummy_height !== 0 || dummy_width !== 0) {\n      track_error({\n        name: \"unexpected dummy size\",\n        value: JSON.stringify({ dummy_height, dummy_width, dummy_text }),\n      });\n    } else if (is_rendered(dummy)) {\n      track_error({\n        name: \"unexpected zero-sized rendered dummy\",\n        value: \"dummy_text == \" + dummy_text,\n      });\n    }\n\n    return {\n      fontSize: 0,\n      width: 0,\n      height: 0,\n    };\n  }\n\n  assert(dummy_height > 0 && dummy_width > 0);\n\n  const ratio_width = outer_width / dummy_width;\n  const ratio_height = outer_height / dummy_height;\n  const ratio = Math.min(ratio_width, ratio_height);\n\n  const fontSize = ratio * DUMMY_FONT_SIZE;\n  const width = ratio * dummy_width;\n  const height = ratio * dummy_height;\n\n  assert(\n    isPositiveNumber(fontSize) &&\n      isPositiveNumber(height) &&\n      isPositiveNumber(width),\n    {\n      fontSize,\n      width,\n      height,\n      dummy_width,\n      dummy_height,\n      outer_width,\n      outer_height,\n    }\n  );\n\n  return {\n    fontSize,\n    width,\n    height,\n  };\n}\n\nlet dummy_el;\nfunction getDummy(tagName) {\n  if (!dummy_el) {\n    // Create a wrapper to ensure that dummy is not cropped by a `overflow: hidden` ancestor\n    // See https://css-tricks.com/popping-hidden-overflow/\n    const dummy_wrapper = document.createElement(\"div\");\n    dummy_wrapper.pointerEvents = \"none\";\n    dummy_wrapper.style.overflow = \"hidden\";\n    dummy_wrapper.style.height = \"1px\";\n    dummy_wrapper.style.width = \"1px\";\n    dummy_wrapper.style.position = \"absolute\";\n    dummy_wrapper.style.zIndex = \"999999999\";\n    dummy_wrapper.visibility = \"hidden\";\n\n    dummy_el = document.createElement(tagName);\n    dummy_el.style.position = \"absolute\";\n\n    dummy_wrapper.prepend(dummy_el);\n    document.body.prepend(dummy_wrapper);\n  }\n  assert(dummy_el.tagName === tagName);\n  return dummy_el;\n}\n\nfunction get_computed_style(el, styleProp) {\n  return document.defaultView.getComputedStyle(el).getPropertyValue(styleProp);\n}\n\nfunction isPositiveNumber(val) {\n  // `return val>=0;` doesn't catch `val===null`\n  assert(null >= 0);\n\n  return (\n    val !== null &&\n    (val === 0 || (val && val.constructor === Number && val > 0))\n  );\n}\n\nfunction get_size(el, styleProp) {\n  assert(el, \"[get_size][error]\", { styleProp, el });\n\n  const el_id = el.id;\n\n  const rendered = is_rendered(el);\n  const val = get_computed_style(el, styleProp);\n\n  if (!val) {\n    if (rendered) {\n      track_error({\n        name: \"unexpected computed style\",\n        value: \"val == \" + val,\n      });\n    }\n    return 0;\n  }\n\n  const val__casted = parseInt(val, 10);\n\n  if (!val__casted && val__casted !== 0) {\n    if (rendered) {\n      track_error({\n        name: \"unexpected computed style value\",\n        value: \"val == \" + val,\n      });\n    }\n    return 0;\n  }\n\n  assert(isPositiveNumber(val__casted), \"[get_size][error]\", {\n    el_id,\n    styleProp,\n    val,\n    val__casted,\n  });\n\n  return val__casted;\n}\n\nfunction is_rendered(el) {\n  // https://stackoverflow.com/questions/19669786/check-if-element-is-visible-in-dom/21696585#21696585\n  return el.offsetParent !== null;\n}\n","import \"./big_text.css\";\nimport React from \"react\";\nimport {\n  get_max_font_size,\n  isPositiveNumber,\n  get_size,\n} from \"./get_max_font_size\";\nimport assert from \"@brillout/assert\";\nimport { make_element_zoomable } from \"../../tab-utils/make_element_zoomable\";\n\nexport default BigText;\nexport { on_big_text_load };\nexport { refresh_big_text_size };\nexport { set_bottom_line };\nexport { set_max_width_getter };\nexport { set_text_position };\n\nfunction BigText({ content_on_top, top_line_content, id }) {\n  return (\n    <div id=\"bt-zoom-container\" style={{ width: \"100%\" }}>\n      <div id=\"bt-layout-container\" className=\"bt-position-center\">\n        <div id=\"bt-layout-top\">\n          <div id=\"bt-layout-top-content\">{content_on_top}</div>\n        </div>\n\n        <div id={id} className=\"bt-layout-middle\">\n          <table id=\"bt-middle-table\" click-name=\"big-zoomable-text\">\n            <tr>\n              <td id=\"bt-top-line\">{top_line_content}</td>\n            </tr>\n            <tr>\n              <td id=\"bt-bot-line\"></td>\n            </tr>\n          </table>\n        </div>\n\n        <div id=\"bt-layout-bottom\"></div>\n      </div>\n    </div>\n  );\n}\n\nfunction set_text_position(position) {\n  assert(\n    [\n      \"top-left\",\n      \"top\",\n      \"top-right\",\n      \"center-left\",\n      \"center\",\n      \"center-right\",\n      \"bottom-left\",\n      \"bottom\",\n      \"bottom-right\",\n    ].includes(position),\n    { position }\n  );\n  const layout_container = document.querySelector(\"#bt-layout-container\");\n  [\"top\", \"center\", \"bottom\", \"right\", \"left\"].forEach((slot) => {\n    layout_container.classList[position.includes(slot) ? \"add\" : \"remove\"](\n      \"bt-position-\" + slot\n    );\n  });\n}\n\nfunction on_big_text_load() {\n  activate_auto_resize();\n  activate_zoom();\n}\n\nfunction set_bottom_line(bottom_text) {\n  const bot_el = document.getElementById(\"bt-bot-line\");\n  assert(bot_el);\n  bot_el.innerHTML = bottom_text;\n}\n\nlet get_max_width;\nfunction set_max_width_getter(_get_max_width) {\n  get_max_width = _get_max_width;\n}\n\nfunction activate_auto_resize() {\n  window.addEventListener(\"resize\", refresh_big_text_size, { passive: true });\n}\n\nfunction activate_zoom() {\n  const containerEl = document.querySelector(\"#bt-zoom-container\");\n  const scaleEl = document.querySelector(\"#bt-layout-container\");\n  const zoomEl = document.querySelector(\"#bt-middle-table\");\n  assert(containerEl && scaleEl && zoomEl);\n  make_element_zoomable({ containerEl, scaleEl, zoomEl });\n}\n\n/*/\nconst DEBUG = true;\n/*/\nconst DEBUG = false;\n//*/\n\nfunction refresh_big_text_size() {\n  const bot_el = document.getElementById(\"bt-bot-line\");\n  const top_el = document.getElementById(\"bt-top-line\");\n  assert(bot_el && top_el, \"Missing bottom/top line\", { bot_el, top_el });\n\n  const { max_height, max_width } = compute_max_size();\n  DEBUG &&\n    console.log(\"[size-computation]\", bot_el, top_el, {\n      \"window.innerHeight\": window.innerHeight,\n      \"window.innerWidth\": window.innerWidth,\n      max_width,\n      max_height,\n    });\n\n  const { bot_line_sizes, top_line_sizes } = compute_font_sizes({\n    max_height,\n    max_width,\n    top_el,\n    bot_el,\n  });\n  DEBUG && assert.log(\"[size-computation]\", { top_line_sizes, bot_line_sizes });\n\n  assert(\n    isPositiveNumber(top_line_sizes.fontSize) &&\n      (!bot_line_sizes || isPositiveNumber(bot_line_sizes.fontSize)),\n    { top_line_sizes, bot_line_sizes }\n  );\n\n  if (bot_line_sizes) {\n    bot_el.style.fontSize = bot_line_sizes.fontSize + \"px\";\n  }\n  top_el.style.fontSize = top_line_sizes.fontSize + \"px\";\n}\n\nfunction compute_max_size() {\n  let max_width = window.innerWidth;\n  let max_height = window.innerHeight;\n  assert(\n    isPositiveNumber(max_width) && isPositiveNumber(max_height),\n    \"unexpected window sizes\",\n    {\n      max_width,\n      max_height,\n    }\n  );\n\n  // Substract width of side bar\n  {\n    const containerEl = document.querySelector(\"#bt-zoom-container\");\n    const container_width = get_size(containerEl, \"width\");\n    assert(isPositiveNumber(container_width), \"unexpected container width\", {\n      container_width,\n    });\n    max_width = Math.min(max_width, container_width);\n  }\n\n  {\n    // Remove padding\n    const middle_table = document.getElementById(\"bt-middle-table\");\n    const padding = {\n      width:\n        get_size(middle_table, \"padding-left\") +\n        get_size(middle_table, \"padding-right\"),\n      height:\n        get_size(middle_table, \"padding-top\") +\n        get_size(middle_table, \"padding-bottom\"),\n    };\n\n    max_width = max_width - padding.width;\n    max_height = max_height - padding.height;\n  }\n\n  // Make space space for top content (advertisements)\n  {\n    const layout_top_content = document.getElementById(\"bt-layout-top-content\");\n    let layout_top_content_height = 0;\n    // Some users have no `layout_top_content`, probably because of some Ad Blocker\n    if (layout_top_content) {\n      layout_top_content_height = get_size(layout_top_content, \"height\");\n    }\n    max_height -= layout_top_content_height;\n  }\n\n  {\n    // User can control max width\n    const width_limit = parseInt(get_max_width(), 10) || Infinity;\n    assert(isPositiveNumber(width_limit), { width_limit });\n    max_width = Math.min(max_width, width_limit);\n  }\n\n  {\n    // Avoid ugly long vertical big block\n    max_height = Math.min(max_height, max_width * 1.6);\n  }\n\n  {\n    // Negative values break computation down the line\n    max_height = Math.max(max_height, 0);\n    max_width = Math.max(max_width, 0);\n  }\n\n  assert(isPositiveNumber(max_width) && isPositiveNumber(max_height), {\n    max_height,\n    max_width,\n  });\n  return { max_width, max_height };\n}\n\nfunction compute_font_sizes({ bot_el, top_el, max_height, max_width }) {\n  let top_line_sizes;\n  let bot_line_sizes;\n\n  top_line_sizes = get_max_font_size({\n    dom_el: top_el,\n    max_width,\n    max_height,\n  });\n\n  if (bot_el.innerHTML != \"\") {\n    const bottom_line_width_reducer = 0.95;\n\n    bot_line_sizes = get_max_font_size({\n      dom_el: bot_el,\n      max_width: top_line_sizes.width * bottom_line_width_reducer,\n      max_height,\n    });\n\n    const too_big = top_line_sizes.height + bot_line_sizes.height > max_height;\n    if (too_big) {\n      const resolve_ratio = 1 / 3;\n\n      top_line_sizes = get_max_font_size({\n        dom_el: top_el,\n        max_width,\n        max_height: max_height * (1 - resolve_ratio),\n      });\n\n      bot_line_sizes = get_max_font_size({\n        dom_el: bot_el,\n        max_width: top_line_sizes.width * bottom_line_width_reducer,\n        max_height: max_height * resolve_ratio,\n      });\n\n      top_line_sizes = get_max_font_size({\n        dom_el: top_el,\n        max_width,\n        max_height: max_height - bot_line_sizes.height,\n      });\n    }\n  }\n\n  return { bot_line_sizes, top_line_sizes };\n}\n","module.exports = __webpack_public_path__ + \"monitor-banner-ct.hash_501d4136f6740761363b5539e6539435.png\";","\"use strict\";\n\nimport Cookies from \"js-cookie\";\nvar EZOIC_COOKIE_NAME = \"disable_ezoic_ads\";\nexport { disable_ezoic };\nexport { enable_ezoic };\n\nfunction disable_ezoic() {\n  var TEN_YEARS = 365 * 10;\n  Cookies.set(EZOIC_COOKIE_NAME, \"yes\", {\n    expires: TEN_YEARS\n  });\n}\n\nfunction enable_ezoic() {\n  Cookies.remove(EZOIC_COOKIE_NAME);\n}","import \"./ad_layout.css\";\nimport \"./ad_layout_left.css\";\nimport \"./ad_layout_btf.css\";\nimport React from \"react\";\nimport assert from \"@brillout/assert\";\nimport { store } from \"./store\";\nimport {\n  track_event,\n  get_number_of_visits_in_the_last_24_hours,\n} from \"./views/common/tracker\";\nimport { get_browser_name } from \"./utils/get_browser_info\";\nimport { enable_products_view } from \"./ads/Products/ProductsView\";\nimport { tab_app_google_adsense } from \"../tab_app_info\";\nimport { disable_ezoic, enable_ezoic } from \"./ads/ezoic.ts\";\nimport { getElementScrollPos, addScrollListener } from \"./pretty_scroll_area\";\n\nexport { load_ads };\nexport { Ad_ATF, Ad_BTF };\nexport { Ad_btf_2 };\nexport { Ad_left };\nexport { user_donated };\nexport { get_product_slots };\nexport const AD_REMOVAL_KEY = \"ad_removal\";\nexport { disable_ads };\n\nconst SHOW_DELAY = 1.3;\n\ninit();\n\nfunction init() {\n  if (is_nodejs()) {\n    return;\n  }\n\n  thanks_page_redirection();\n\n  const donated = user_donated();\n\n  if (donated) {\n    document.documentElement.classList.add(\"user-donated\");\n  }\n\n  if (donated) {\n    disable_ezoic();\n  } else {\n    enable_ezoic();\n  }\n}\n\nasync function load_ads(AD_SLOTS) {\n  if (!(await dont_show_adsense(AD_SLOTS))) {\n    await enable_adsense(AD_SLOTS);\n    assert(!(await dont_show_ads()));\n  }\n\n  if (await dont_show_ads()) {\n    document.documentElement.classList.add(\"ads-are-disabled\");\n  } else {\n    setTimeout(() => {\n      document.documentElement.classList.add(\"show-ads\");\n      enable_floating_ads();\n    }, SHOW_DELAY * 1000);\n  }\n}\n\nfunction disable_ads() {\n  store.set_val(AD_REMOVAL_KEY, true);\n  disable_ezoic();\n}\n\nfunction Ad_left({ ad_slots }) {\n  const slot_left_atf = get_left_slot(\"LEFT_AD_ATF\", ad_slots);\n  const slot_left_btf = get_left_slot(\"LEFT_AD_BTF\", ad_slots);\n  assert(slot_left_atf || slot_left_btf);\n\n  return (\n    <div id=\"ads-left\">\n      {slot_left_atf}\n      {slot_left_btf}\n    </div>\n  );\n}\n\nfunction get_left_slot(slot_name, ad_slots) {\n  let content;\n  let is_floating;\n  {\n    const adsense_id = get_adsense_slot_id(slot_name, ad_slots);\n    if (adsense_id) {\n      content = <AdSenseAd slot_id={adsense_id} />;\n    }\n  }\n\n  {\n    const ezoic_slot = get_ezoic_slot(slot_name, ad_slots);\n    if (ezoic_slot) {\n      const ezoic_id = ezoic_slot.slot_id;\n      content = <EzoicAd ezoic_id={ezoic_id} />;\n\n      is_floating = ezoic_slot.is_floating;\n      assert([true, undefined].includes(is_floating));\n    }\n  }\n\n  if (!content) {\n    return null;\n  }\n\n  return (\n    <div className=\"slot-left\">\n      <div\n        className={\n          \"vertical-slot-wrapper\" + (is_floating ? \" is_floating\" : \"\")\n        }\n      >\n        {content}\n      </div>\n    </div>\n  );\n}\n\nfunction Ad_btf_2({ ad_slots }) {\n  const slot_name = \"BTF_2\";\n  const className = \"slot_btf\";\n\n  let slot_content;\n  {\n    const adsense_id = get_adsense_slot_id(slot_name, ad_slots);\n    if (adsense_id) {\n      slot_content = (\n        <AdSenseAd\n          className={className}\n          slot_id={adsense_id}\n          auto_sizing={\"horizontal\"}\n        />\n      );\n      // Do no include the container when doing auto_sizing\n      return slot_content;\n    }\n  }\n\n  {\n    const ezoic_slot = get_ezoic_slot(slot_name, ad_slots);\n    if (ezoic_slot) {\n      assert(slot_content === undefined);\n      const ezoic_id = ezoic_slot.slot_id;\n      slot_content = <EzoicAd ezoic_id={ezoic_id} className={className} />;\n    }\n  }\n\n  if (!slot_content) {\n    return null;\n  }\n\n  return <div className=\"slot_btf_container\">{slot_content}</div>;\n}\n\nfunction Ad_ATF({ ad_slots }) {\n  return <AdView ad_slots={ad_slots} slot_name={\"ATF\"} />;\n}\nfunction Ad_BTF({ ad_slots }) {\n  return <AdView ad_slots={ad_slots} slot_name={\"BTF\"} />;\n}\n\nfunction AdView({ ad_slots, slot_name }) {\n  assert([\"ATF\", \"BTF\"].includes(slot_name));\n  const slot_id = get_adsense_slot_id(slot_name, ad_slots);\n  if (slot_id === null) return null;\n  return (\n    <div className=\"a-wrap\">\n      <div className=\"horizontal-slot-wrapper\">\n        <AdSenseAd slot_id={slot_id} />\n      </div>\n    </div>\n  );\n}\n\nfunction EzoicAd({ ezoic_id, className }) {\n  assert(ezoic_id);\n  assert(ezoic_id.startsWith(\"ezoic-pub-ad-placeholder-1\"));\n  className = \"ezoic-ad-slot \" + (className || \"\");\n  return (\n    <div className={className}>\n      <div id={ezoic_id} />\n      <div className=\"ezoic-dev-demo\" />\n    </div>\n  );\n}\n\nfunction AdSenseAd({ slot_id, className, auto_sizing }) {\n  assert(tab_app_google_adsense.startsWith(\"ca-pub-\"));\n  assert([undefined, \"horizontal\"].includes(auto_sizing));\n\n  className = \"adsbygoogle \" + (className || \"\");\n\n  const props = {};\n  if (auto_sizing) {\n    Object.assign(props, {\n      \"data-ad-format\": auto_sizing,\n      \"data-full-width-responsive\": true,\n    });\n  }\n\n  return (\n    <ins\n      className={className}\n      data-ad-client={tab_app_google_adsense}\n      data-ad-slot={slot_id}\n      {...props}\n    ></ins>\n  );\n}\n\nfunction get_ezoic_slot(slot_name, ad_slots) {\n  const ezoic_slots = get_ezoic_slots(ad_slots).filter((slot) => {\n    assert(slot_name);\n    assert(slot.slot_name);\n    return slot.slot_name === slot_name;\n  });\n  assert(ezoic_slots.length <= 1);\n  const slot = ezoic_slots[0];\n  if (!slot) return null;\n  const { slot_id } = slot;\n  assert(slot_id);\n  return slot;\n}\n\nfunction get_adsense_slot_id(slot_name, ad_slots) {\n  const adsense_slots = get_adsense_slots(ad_slots).filter((slot) => {\n    assert(slot_name);\n    assert(slot.slot_name);\n    return slot.slot_name === slot_name;\n  });\n  assert(adsense_slots.length <= 1);\n  const slot = adsense_slots[0];\n  if (!slot) return null;\n  const { slot_id } = slot;\n  assert(slot_id);\n  return slot_id;\n}\n\nfunction get_ezoic_slots(AD_SLOTS) {\n  return filter_slots(AD_SLOTS, (slot) => slot.is_ezoic);\n}\nfunction get_adsense_slots(AD_SLOTS) {\n  return filter_slots(AD_SLOTS, (slot) => slot.is_adsense);\n}\nfunction get_product_slots(AD_SLOTS) {\n  const product_slots = filter_slots(AD_SLOTS, (slot) => slot.is_product);\n  return product_slots;\n}\nfunction get_custom_slot(AD_SLOTS) {\n  const slots__match = filter_slots(AD_SLOTS, (slot) => slot.is_custom);\n  if (slots__match.length === 0) {\n    return null;\n  }\n  assert(slots__match.length === 1);\n  const custom_slot = slots__match[0];\n  assert(custom_slot.is_custom === true);\n  return custom_slot;\n}\nfunction filter_slots(AD_SLOTS, fn) {\n  return AD_SLOTS.filter((slot) => {\n    assert([true, undefined].includes(slot.is_adsense));\n    assert([true, undefined].includes(slot.is_custom));\n    assert([true, undefined].includes(slot.is_product));\n    assert([true, undefined].includes(slot.is_ezoic));\n    assert(\n      (slot.is_adsense ? 1 : 0) +\n        (slot.is_custom ? 1 : 0) +\n        (slot.is_product ? 1 : 0) +\n        (slot.is_ezoic ? 1 : 0) ===\n        1\n    );\n    const res = fn(slot);\n    assert([true, undefined].includes(res));\n    return !!res;\n  });\n}\n\nfunction load_custom_banner(AD_SLOTS) {\n  const custom_slot = get_custom_slot(AD_SLOTS);\n\n  if (custom_slot === null) {\n    return;\n  }\n\n  const left_slot = document.querySelector(\".slot-left\");\n  assert(left_slot, \"couldn't find left_slot\");\n\n  left_slot.classList.add(\"custom-banner\");\n\n  const vertical_slot_wrapper = left_slot.querySelector(\n    \".vertical-slot-wrapper\"\n  );\n  assert(vertical_slot_wrapper, \"couldn't find vertical_slot_wrapper\");\n\n  const { img_src, click_name, slot_name, is_custom } = custom_slot;\n  assert(img_src);\n  assert(click_name === \"monitor_banner\");\n  assert(slot_name === \"LEFT_AD_ATF\");\n  assert(is_custom === true);\n\n  vertical_slot_wrapper.innerHTML = `\n    <img\n      click-name=\"${click_name}\"\n      src=\"${img_src}\"\n      id=\"custom-banner\"\n    />\n  `;\n\n  enable_products_view(custom_slot);\n\n  //show_ads();\n\n  track_event({ name: \"[custom-ad] activated\" });\n}\n\nasync function enable_adsense(AD_SLOTS) {\n  const adsense_slots = get_adsense_slots(AD_SLOTS);\n  assert(adsense_slots.length > 0);\n\n  const success = await load_adsense_code();\n  assert(success === true, { success });\n\n  window.adsbygoogle = window.adsbygoogle || [];\n  adsense_slots.forEach(() => {\n    window.adsbygoogle.push({});\n  });\n\n  track_event({ name: \"[adsense] activated\" });\n}\n\nvar adsense_code_load_promise;\nfunction load_adsense_code() {\n  if (adsense_code_load_promise !== undefined) return adsense_code_load_promise;\n  let resolve;\n  let already_resolved = false;\n  adsense_code_load_promise = new Promise((_resolve) => {\n    resolve = (success) => {\n      assert([true, false].includes(success));\n      if (already_resolved) return;\n      already_resolved = true;\n      _resolve(success);\n    };\n  });\n  assert(resolve);\n\n  load_script(\n    \"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\",\n    () => {\n      track_event({ name: \"[adsense] adsbygoogle.js loaded\" + add_addendum() });\n      resolve(true);\n    },\n    () => {\n      track_event({\n        name: \"[adsense] adsbygoogle.js blocked\" + add_addendum(),\n      });\n      resolve(false);\n    }\n  );\n  setTimeout(() => {\n    if (already_resolved) return;\n    track_event({ name: \"[adsense] adsbygoogle.js timeout\" });\n    resolve(false);\n  }, 5 * 1000);\n\n  return adsense_code_load_promise;\n\n  function add_addendum() {\n    const addendum = already_resolved ? \" [after-timeout]\" : \"\";\n    return addendum;\n  }\n}\n\n// Since Clock/Timer Tab's source code is open anyone can read this and bypass doing a donation to remove ads.\n// If you are short on money then you are more than welcome to do this :-).\nvar _user_donated;\nfunction user_donated() {\n  assert(!is_nodejs());\n\n  if (_user_donated !== undefined) {\n    assert([true, false].includes(_user_donated));\n    return _user_donated;\n  }\n\n  _user_donated = check_donation();\n  assert([true, false].includes(_user_donated));\n\n  return _user_donated;\n\n  function check_donation() {\n    return store.has_val(AD_REMOVAL_KEY);\n  }\n}\n\nfunction thanks_page_redirection() {\n  if (window.location.hash === \"#thanks-for-your-donation\") {\n    window.location.href = window.location.origin + \"/thanks\";\n  }\n}\n\nasync function dont_show_ads() {\n  return (\n    user_donated() ||\n    is_small_screen() ||\n    ad_blocker_detected() ||\n    (await ad_blocked())\n  );\n}\n\nasync function dont_show_adsense(AD_SLOTS) {\n  const disable_reason =\n    (user_donated() && \"user_has_donated\") ||\n    (ad_blocker_detected() && \"ad_blocker_detected\") ||\n    (is_small_screen() && \"screen_too_small\") ||\n    (is_fringe_browser() && \"fringe_browser\") ||\n    (is_too_many_visits() && \"too_many_visits\") ||\n    ((await ad_blocked()) && \"ad_blocked\") ||\n    (no_adsense_slots(AD_SLOTS) && \"no_adsense_slots\");\n\n  if (disable_reason) {\n    {\n      let value;\n      if (disable_reason === \"fringe_browser\") {\n        value = get_browser_name();\n      }\n      if (disable_reason === \"screen_too_small\") {\n        value = JSON.stringify(get_screen_size());\n      }\n      track_event({ name: \"[adsense] disabled: \" + disable_reason, value });\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nfunction no_adsense_slots(AD_SLOTS) {\n  const adsense_slots = get_adsense_slots(AD_SLOTS);\n  return adsense_slots.length === 0;\n}\n\nfunction is_too_many_visits() {\n  if (get_number_of_visits_in_the_last_24_hours() >= 8) {\n    return true;\n  }\n  return false;\n}\n\nfunction is_small_screen() {\n  const { width } = get_screen_size();\n  // Same as CSS media query\n  return width <= 700;\n}\n\nfunction get_screen_size() {\n  const { width, height } = window.screen;\n  assert(\n    Number.isInteger(width) &&\n      width > 0 &&\n      Number.isInteger(height) &&\n      height > 0,\n    { width, height }\n  );\n  return { width, height };\n}\n\nfunction is_fringe_browser() {\n  const browser_name = get_browser_name();\n  return ![\n    \"chrome\",\n    \"chromium\",\n    \"safari\",\n    \"firefox\",\n    \"internet explorer\",\n    \"opera\",\n    \"edge\",\n    \"microsoft edge\",\n  ].includes(browser_name.toLowerCase());\n}\n\nvar _ad_blocker_is_installed;\nfunction ad_blocker_detected() {\n  assert(!is_nodejs());\n\n  if (_ad_blocker_is_installed !== undefined) {\n    return _ad_blocker_is_installed;\n  }\n\n  const ad_blocker_test = document.createElement(\"div\");\n\n  // hide\n  ad_blocker_test.style.position = \"absolute\";\n  ad_blocker_test.style.visibility = \"hidden\";\n  ad_blocker_test.style.pointerEvents = \"none\";\n\n  ad_blocker_test.innerHTML = \"some_text\";\n\n  // Ad blockers hide elements with that class\n  ad_blocker_test.className = \"adsbygoogle\";\n\n  document.body.appendChild(ad_blocker_test);\n  _ad_blocker_is_installed = ad_blocker_test.offsetHeight === 0;\n  document.body.removeChild(ad_blocker_test);\n\n  return _ad_blocker_is_installed;\n}\n\nasync function ad_blocked() {\n  const success = await load_adsense_code();\n  assert([true, false].includes(success));\n  return !success;\n}\n\nfunction load_script(url, onload, onerror) {\n  const scriptEl = document.createElement(\"script\");\n  scriptEl.src = url;\n  scriptEl.async = true;\n  scriptEl.onload = onload;\n  scriptEl.onerror = onerror;\n  document.getElementsByTagName(\"head\")[0].appendChild(scriptEl);\n}\n\nfunction is_nodejs() {\n  return typeof window === \"undefined\";\n}\n\nfunction enable_floating_ads() {\n  Array.from(document.querySelectorAll(\".is_floating\")).forEach((el) => {\n    let positionOriginal = el.style.position;\n    let topOriginal = el.style.top;\n    let leftOriginal = el.style.left;\n    let oldPosition = positionOriginal;\n    let positionTopOriginal;\n    let isFixedLayout = false;\n\n    addScrollListener(\n      (scrollPos) => {\n        assert(scrollPos >= 0);\n        const { positionLeft, positionTop } = getElementScrollPos(el);\n\n        if (isFixedLayout) {\n          assert(positionTopOriginal >= 0);\n          isFixedLayout = scrollPos > positionTopOriginal;\n        } else {\n          isFixedLayout = scrollPos > positionTop;\n          positionTopOriginal = positionTop;\n        }\n\n        const newPosition = isFixedLayout ? \"fixed\" : positionOriginal;\n\n        if (newPosition !== oldPosition) {\n          if (newPosition === \"fixed\") {\n            el.style.position = newPosition;\n            el.style.top = \"0px\";\n            el.style.left = positionLeft + \"px\";\n          } else {\n            el.style.position = positionOriginal;\n            el.style.top = topOriginal;\n            el.style.left = leftOriginal;\n          }\n          oldPosition = newPosition;\n        }\n      },\n      { fireInitialScroll: true, onlyUserScroll: false }\n    );\n  });\n}\n","/*!\n * JavaScript Cookie v2.2.1\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction decode (s) {\n\t\treturn s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api() {}\n\n\t\tfunction set (key, value, attributes) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tattributes = extend({\n\t\t\t\tpath: '/'\n\t\t\t}, api.defaults, attributes);\n\n\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\tattributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);\n\t\t\t}\n\n\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\ttry {\n\t\t\t\tvar result = JSON.stringify(value);\n\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\tvalue = result;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\n\t\t\tvalue = converter.write ?\n\t\t\t\tconverter.write(value, key) :\n\t\t\t\tencodeURIComponent(String(value))\n\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\n\t\t\tkey = encodeURIComponent(String(key))\n\t\t\t\t.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)\n\t\t\t\t.replace(/[\\(\\)]/g, escape);\n\n\t\t\tvar stringifiedAttributes = '';\n\t\t\tfor (var attributeName in attributes) {\n\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Considers RFC 6265 section 5.2:\n\t\t\t\t// ...\n\t\t\t\t// 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n\t\t\t\t//     character:\n\t\t\t\t// Consume the characters of the unparsed-attributes up to,\n\t\t\t\t// not including, the first %x3B (\";\") character.\n\t\t\t\t// ...\n\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n\t\t\t}\n\n\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t}\n\n\t\tfunction get (key, json) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar jar = {};\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all.\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = decode(parts[0]);\n\t\t\t\t\tcookie = (converter.read || converter)(cookie, name) ||\n\t\t\t\t\t\tdecode(cookie);\n\n\t\t\t\t\tif (json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tjar[name] = cookie;\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn key ? jar[key] : jar;\n\t\t}\n\n\t\tapi.set = set;\n\t\tapi.get = function (key) {\n\t\t\treturn get(key, false /* read as raw */);\n\t\t};\n\t\tapi.getJSON = function (key) {\n\t\t\treturn get(key, true /* read as json */);\n\t\t};\n\t\tapi.remove = function (key, attributes) {\n\t\t\tset(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.defaults = {};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","const browserConfig = require('/home/romu/code/clocktab/node_modules/@brillout/browser-config/index.js');\n\nbrowserConfig.initFunctions = {};\n\nbrowserConfig.initFunctions = browserConfig.initFunctions || {};\nbrowserConfig.initFunctions['hydratePage'] = (() => {const ret = require('/home/romu/code/clocktab/node_modules/@goldpage/browser/hydratePage.js'); return (ret||{}).__esModule===true ? ret.default : ret;})();;\n\nbrowserConfig.pageConfig = (() => {const ret = require('/home/romu/code/clocktab/views/ClockPage/clock.page.js'); return (ret||{}).__esModule===true ? ret.default : ret;})();;\n\nbrowserConfig['router'] = (() => {const ret = require('/home/romu/code/clocktab/node_modules/@goldpage/path-to-regexp/router.js'); return (ret||{}).__esModule===true ? ret.default : ret;})();;\n\nbrowserConfig['renderPageToDom'] = (() => {const ret = require('/home/romu/code/clocktab/node_modules/@goldpage/html/renderPageToDom.js'); return (ret||{}).__esModule===true ? ret.default : ret;})();;\n\nbrowserConfig['domRender'] = (() => {const ret = require('/home/romu/code/clocktab/tab-utils/_render/browser/domRender.js'); return (ret||{}).__esModule===true ? ret.default : ret;})();;\n\n(() => {const ret = require('/home/romu/code/clocktab/node_modules/@goldpage/browser/browserInit.js'); return (ret||{}).__esModule===true ? ret.default : ret;})();;\n","\"use strict\";\n\nimport monitor_banner_img from \"./monitor-banner-ct.png\";\nimport React from \"react\";\nexport { ad_slots };\nvar ad_slots = [\n/*\n{\n  // ct_atf_responsive\n  slot_id: \"8079958663\",\n  slot_name: \"ATF\",\n  is_adsense: true,\n},\n{\n  // ct_btf_responsive\n  slot_id: \"9556691865\",\n  slot_name: \"BTF\",\n  is_adsense: true,\n},\n*/\n{\n  // ct_left_atf\n  slot_id: \"7889725703\",\n  slot_name: \"LEFT_AD_ATF\",\n  is_adsense: true\n}, {\n  // ct_left_btf\n  slot_id: \"1075920200\",\n  slot_name: \"LEFT_AD_BTF\",\n  is_adsense: true\n}, {\n  // ct_btf_2\n  slot_id: \"2785355600\",\n  slot_name: \"BTF_2\",\n  is_adsense: true\n}, {\n  img_src: monitor_banner_img,\n  click_name: \"monitor_banner\",\n  slot_name: \"LEFT_AD_ATF\",\n  is_custom: true\n}, {\n  product_name: \"product-clock-fan\",\n  product_text: React.createElement(\"span\", null, \"USB Clock Fan \\u2014 for hot summer days :-).\", React.createElement(\"br\", null), React.createElement(\"br\", null)),\n  amazon_banner: \"\\n      <a target=\\\"_blank\\\" href=\\\"https://www.amazon.com/gp/product/B010M9KRHO/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=B010M9KRHO&linkCode=as2&tag=brilloutamazo-20&linkId=433159f0067b4ff9142cc0acaad6ed63\\\"><img border=\\\"0\\\" src=\\\"//ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=US&ASIN=B010M9KRHO&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL250_&tag=brilloutamazo-20\\\" ></a><img src=\\\"//ir-na.amazon-adsystem.com/e/ir?t=brilloutamazo-20&l=am2&o=1&a=B010M9KRHO\\\" width=\\\"1\\\" height=\\\"1\\\" border=\\\"0\\\" alt=\\\"\\\" style=\\\"border:none !important; margin:0px !important;\\\" />\\n    \",\n  product_link: \"https://www.amazon.com/gp/product/B010M9KRHO/ref=as_li_ss_tl?ie=UTF8&linkCode=ll1&tag=brilloutamazo-20&linkId=37d16e9c32f7c039fca2b3730639d27e\",\n  is_product: true\n}, {\n  product_name: \"product-tablet-monitor\",\n  product_text: \"Tablet monitor, perfect to put Clock Tab on! No-name brand but the monitor is well designed.\",\n  amazon_banner: \"\\n      <a href=\\\"https://www.amazon.com/UPERFECT-Portable-1920%C3%971080-Raspberry-Cellphone/dp/B07K8JLR4C/ref=as_li_ss_il?dchild=1&keywords=tablet+monitor+12&qid=1589308273&refinements=p_72:2661618011&rnid=2661617011&sr=8-1&linkCode=li3&tag=brilloutamazo-20&linkId=e8497f14d55d8da11c3cef37e1a85a9a\\\" target=\\\"_blank\\\"><img border=\\\"0\\\" src=\\\"//ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B07K8JLR4C&Format=_SL250_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=brilloutamazo-20\\\" ></a><img src=\\\"https://ir-na.amazon-adsystem.com/e/ir?t=brilloutamazo-20&l=li3&o=1&a=B07K8JLR4C\\\" width=\\\"1\\\" height=\\\"1\\\" border=\\\"0\\\" alt=\\\"\\\" style=\\\"border:none !important; margin:0px !important;\\\" />\\n    \",\n  product_link: \"https://www.amazon.com/UPERFECT-Portable-1920%C3%971080-Raspberry-Cellphone/dp/B07K8JLR4C/ref=as_li_ss_tl?dchild=1&keywords=tablet+monitor+12&qid=1589308273&refinements=p_72:2661618011&rnid=2661617011&sr=8-1&linkCode=ll1&tag=brilloutamazo-20&linkId=375eebbf83f4c1c3758e3975f8c58d05\",\n  is_product: true\n}, {\n  product_name: \"product-vockgeng-clock\",\n  product_text: \"Desk Clock by Vockgeng. Available with many different backgrounds.\",\n  amazon_banner: \"\\n    <a href=\\\"https://www.amazon.com/Vockgeng-Sunflower-Charging-Function-6-2x3-8x0-9/dp/B0875WBM2N/ref=as_li_ss_il?dchild=1&keywords=Vockgeng+clock&qid=1589231158&sr=8-23&th=1&linkCode=li3&tag=brilloutamazo-20&linkId=3923a336d01beeae2194af92741a399d\\\" target=\\\"_blank\\\"><img border=\\\"0\\\" src=\\\"//ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B0875WBM2N&Format=_SL250_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=brilloutamazo-20\\\" ></a><img src=\\\"https://ir-na.amazon-adsystem.com/e/ir?t=brilloutamazo-20&l=li3&o=1&a=B0875WBM2N\\\" width=\\\"1\\\" height=\\\"1\\\" border=\\\"0\\\" alt=\\\"\\\" style=\\\"border:none !important; margin:0px !important;\\\" />\\n    \",\n  product_link: \"https://www.amazon.com/Vockgeng-Sunflower-Charging-Function-6-2x3-8x0-9/dp/B0875WBM2N/ref=as_li_ss_tl?dchild=1&keywords=Vockgeng+clock&qid=1589231158&sr=8-23&th=1&linkCode=ll1&tag=brilloutamazo-20&linkId=871192f4426176e2048523b3f9c06038\",\n  is_product: true\n}];","import React from \"react\";\nimport {\n  FullViewLayout,\n  FullView,\n  MorePanel,\n  LeftSide,\n  RightSide,\n} from \"../../tab-utils/views/FullViewWrapper\";\nimport BigText from \"../BigText\";\nimport News from \"../News\";\nimport { SettingsView } from \"../../tab-utils/TabSettings/SettingsView\";\nimport { preset_concept_name } from \"./js/preset_concept_name\";\nimport { ad_slots } from \"./ad_slots\";\nimport { Ad_btf_2, Ad_ATF, Ad_left } from \"../../tab-utils/load_ad\";\nimport { ProductsView } from \"../../tab-utils/ads/Products/ProductsView\";\n\nexport default ClockView;\n\nfunction ClockView() {\n  return (\n    <FullViewLayout>\n      <LeftSide>\n        <Ad_left ad_slots={ad_slots} />\n      </LeftSide>\n\n      <RightSide>\n        <FullView>\n          <BigText\n            id={\"clock-container\"}\n            content_on_top={<Ad_ATF ad_slots={ad_slots} />}\n            top_line_content={<TopLine />}\n          />\n        </FullView>\n\n        <MorePanel>\n          <Ad_btf_2 ad_slots={ad_slots} />\n          <SettingsView preset_concept_name={preset_concept_name} />\n          <ProductsView ad_slots={ad_slots} />\n          <News preset_concept_name={preset_concept_name} />\n        </MorePanel>\n      </RightSide>\n    </FullViewLayout>\n  );\n}\n\nfunction TopLine() {\n  return (\n    <table style={{ margin: \"auto\" }}>\n      <tr>\n        <td id=\"time_text\"></td>\n        <td>\n          <table>\n            <tr>\n              <td id=\"char1\"></td>\n            </tr>\n            <tr>\n              <td id=\"digit1\"></td>\n            </tr>\n          </table>\n        </td>\n        <td>\n          <table>\n            <tr>\n              <td id=\"char2\"></td>\n            </tr>\n            <tr>\n              <td id=\"digit2\"></td>\n            </tr>\n          </table>\n        </td>\n      </tr>\n    </table>\n  );\n}\n","const preset_concept_name = \"Theme\";\nexport { preset_concept_name };\n","\"use strict\";\n\nexport { change_icon };\nvar favicon_dom_el;\n\nfunction change_icon(url) {\n  if (!favicon_dom_el) {\n    var REL = \"icon\";\n    var REL2 = \"shortcut icon\";\n    var oldlinks = document.getElementsByTagName(\"link\");\n\n    for (var i = 0; i < oldlinks.length; i++) {\n      if ([REL, REL2].includes(oldlinks[i].getAttribute(\"rel\").toLowerCase())) document.head.removeChild(oldlinks[i]);\n    }\n\n    favicon_dom_el = document.createElement(\"link\");\n    favicon_dom_el.rel = REL;\n    favicon_dom_el.type = \"image/png\"; //needed for webkit dynamic favicon\n\n    document.head.appendChild(favicon_dom_el);\n  }\n\n  favicon_dom_el.href = url;\n}","\"use strict\";\n\nimport assert from \"@brillout/assert\";\nexport { get_hours };\nexport { get_minutes };\nexport { get_seconds };\nexport { get_day };\nexport { get_month };\nexport { get_date };\nexport { get_week };\nexport { time_icon };\nvar WEEKDAY_NAMES = new Array(\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\");\nvar MONTH_NAMES = new Array(\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\");\n\nfunction get_week(that //{{{\n) {\n  /**\n   * Returns the week number for that date.  dowOffset is the day of week the week\n   * \"starts\" on for your locale - it can be from 0 to 6. If dowOffset is 1 (Monday),\n   * the week returned is the ISO 8601 week number.\n   * @param int dowOffset\n   * @return int\n   */\n  //Date.prototype.getWeek = function (dowOffset) {\n\n  /*getWeek() was developed by Nick Baicoianu at MeanFreePath: http://www.meanfreepath.com */\n  // var dowOffset = typeof(dowOffset) == 'int' ? dowOffset : 0; //default dowOffset to zero\n  var dowOffset = 0;\n  var newYear = new Date(that.getFullYear(), 0, 1);\n  var day = newYear.getDay() - dowOffset; //the day of week the year begins on\n\n  day = day >= 0 ? day : day + 7;\n  var daynum = Math.floor((that.getTime() - newYear.getTime() - (that.getTimezoneOffset() - newYear.getTimezoneOffset()) * 60000) / 86400000) + 1;\n  var weeknum; //if the year starts before the middle of a week\n\n  if (day < 4) {\n    weeknum = Math.floor((daynum + day - 1) / 7) + 1;\n\n    if (weeknum > 52) {\n      var nYear = new Date(that.getFullYear() + 1, 0, 1);\n      var nday = nYear.getDay() - dowOffset;\n      nday = nday >= 0 ? nday : nday + 7;\n      /*if the next year starts before the middle of\n          the week, it is week #1 of that year*/\n\n      weeknum = nday < 4 ? 1 : 53;\n    }\n  } else {\n    weeknum = Math.floor((daynum + day - 1) / 7);\n  }\n\n  return weeknum; //};\n} //}}}\n\n\nfunction getDayBegining(date) {\n  var d = new Date(+date);\n  var ret = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\n  ret += (d.getTimezoneOffset() - new Date(ret).getTimezoneOffset()) * 60 * 1000;\n  return ret;\n}\n\nfunction get_hours(that, twelveClock //{{{\n) {\n  var ret = that.getHours();\n\n  if (twelveClock) {\n    ret %= 12;\n    if (ret == 0) ret = 12;\n  }\n\n  if (!twelveClock) {\n    ret = appendZero(ret);\n  }\n\n  return ret;\n}\n\nfunction get_minutes(that) {\n  return appendZero(that.getMinutes());\n}\n\nfunction get_seconds(that) {\n  return appendZero(that.getSeconds());\n}\n\nfunction get_date(that) {\n  return appendZero(that.getDate());\n}\n\nfunction get_day(that) {\n  return WEEKDAY_NAMES[that.getDay()];\n}\n\nfunction get_month(that) {\n  return MONTH_NAMES[that.getMonth()];\n}\n\nfunction getTime(s, format, digitShift, shiftTodo) {\n  assert(s !== undefined && s.constructor === Number);\n  assert(digitShift === undefined || digitShift.constructor === Number);\n  assert(shiftTodo === undefined || shiftTodo.constructor === Number);\n  assert(format === \"timer\" || format === \"time12\" || format === \"time12_pretty\" || format === \"countdown\" || format === \"data\");\n\n  if (format === \"time12\" || format === \"time12_pretty\" || format === \"data\") {\n    assert(digitShift === undefined && shiftTodo === undefined);\n    digitShift = 0;\n    shiftTodo = 2;\n  } else {\n    if (digitShift === undefined) digitShift = 1;\n    if (shiftTodo === undefined) shiftTodo = 0;\n  }\n\n  var verbose = format === \"timer\";\n  var cutHead = format === \"timer\" || format === \"countdown\";\n  var cutTail = verbose;\n  var makeAMPM = format === \"time12\" || format === \"time12_pretty\"; //epoch digit length won't change until year 2200\n  //13 digit number interpretend as milliseconds correspond to > 30 years\n\n  if (s.toString().length > 12) {\n    assert(format === \"time12\" || format === \"time12_pretty\" || format === \"data\"); //onsole.log(new Date(s));\n    //onsole.log(new Date(new Date(s).getFullYear(),new Date(s).getMonth(),new Date(s).getDate()));\n\n    s = s - getDayBegining(s); //onsole.log(s);\n  }\n\n  if (makeAMPM) {\n    var mid_day = 12 * 60 * 60 * 1000;\n    var isPm = s >= mid_day;\n    if (isPm) s -= mid_day;\n  }\n\n  var DEFAULT_PARTITION = 100; //needed to add trailing zeros\n\n  var DIGITS_PARTITION = [1000, 60, 60];\n  var DIGITS_ABBREVATION = [\"ms\", \"s\", \"m\", \"h\"]; //=====do shift\n\n  /* failed attempt to determine digitShift (with current input information, it's not possible)\n    var MAX_EPOCH_LENGTH = 13;\n    var digitShift = 0;\n    while((DIGITS_PARTITION.slice(0,digitShift).reverse().concat([1]).reverse().reduce(function(a,b){return a*b})*s).toString().length<MAX_EPOCH_LENGTH && digitShift<=DIGITS_PARTITION.length) digitShift++;\n    assert(digitShift<=DIGITS_PARTITION.length);\n    */\n\n  digitShift += shiftTodo;\n  assert(digitShift <= DIGITS_PARTITION.length);\n\n  while (shiftTodo--) {\n    s /= DIGITS_PARTITION[digitShift - (shiftTodo + 1)];\n  }\n\n  s = parseInt(s, 10);\n  DIGITS_PARTITION.splice(0, digitShift);\n  DIGITS_ABBREVATION.splice(0, digitShift); //====compute digits\n\n  var d = [];\n\n  for (var i = 0; i < DIGITS_PARTITION.length + 1; i++) {\n    var digitValue = s;\n\n    for (var j = i - 1; j >= 0; j--) {\n      digitValue /= DIGITS_PARTITION[j];\n    }\n\n    d.push(digitValue % (DIGITS_PARTITION[i] || Infinity) | 0);\n  }\n\n  if (cutHead) while (d[d.length - 1] === 0 && d.length > 1) {\n    d.pop();\n  }\n  if (makeAMPM) if (d[d.length - 1] === 0) d[d.length - 1] = 12;\n\n  if (cutTail) {\n    var trailCut = d.length;\n\n    while (d[0] === 0 && d.length > 1) {\n      d.shift();\n    }\n\n    trailCut -= d.length;\n  }\n\n  if (!verbose) for (var i = 0; i < d.length; i++) {\n    d[i] = \"00\".substring(0, ((DIGITS_PARTITION[i] || DEFAULT_PARTITION) - 1).toString().length - d[i].toString().length) + d[i];\n  }\n\n  if (verbose) {\n    DIGITS_ABBREVATION.splice(0, trailCut);\n\n    for (var i = 0; i < d.length; i++) {\n      d[i] += DIGITS_ABBREVATION[i];\n    }\n  } //onsole.log(d.slice().reverse().join(verbose?' ':':'));\n  //onsole.log('');\n\n\n  d.reverse();\n  if (format === \"data\") return d;\n  var d__str = d.join(verbose ? \" \" : \":\");\n\n  if (makeAMPM) {\n    if (format === \"time12_pretty\") {\n      d__str = d__str.replace(/:00$/, \"\").replace(/^0/, \"\");\n    }\n\n    d__str = d__str + \" \" + (isPm ? \"PM\" : \"AM\"); //assert(digitShift===2); if(d[0]==='0') return d.substring(1);\n\n    return d;\n  }\n\n  return d;\n}\n\nfunction time_icon(scale, color, twelveClock) {\n  if (!scale) scale = 1;\n  if (!color) color = \"black\";\n  var d = new Date();\n  var canvas = document.createElement(\"canvas\");\n  canvas.height = 32 / scale;\n  canvas.width = 32 / scale;\n  var ctx = canvas.getContext(\"2d\");\n  ctx.fillStyle = color;\n  ctx.font = Math.floor(15 / scale) + \"pt arial\";\n  ctx.fillText(get_hours(d, twelveClock), 0, 14 / scale);\n  ctx.font = 16 / scale + \"pt arial\";\n  ctx.fillText(get_minutes(d), 5 / scale, 32 / scale);\n  return canvas.toDataURL();\n}\n\nfunction appendZero(str) {\n  if (str < 10) return \"0\" + str;else return \"\" + str;\n}","\"use strict\";\n\nimport { refresh_big_text_size, set_bottom_line } from \"../../BigText\";\nimport { track_dom_heart_beat_error } from \"../../../tab-utils/views/common/tracker\";\nimport { change_icon } from \"../../utils/change_icon\";\nimport { get_hours, get_minutes, get_seconds, get_day, get_month, get_date, get_week, time_icon } from \"../../utils/date_utils\";\nexport default load_clock;\nexport { dom_beat };\n\nfunction dom_beat() {\n  if (!domBeat) return;\n  return domBeat.apply(void 0, arguments);\n}\n\nvar domBeat;\n\nfunction load_clock(_ref) {\n  var get_option_value = _ref.get_option_value;\n  var time_text_el = document.getElementById(\"time_text\");\n  var digit1 = document.getElementById(\"digit1\");\n  var digit2 = document.getElementById(\"digit2\");\n  /* TIME */\n\n  domBeat;\n  var spark;\n\n  (function () {\n    var lastMinutes, lastTitle, lastDay, lastTime;\n\n    domBeat = function domBeat() {\n      var force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var d = new Date();\n      var is_twelve_hour_format = get_option_value(\"clock_twelve_hour_format\");\n      var title = get_hours(d, is_twelve_hour_format) + \":\" + get_minutes(d) + (get_option_value(\"clock_tab_display_seconds\") ? \":\" + get_seconds(d) : \"\");\n\n      if (lastTitle === undefined || lastTitle !== title || force) {\n        lastTitle = title;\n        document.title = title;\n      }\n\n      var minutes = get_minutes(new Date());\n\n      if (!lastMinutes || lastMinutes !== minutes || force) {\n        lastMinutes = minutes;\n        change_icon(time_icon(undefined, get_option_value(\"clock_tab_icon_color\"), is_twelve_hour_format));\n      }\n\n      {\n        var refreshSize = false;\n        document.body[\"classList\"][d.getHours() < 12 ? \"remove\" : \"add\"](\"isPm\");\n        var seconds = get_seconds(d);\n        digit1.innerHTML = seconds[0];\n        digit2.innerHTML = seconds[1]; //screenshot\n        //digit1.innerHTML=0;\n        //digit2.innerHTML=0;\n\n        var newTime = get_hours(d, is_twelve_hour_format) + \":\" + get_minutes(d); //var newTime = \"&nbsp; 01:37 PM &nbsp;\";\n\n        if (lastTime === undefined || lastTime !== newTime || force) {\n          lastTime = newTime;\n          time_text_el.innerHTML = newTime; //screenshot\n          //time_text_el.innerHTML = '01:37';\n\n          refreshSize = true;\n        }\n\n        var day = d.getDay();\n\n        if (!lastDay || lastDay !== day || force) {\n          lastDay = day;\n          var date_text = get_option_value(\"clock_display_date\") ? get_day(d) + \" - \" + get_month(d) + \" \" + get_date(d) + (get_option_value(\"clock_display_week\") ? \" - Week \" + get_week(d) : \"\") : \"\";\n          set_bottom_line(date_text);\n          refreshSize = true;\n        }\n\n        if (refreshSize) refresh_big_text_size();\n      }\n    };\n\n    spark = function spark() {\n      (function repeater() {\n        track_dom_heart_beat_error(function () {\n          domBeat();\n        });\n        window.setTimeout(repeater, 1000);\n      })();\n    };\n  })();\n\n  spark();\n}","// Theme components\n// - nice bg colors\n//   - #7b3535\n// - nice fonts\n//   - Zilla Slab Highlight\n//   - Cardo\n//   - Kalam\n//   - Abril Fatface\n//   - Press Start 2P\n// - nice images\n//   - Space girl reading: https://imgur.com/a/cY3VTIT\n//   - Black Dunes: https://imgur.com/a/UlbAIgx\n//   - Austria village at lake - sommer: https://imgur.com/a/9UJBiTz\n//   - Austria village at lake - winter: https://imgur.com/a/jinZwUa\n//   - Carbon DNA - https://imgur.com/a/GobHgPC\n//   - Digital DNA - https://imgur.com/a/KJcVzQW\n//   - Eugene von Guerard\n//     - https://imgur.com/a/DvtkGC3\n//     - https://imgur.com/a/BS9TPOm\n//     - https://artsandculture.google.com/entity/eugene-von-guerard/m08j850?categoryId=artist\n//   - Nice paintaing a la Eugene von Guerard\n//     - https://artsandculture.google.com/asset/5QGf_h6Dl58qhQ\n\nexport default {\n  steel: {\n    clock_position: \"center\",\n    clock_background_color: \"\",\n    //original URL: http://good-wallpapers.com/pictures/6357/Gray%20Comb%20Texture.jpg\n    clock_background_image: \"https://i.imgur.com/9YKVj.jpg\",\n    clock_shadow: \"0 1px 1px #000000\",\n    clock_font: \"Syncopate\",\n    clock_size: \"480\",\n    clock_color: \"#e9e9e9\",\n  },\n  steel_gold: {\n    clock_position: \"center\",\n    clock_background_color: \"\",\n    //original URL: http://good-wallpapers.com/pictures/6357/Gray%20Comb%20Texture.jpg\n    clock_background_image: \"https://i.imgur.com/9YKVj.jpg\",\n    clock_shadow: \"0 1px 1px #000000\",\n    clock_font: \"Knewave\",\n    clock_size: \"480\",\n    clock_color: \"#a3860a\",\n  },\n  gold: {\n    clock_position: \"center\",\n    clock_background_color: \"#7b3535\",\n    clock_background_image: \"\",\n    clock_shadow: \"\",\n    clock_font: \"Petit Formal Script\",\n    clock_size: \"480\",\n    clock_color: \"#a79c00\",\n  },\n  simple: {\n    clock_position: \"center\",\n    clock_background_color: \"#ffffff\",\n    clock_background_image: \"\",\n    clock_shadow: \"\",\n    clock_font: \"Syncopate\",\n    clock_size: \"480\",\n    clock_color: \"#333333\",\n  },\n  grey: {\n    clock_position: \"center\",\n    clock_background_color: \"#3D3F42\",\n    clock_background_image: \"\",\n    clock_shadow: \"0 1px 1px #000000\",\n    clock_font: \"Lora\",\n    clock_size: \"480\",\n    clock_color: \"#EBEBF1\",\n  },\n  ocean: {\n    clock_position: \"center\",\n    //orginal URL: http://www.hotelclubposeidon.it/grafica/background.jpg\n    clock_background_color: \"\",\n    clock_background_image: \"https://i.imgur.com/mOHYs.jpg\",\n    //'clock_shadow':'1px 1px 2px #ffffff',\n    //'clock_shadow':'0px 1px 1px #333333',\n    clock_shadow: \"none\",\n    clock_font: \"Michroma\",\n    clock_size: \"480\",\n    clock_color: \"#333333\",\n  },\n  ocean2: {\n    clock_position: \"center\",\n    clock_background_color: \"\",\n    clock_background_image: \"https://i.imgur.com/i6yiy.jpg\",\n    clock_shadow: \"0 1px 1px #000000\",\n    clock_font: \"Droid Sans Mono\",\n    clock_size: \"480\",\n    clock_color: \"#ffffff\",\n  },\n  river_valley: {\n    clock_position: \"center\",\n    clock_background_color: \"\",\n    clock_background_image: \"https://i.imgur.com/8G6JM.jpg\",\n    clock_shadow: \"0 1px 1px #000000\",\n    clock_font: \"Lato\",\n    clock_size: \"480\",\n    clock_color: \"#ffffff\",\n  },\n  lobster: {\n    clock_position: \"center\",\n    clock_background_color: \"#330000\",\n    clock_background_image: \"\",\n    clock_shadow: \"0 1px 1px #000000\",\n    clock_font: \"Lobster\",\n    clock_size: \"480\",\n    clock_color: \"#333333\",\n  },\n  modern: {\n    clock_position: \"center\",\n    clock_background_color: \"#ffffff\",\n    clock_background_image: \"\",\n    clock_shadow: \"none\",\n    clock_font: \"AirbnbCereal\",\n    clock_size: \"480\",\n    clock_color: \"#000000\",\n  },\n  lcd: {\n    clock_position: \"center\",\n    clock_background_color: \"black\",\n    clock_background_image: \"\",\n    clock_shadow: \"none\",\n    clock_font: \"LCD\",\n    clock_size: \"480\",\n    clock_color: \"#ff0000\",\n  },\n  lcd_green: {\n    clock_position: \"center\",\n    clock_background_color: \"black\",\n    clock_background_image: \"\",\n    clock_shadow: \"none\",\n    clock_font: \"LCD\",\n    clock_size: \"480\",\n    clock_color: \"#00ff00\",\n  },\n  digital: {\n    clock_position: \"center\",\n    clock_background_color: \"black\",\n    clock_background_image: \"\",\n    clock_shadow: \"none\",\n    clock_font: \"Orbitron\",\n    clock_size: \"480\",\n    clock_color: \"#00ff00\",\n  },\n  paper: {\n    clock_position: \"center\",\n    clock_background_color: \"\",\n    clock_background_image: \"https://i.imgur.com/x97za.jpg\",\n    clock_shadow: \"0 1px 1px #000000\",\n    clock_font: \"Redressed\",\n    clock_size: \"480\",\n    clock_color: \"#111111\",\n  },\n  classy: {\n    clock_position: \"center\",\n    clock_background_color: \"\",\n    clock_background_image: \"https://i.imgur.com/0KS5T.jpg\",\n    clock_shadow: \"none\",\n    clock_font: \"Nothing You Could Do\",\n    clock_size: \"480\",\n    clock_color: \"#0000aa\",\n  },\n  sin_city: {\n    clock_position: \"bottom\",\n    clock_background_color: \"\",\n    clock_background_image: \"https://i.imgur.com/R60yCtG.jpg\",\n    clock_font: \"Knewave\",\n    clock_size: \"480\",\n    clock_color: \"#e71010\",\n  },\n  van_gogh: {\n    clock_position: \"center\",\n    clock_background_color: \"\",\n    clock_background_image: \"https://i.imgur.com/WfHm7XM.jpg\",\n    clock_font: \"Akronim\",\n    clock_size: \"480\",\n    clock_color: \"#b63232\",\n  },\n  mars_terraform: {\n    clock_position: \"bottom\",\n    clock_background_color: \"\",\n    clock_background_image: \"https://i.imgur.com/KLks3QG.jpg\",\n    clock_shadow: \"0 1px 1px #000000\",\n    clock_font: \"Aldrich\",\n    clock_size: \"480\",\n    clock_color: \"#6d0000\",\n  },\n  neo: {\n    clock_position: \"center\",\n    clock_background_color: \"black\",\n    clock_background_image: \"\",\n    clock_shadow: \"\",\n    clock_font: \"Allerta Stencil\",\n    clock_size: \"480\",\n    clock_color: \"#6d0000\",\n  },\n  red: {\n    clock_position: \"center\",\n    clock_background_color: \"#aa0000\",\n    clock_background_image: \"\",\n    clock_shadow: \"0 1px 1px #000000\",\n    clock_font: \"Muli\",\n    clock_size: \"480\",\n    clock_color: \"#1a1a1a\",\n  },\n  purple: {\n    clock_position: \"center\",\n    clock_background_color: \"#0e0e0e\",\n    clock_background_image: \"\",\n    clock_shadow: \"\",\n    clock_font: \"Text Me One\",\n    clock_size: \"480\",\n    clock_color: \"#6d30be\",\n  },\n  naruto: {\n    clock_position: \"center\",\n    clock_background_color: \"\",\n    clock_background_image: \"https://i.imgur.com/iyyms5e.jpg\",\n    clock_shadow: \"\",\n    clock_font: \"Knewave\",\n    clock_size: \"480\",\n    clock_color: \"#ffdf00\",\n  },\n  eugene_von_guerard_1: {\n    clock_position: \"top\",\n    clock_background_image: \"https://i.imgur.com/xU4VWgAh.jpg\",\n    clock_shadow: \"0 1px 1px #000000\",\n    clock_font: \"Abril Fatface\",\n    clock_size: \"330\",\n    clock_color: \"#3f7657\",\n  },\n  the_king: {\n    clock_position: \"bottom-left\",\n    clock_background_image: \"https://i.imgur.com/PIJRG4k.jpg\",\n    clock_shadow: \"\",\n    clock_font: \"MedievalSharp\",\n    clock_size: \"480\",\n    clock_color: \"#9e9e9e\",\n  },\n  gate_of_mages: {\n    clock_position: \"bottom-left\",\n    clock_background_image: \"https://i.imgur.com/nuANVcZ.jpg\",\n    clock_shadow: \"0 2px 2px #000000\",\n    clock_font: \"ABeeZee\",\n    clock_size: \"330\",\n    clock_color: \"#cecece\",\n  },\n};\n","import { dom_beat } from \"./load_clock\";\nimport { refresh_big_text_size } from \"../../BigText\";\nimport PRESETS from \"./PRESETS\";\nimport { TabSettings } from \"../../../tab-utils/TabSettings\";\nimport { set_text_position } from \"../../BigText\";\nimport { preset_concept_name } from \"./preset_concept_name\";\nimport { is_dark_mode } from \"../../../tab-utils/utils/system-preferences\";\n\nexport default init_clock_options;\n\nfunction init_clock_options() {\n  const text_container = document.getElementById(\"clock-container\");\n\n  const tab_settings = new TabSettings({\n    option_spec_list: get_option_list(),\n    preset_spec_list: PRESETS,\n    text_container,\n    on_any_change,\n    on_font_change,\n    enable_import_export: true,\n    subapp_id: \"clock\",\n    preset_concept_name,\n  });\n\n  const get_option_value = tab_settings.get_option_value.bind(tab_settings);\n  const { font_loaded_promise } = tab_settings;\n\n  tab_settings.generate_dom();\n\n  return { get_option_value, font_loaded_promise };\n\n  function on_font_change() {\n    refresh_big_text_size();\n  }\n  function on_any_change({ is_initial_run }) {\n    update_options();\n    if (!is_initial_run) {\n      dom_beat(true);\n      refresh_big_text_size();\n    }\n  }\n\n  function update_options() {\n    text_container.style.color = get_option_value(\"clock_color\");\n    text_container.style.textShadow = get_option_value(\"clock_shadow\");\n    {\n      const show_seconds = get_option_value(\"clock_display_seconds\");\n      document.body[\"classList\"][show_seconds ? \"remove\" : \"add\"](\"noSeconds\");\n    }\n\n    {\n      const show_pm = get_option_value(\"clock_display_period\");\n      const twelve_hour = get_option_value(\"clock_twelve_hour_format\");\n      document.body[\"classList\"][show_pm && twelve_hour ? \"remove\" : \"add\"](\n        \"noPeriod\"\n      );\n    }\n    set_text_position(get_option_value(\"clock_position\"));\n  }\n}\n\nfunction get_option_list() {\n  return [\n    {\n      option_id: \"clock_theme\",\n      option_type: \"preset-input\",\n      // option_description: preset_concept_name,\n      option_default: \"steel\",\n    },\n    {\n      option_id: \"clock_background_image\",\n      option_type: \"background-image-input\",\n      option_description: \"Background image\",\n      option_default: \"\",\n      option_placeholder: \"image url\",\n      is_creator_option: true,\n    },\n    {\n      option_id: \"clock_background_color\",\n      option_type: \"background-color-input\",\n      option_description: \"Background color\",\n      option_default: \"#ffffff\",\n      is_creator_option: true,\n    },\n    {\n      option_id: \"clock_font\",\n      option_type: \"text-font-input\",\n      option_description: \"Clock font\",\n      option_default: \"Josefin Slab\",\n      is_creator_option: true,\n    },\n    {\n      option_id: \"clock_shadow\",\n      option_type: \"text-shadow-input\",\n      option_description: \"Font shadow\",\n      option_default: \"\",\n      option_placeholder: \"see css text-shadow\",\n      input_width: \"110px\",\n      is_creator_option: true,\n    },\n    {\n      option_id: \"clock_color\",\n      option_type: \"text-color-input\",\n      option_description: \"Clock color\",\n      option_default: \"#2c2c2c\",\n      is_creator_option: true,\n    },\n    {\n      option_id: \"clock_size\",\n      option_type: \"text-input\",\n      option_description: \"Clock size\",\n      option_default: \"580\",\n      input_width: \"40px\",\n      is_creator_option: true,\n    },\n    {\n      option_id: \"clock_position\",\n      option_type: \"choice-input\",\n      option_choices: [\n        \"top-left\",\n        \"top\",\n        \"top-right\",\n        \"center-left\",\n        \"center\",\n        \"center-right\",\n        \"bottom-left\",\n        \"bottom\",\n        \"bottom-right\",\n      ],\n      option_description: \"Clock position\",\n      option_default: \"center\",\n      is_creator_option: true,\n    },\n    {\n      option_id: \"clock_twelve_hour_format\",\n      option_type: \"boolean-input\",\n      option_description: \"12-hour\",\n      option_default: get_default_12_hour(),\n    },\n    {\n      option_id: \"clock_display_period\",\n      option_type: \"boolean-input\",\n      option_description: \"am/pm\",\n      option_default: true,\n      option_dependency: \"clock_twelve_hour_format\",\n    },\n    {\n      option_id: \"clock_display_seconds\",\n      option_type: \"boolean-input\",\n      option_description: \"Seconds\",\n      option_default: true,\n    },\n    {\n      option_id: \"clock_display_date\",\n      option_type: \"boolean-input\",\n      option_description: \"Date\",\n      option_default: true,\n    },\n    {\n      option_id: \"clock_display_week\",\n      option_type: \"boolean-input\",\n      option_description: \"Week\",\n      option_default: false,\n      option_dependency: \"clock_display_date\",\n    },\n    {\n      option_id: \"clock_tab_display_seconds\",\n      option_type: \"boolean-input\",\n      option_description: \"Tab title seconds\",\n      option_default: false,\n    },\n    {\n      option_id: \"clock_tab_icon_color\",\n      option_type: \"color-input\",\n      option_description: \"Tab icon color\",\n      option_default: get_default_tab_icon_color(),\n    },\n  ];\n}\n\nfunction get_default_tab_icon_color() {\n  return is_dark_mode() ? \"#ffffff\" : \"#373a4a\";\n}\n\nfunction get_default_12_hour() {\n  return (\n    /(AM)|(PM)/.test(new Date().toLocaleTimeString()) ||\n    window.navigator.language === \"en-US\"\n  );\n}\n","\"use strict\";\n\nexport { is_dark_mode };\n\nfunction is_dark_mode() {\n  // Source: https://stackoverflow.com/questions/56393880/how-do-i-detect-dark-mode-using-javascript\n  var match = window.matchMedia && window.matchMedia(\"(prefers-color-scheme: dark)\");\n\n  if (match && match.matches) {\n    return true;\n  }\n\n  return false;\n}","import load_clock from \"./js/load_clock\";\nimport init_clock_options from \"./js/init_clock_options\";\nimport auto_remove_hash from \"../../tab-utils/auto_remove_hash\";\nimport { on_big_text_load, set_max_width_getter } from \"../BigText\";\nimport { sleep } from \"../../tab-utils/sleep\";\nimport { ad_slots } from \"./ad_slots\";\nimport { load_ads } from \"../../tab-utils/load_ad\";\n\nexport default onPageLoad;\n\nasync function onPageLoad(load_common) {\n  const { get_option_value, font_loaded_promise } = init_clock_options();\n\n  set_max_width_getter(() => get_option_value(\"clock_size\"));\n\n  load_clock({ get_option_value });\n\n  on_big_text_load();\n\n  auto_remove_hash();\n\n  await Promise.race([font_loaded_promise, sleep({ seconds: 0.4 })]);\n\n  load_common();\n\n  load_ads(ad_slots);\n\n  // To avoid memory leak\n  //autoReloadPage();\n}\n","import \"./css/clock.css\";\nimport ClockView from \"./ClockView\";\nimport onPageLoad from \"./onPageLoad\";\nimport { config } from \"../../tab-utils/views/FullViewWrapper\";\n\nexport default config({\n  route: \"/\",\n  view: ClockView,\n\n  title: \"Clock Tab\",\n\n  head: [\n    '<meta name=\"keywords\" content=\"time, clock, tab\">',\n    \"<meta name='description' content='Displays the current Time. Featuring \\\"Time Icon\\\" and customizable Themes. Made by the Creator of Timer Tab.'>\",\n  ],\n  onPageLoad,\n});\n","export default remove_hash;\n\nfunction remove_hash() {\n  // `window.location.hash = '';` doesn't remove leading `#` sign.\n  // See https://stackoverflow.com/questions/1397329/how-to-remove-the-hash-from-window-location-url-with-javascript-without-page-r\n  window.history.pushState(\n    \"\",\n    document.title,\n    window.location.pathname + window.location.search\n  );\n}\n","import remove_hash from \"./private/remove_hash\";\n\nexport default auto_remove_hash;\n\nexport { remove_hash };\n\nfunction auto_remove_hash({ IGNORE_LIST, INCLUDE_LIST } = {}) {\n  check();\n  [100, 300, 600, 900].forEach((timeout) => setTimeout(check, timeout));\n  window.addEventListener(\"hashchange\", check, {\n    passive: true,\n    capture: false,\n  });\n\n  function check() {\n    const { hash } = window.location;\n\n    if (isEmptyHash()) {\n      remove_hash();\n      return;\n    }\n\n    if (!IGNORE_LIST && !INCLUDE_LIST) {\n      return;\n    }\n    if (IGNORE_LIST && IGNORE_LIST.includes(hash)) {\n      return;\n    }\n    if (INCLUDE_LIST && !INCLUDE_LIST.includes(hash)) {\n      return;\n    }\n\n    remove_hash();\n  }\n}\n\nfunction isEmptyHash() {\n  // In Chrome `location.hash===''` when URL is `localhost:3000/#`\n  if (window.location.hash === \"#\") {\n    return true;\n  }\n  // Because the above doesn't seem to be reliable\n  if (window.location.href.endsWith(\"#\")) {\n    return true;\n  }\n  return false;\n}\n","\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport \"./ProductsView.css\";\nimport React from \"react\";\nimport { scrollToElement } from \"../../../tab-utils/pretty_scroll_area\";\nimport { get_product_slots } from \"../../load_ad\";\nexport { enable_products_view };\nexport { ProductsView };\n\nfunction ProductsView(_ref) {\n  var ad_slots = _ref.ad_slots;\n  var product_slots = get_product_slots(ad_slots);\n  return React.createElement(\"div\", {\n    id: \"products-section\",\n    style: {\n      display: \"none\"\n    },\n    className: \"more_panel_block\"\n  }, React.createElement(\"div\", {\n    className: \"more_panel_block_title\"\n  }, \"Products\"), React.createElement(\"div\", {\n    id: \"product-list\"\n  }, product_slots.map(function (product_info) {\n    return React.createElement(ProductView, _extends({\n      key: product_info.product_name\n    }, product_info));\n  })));\n}\n\nfunction ProductView(_ref2) {\n  var product_link = _ref2.product_link,\n      product_text = _ref2.product_text,\n      product_name = _ref2.product_name,\n      amazon_banner = _ref2.amazon_banner;\n  return React.createElement(\"div\", {\n    \"click-name\": product_name,\n    style: {\n      width: 250\n    }\n  }, React.createElement(\"div\", null, React.createElement(\"ul\", {\n    style: {\n      paddingLeft: 20,\n      minHeight: 54\n    }\n  }, React.createElement(\"li\", null, product_text))), React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      height: 254,\n      width: 250,\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      backgroundColor: \"white\"\n    },\n    dangerouslySetInnerHTML: {\n      __html: amazon_banner\n    }\n  }), React.createElement(\"a\", {\n    className: \"product-link\",\n    href: product_link,\n    target: \"_blank\"\n  }));\n}\n\nfunction enable_products_view() {\n  var products_section = document.querySelector(\"#products-section\");\n  products_section.style.display = \"\";\n\n  document.querySelector(\"#custom-banner\").onclick = function () {\n    scrollToElement(products_section);\n  };\n}","import React from \"react\";\n\nexport default News;\n\nfunction News({ preset_concept_name }) {\n  return (\n    <div className=\"more_panel_block\">\n      <div className=\"more_panel_block_title\">News</div>\n      <Date>August, 19th</Date>\n      <ul>\n        <li>Improve centering algorithm.</li>\n      </ul>\n      <Date>July, 27th</Date>\n      <ul>\n        <li>Visual design improvements.</li>\n      </ul>\n      <Date>July, 25th</Date>\n      <ul>\n        <li>New Themes: LCD, LCD Green, Modern.</li>\n      </ul>\n      <Date>April, 29th</Date>\n      <ul>\n        <li>Lower GPU footprint.</li>\n      </ul>\n      <Date>April, 21th</Date>\n      <ul>\n        <li>Bigger clock size for smaller browser window sizes.</li>\n      </ul>\n      <Date>April, 11th</Date>\n      <ul>\n        <li>New clock layout algorithm for a more robust layout.</li>\n        <li>Lower CPU and RAM memory footprint.</li>\n      </ul>\n      <Date>March, 31th</Date>\n      <ul>\n        <li>Countdown &mdash; check out the brand new Countdown Tab.</li>\n        {/*\n      <li>{preset_concept_name} super-powered &mdash; you can now create, save, and share {preset_concept_name}s!</li>\n      */}\n        <li>\n          Themes super-powered &mdash; you can now create, save, and share\n          Themes.\n        </li>\n        <li>\n          World Clock &mdash; to create multiple Clocks and convert timezones.\n        </li>\n        <li>Msg Tab &mdash; Communication-over-Screen, useful in education.</li>\n      </ul>\n      If you encounter any issue with these new features then{\" \"}\n      <a href=\"/repair\">let me know</a>.\n    </div>\n  );\n}\n\nfunction Date({ children }) {\n  return <div style={{ marginTop: 11, marginBottom: -11 }}>{children}</div>;\n}\n","import React from \"react\";\n\nexport { SettingsView };\n\nfunction SettingsView({ preset_concept_name }) {\n  return (\n    <>\n      <div className=\"more_panel_block\">\n        <div className=\"more_panel_block_title\">{preset_concept_name}</div>\n        <div id=\"creator-content\" />\n      </div>\n      <div id=\"save-container\" className=\"more_panel_block\">\n        <div className=\"more_panel_block_title\">Save</div>\n        <div id=\"save-content\" />\n      </div>\n      <div id=\"options-container\" className=\"more_panel_block\">\n        <div className=\"more_panel_block_title\">Options</div>\n        <div id=\"options-content\" />\n      </div>\n      <div id=\"share-container\" className=\"more_panel_block\">\n        <div className=\"more_panel_block_title\">Share</div>\n        <div id=\"share-preamble\">\n          You can create and share {preset_concept_name}s; customize an existing{\" \"}\n          {preset_concept_name}, save it under a new name, then use its share\n          link.\n        </div>\n        <div id=\"share-content\">Share Link: </div>\n      </div>\n    </>\n  );\n}\n","import assert from \"@brillout/assert\";\n\nexport default load_font;\n\nasync function load_font(font_name) {\n  assert(font_name, { font_name });\n\n  const WebFont = require(\"webfontloader\");\n\n  let resolve;\n  const promise = new Promise((r) => (resolve = r));\n\n  attempts = 0;\n  do_it();\n\n  await promise;\n\n  return;\n\n  var attempts;\n  function do_it() {\n    assert(font_name, { font_name });\n    WebFont.load({\n      ...get_font_spec(font_name),\n      fontactive: resolve,\n      fontinactive: () => {\n        attempts++;\n        const min = Math.pow(2, attempts);\n        const max = 60;\n        const seconds = Math.max(min, max);\n        const timeout = seconds * 1000;\n        setTimeout(do_it, timeout);\n      },\n    });\n  }\n}\n\nfunction get_font_spec(font_name) {\n  const HOSTED = [\"AirbnbCereal\", \"LCD\"];\n  if (HOSTED.includes(font_name)) {\n    return {\n      custom: {\n        families: [font_name],\n        urls: [\"/fonts/\" + font_name + \"/\" + font_name + \".css\"],\n      },\n    };\n  } else {\n    return {\n      google: {\n        families: [font_name],\n      },\n    };\n  }\n}\n","export { load_asap };\n\nlet head;\n\nfunction load_asap(url, onsuccess) {\n  head = head || document.getElementsByTagName(\"head\")[0];\n\n  var attempts = 0;\n  function do_() {\n    //using same script el => onerror doesn't get called again in chrome\n    var script = document.createElement(\"script\");\n    script.src = url;\n    //script.type= 'text/javascript';\n    script.onerror = function () {\n      head.removeChild(script);\n      setTimeout(do_, Math.min(Math.pow(2, attempts) * 1000, 60000));\n    };\n    //proxy redirects url -> false onsuccess\n    //-no way found to catch this\n    if (onsuccess) script.onload = onsuccess;\n    attempts++;\n    head.appendChild(script);\n  }\n  do_();\n}\n","import { load_asap } from \"./load_asap\";\n\nexport default load_font_list;\n\nlet promise;\n\nfunction load_font_list() {\n  if (promise) {\n    return promise;\n  }\n\n  let resolve_promise;\n  promise = new Promise((r) => (resolve_promise = r));\n\n  window[\"onfontsload\"] = function (resp) {\n    if (resp.error) {\n      console.error(resp.error.message);\n      resolve_promise([]);\n      return;\n    }\n\n    let font_list = resp[\"items\"].map((f) => f.family).sort();\n\n    /*\n    if(ml.browser().usesGecko) {\n      // Firefox crashes when selecting a from too many options\n      const MAX = 300;\n      font_list = font_list.slice(0, MAX);\n    }\n    */\n\n    resolve_promise(font_list);\n  };\n\n  load_asap(\n    \"https://www.googleapis.com/webfonts/v1/webfonts?callback=onfontsload&sort=popularity&key=AIzaSyAOMrdvfJJPa1btlQNCkXT9gcA-lCADPeE\"\n  );\n\n  return promise;\n}\n","\"use strict\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport assert from \"@brillout/assert\";\nimport \"./set_background.css\";\nexport { set_background }; //tricky bg images to test:\n//-http://static.panoramio.com/photos/original/3719338.jpg\n//-cover test: http://cdn.techpp.com/wp-content/uploads/2008/10/gmail_logo.jpg\n//black floor: http://img.wallpaperstock.net:81/black-floor-wallpapers_6854_1680x1050.jpg\n//http://lh6.googleusercontent.com/-AAQe-KJXX-w/TcRrpukjk6I/AAAAAAAACwE/-7gmjOI-ctQ/IMG_2649mod.jpg\n//http://www.a-better-tomorrow.com/blog/wp-content/wallpaper_abt1.jpg\n//http://www.gowallpaper.net/wp-content/uploads/2011/04/Windows-7-3d-wide-wallpaper-1280x800.jpg\n//http://vistawallpapers.files.wordpress.com/2007/03/vista-wallpapers-69.jpg\n//to test: resize image to screen.width and screen.height using canvas and webworkers\n//window.screen.width;\n//window.screen.height;\n\nfunction set_background(_x, _x2, _x3) {\n  return _set_background.apply(this, arguments);\n}\n\nfunction _set_background() {\n  _set_background = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(color_code, image_uri, bg_container_selector) {\n    var is_outdated, bg_img_val;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            is_outdated = get_is_outdated();\n            init(bg_container_selector);\n            _context.next = 4;\n            return load_image(image_uri, is_outdated);\n\n          case 4:\n            bg_img_val = _context.sent;\n\n            if (!is_outdated()) {\n              _context.next = 7;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 7:\n            apply(color_code, bg_img_val, false);\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _set_background.apply(this, arguments);\n}\n\nfunction apply(color_code, bg_img_val, show_loader) {\n  apply_color(color_code);\n  apply_image(bg_img_val);\n  BG_EL.classList[show_loader ? \"add\" : \"remove\"](\"show-load-indicator\");\n}\n\nfunction load_image(_x4, _x5) {\n  return _load_image.apply(this, arguments);\n}\n\nfunction _load_image() {\n  _load_image = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(image_uri, is_outdated) {\n    var is_data_uri, bg_img_val, imgEl, resolve, promise, loaded, on_load, on_error, set_loader_indicator;\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            set_loader_indicator = function _ref3() {\n              window.setTimeout(function () {\n                if (is_outdated()) {\n                  return;\n                }\n\n                if (loaded) {\n                  return;\n                }\n\n                apply(null, null, true);\n              }, 50);\n            };\n\n            on_error = function _ref2() {\n              if (!is_outdated()) {\n                alert(\"Image \" + image_uri + \" could not be loaded. Is the image online? Do you have an internet connection? Does the URL point to an image? (Note that the URL should point to the image itself and not to a page containing the image.)\");\n              }\n            };\n\n            on_load = function _ref() {\n              var w = imgEl.width;\n              var h = imgEl.height;\n\n              if (w * h > 8000000) {\n                if (!is_outdated()) {\n                  alert(\"The provided image has a size of \" + w + \"*\" + h + \" pixels. Large images are likely to slow down your machine. Thus only images of up to 8 000 000 pixels are allowed. (For example, any image bellow 5000*1600 is fine.)\");\n                }\n\n                return null;\n              } else {\n                return 'url(\"' + image_uri + '\")';\n              }\n            };\n\n            if (image_uri) {\n              _context2.next = 5;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", null);\n\n          case 5:\n            is_data_uri = /^data:image/.test(image_uri);\n\n            if (!is_data_uri) {\n              _context2.next = 9;\n              break;\n            }\n\n            bg_img_val = image_uri + \"\";\n            return _context2.abrupt(\"return\", bg_img_val);\n\n          case 9:\n            imgEl = document.createElement(\"img\");\n            promise = new Promise(function (r) {\n              resolve = r;\n            });\n            loaded = false;\n\n            imgEl.onload = function () {\n              loaded = true;\n              var image_val = on_load();\n              resolve(image_val);\n            };\n\n            imgEl.onerror = function () {\n              loaded = true;\n              on_error();\n              resolve(null);\n            };\n\n            set_loader_indicator();\n            imgEl.src = image_uri;\n            return _context2.abrupt(\"return\", promise);\n\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _load_image.apply(this, arguments);\n}\n\nfunction apply_color(color_code) {\n  color_code = color_code || \"transparent\";\n\n  if (BG_EL.style.backgroundColor !== color_code) {\n    BG_EL.style.backgroundColor = color_code;\n  }\n}\n\nfunction apply_image(bg_img_val) {\n  bg_img_val = bg_img_val || \"none\";\n\n  if (BG_EL.style.backgroundImage !== bg_img_val) {\n    BG_EL.style.backgroundImage = bg_img_val;\n  }\n}\n\nvar BG_EL;\nvar bg_container_;\nvar bg_container_selector_;\n\nfunction init(bg_container_selector) {\n  assert(bg_container_selector, {\n    bg_container_selector: bg_container_selector\n  });\n  assert(bg_container_selector_ === undefined || bg_container_selector === bg_container_selector_, {\n    bg_container_selector: bg_container_selector,\n    bg_container_selector_: bg_container_selector_\n  });\n  bg_container_selector_ = bg_container_selector;\n  var bg_container = document.querySelector(bg_container_selector);\n  assert(bg_container, {\n    bg_container_selector: bg_container_selector\n  });\n  assert(bg_container_ === undefined || bg_container_ === bg_container, {\n    bg_container: bg_container,\n    bg_container_: bg_container_\n  });\n\n  if (BG_EL) {\n    return;\n  }\n\n  var el1 = document.createElement(\"div\");\n  el1.id = \"background-area-wrapper\";\n  var el2 = document.createElement(\"div\");\n  el2.id = \"background-area\";\n  el2.style.backgroundSize = \"cover\";\n  el1.prepend(el2);\n  bg_container.prepend(el1);\n  BG_EL = el2;\n}\n\nvar call_number = 0;\n\nfunction get_is_outdated() {\n  ++call_number;\n  var current = call_number;\n\n  var is_outdated = function is_outdated() {\n    return current !== call_number;\n  };\n\n  return is_outdated;\n}","\"use strict\";\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _classPrivateFieldLooseBase(receiver, privateKey) { if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) { throw new TypeError(\"attempted to use private field on non-instance\"); } return receiver; }\n\nvar id = 0;\n\nfunction _classPrivateFieldLooseKey(name) { return \"__private_\" + id++ + \"_\" + name; }\n\nimport assert from \"@brillout/assert\";\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.css\";\nimport { store } from \"../store\";\nimport { escape_html } from \"../utils/escape_html\";\nexport { TextInput, BooleanInput, SelectInput, ColorInput, DateInput, Button, PersistantInput };\n\nvar PersistantInput = /*#__PURE__*/function () {\n  function PersistantInput(props) {\n    _classCallCheck(this, PersistantInput);\n\n    this._props = void 0;\n    this._input_id = void 0;\n    Object.defineProperty(this, _on_input_change, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _input_default, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _storage_key, {\n      writable: true,\n      value: void 0\n    });\n    this.input_tag = void 0;\n    this.input_type = void 0;\n    this._dom_el = void 0;\n    this._input_el = void 0;\n    this._props = props;\n    var input_id = props.input_id,\n        on_input_change = props.on_input_change,\n        input_default = props.input_default;\n    assert(input_id && on_input_change);\n    this._input_id = input_id;\n    _classPrivateFieldLooseBase(this, _on_input_change)[_on_input_change] = on_input_change;\n    _classPrivateFieldLooseBase(this, _input_default)[_input_default] = input_default;\n    _classPrivateFieldLooseBase(this, _storage_key)[_storage_key] = input_id;\n  } // Public functions\n\n\n  _createClass(PersistantInput, [{\n    key: \"input_get\",\n    value: function input_get() {\n      return this._input_retriever();\n    }\n  }, {\n    key: \"has_stored_value\",\n    value: function has_stored_value() {\n      return store.has_val(_classPrivateFieldLooseBase(this, _storage_key)[_storage_key]);\n    }\n  }, {\n    key: \"get_stored_value\",\n    value: function get_stored_value() {\n      return store.get_val(_classPrivateFieldLooseBase(this, _storage_key)[_storage_key]);\n    }\n  }, {\n    key: \"set_stored_value\",\n    value: function set_stored_value(val) {\n      store.set_val(_classPrivateFieldLooseBase(this, _storage_key)[_storage_key], val);\n    }\n  }, {\n    key: \"input_set\",\n    value: function input_set(val) {\n      this.set_stored_value(val);\n\n      this._input_modifier(val);\n\n      _classPrivateFieldLooseBase(this, _on_input_change)[_on_input_change]();\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n\n      var input_tag = this.input_tag,\n          input_type = this.input_type;\n      assert(input_tag);\n      assert(input_type || input_tag !== \"input\");\n\n      var _generate_input = generate_input(_objectSpread({\n        input_tag: input_tag,\n        input_type: input_type\n      }, this._props)),\n          dom_el = _generate_input.dom_el,\n          input_el = _generate_input.input_el;\n\n      this._dom_el = dom_el;\n      this._input_el = input_el;\n\n      if (this._init_dom) {\n        this._init_dom();\n      }\n\n      var init_val = this.has_stored_value() ? this.get_stored_value() : _classPrivateFieldLooseBase(this, _input_default)[_input_default];\n\n      if (init_val !== undefined) {\n        this._input_modifier(init_val);\n      }\n\n      this._input_el.addEventListener(this._change_event, function () {\n        var val = _this._input_retriever();\n\n        _this.set_stored_value(val);\n\n        _classPrivateFieldLooseBase(_this, _on_input_change)[_on_input_change]();\n      }, false);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      hide_show_el(this._dom_el, true);\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      hide_show_el(this._dom_el);\n    } // To be overriden\n\n  }, {\n    key: \"_input_retriever\",\n    value: function _input_retriever() {\n      return this._input_el.value;\n    }\n  }, {\n    key: \"_input_modifier\",\n    value: function _input_modifier(val) {\n      this._input_el.value = val;\n    }\n  }, {\n    key: \"_change_event\",\n    get: function get() {\n      return \"change\";\n    }\n  }]);\n\n  return PersistantInput;\n}();\n\nvar _on_input_change = _classPrivateFieldLooseKey(\"on_input_change\");\n\nvar _input_default = _classPrivateFieldLooseKey(\"input_default\");\n\nvar _storage_key = _classPrivateFieldLooseKey(\"storage_key\");\n\nvar BooleanInput = /*#__PURE__*/function (_PersistantInput) {\n  _inherits(BooleanInput, _PersistantInput);\n\n  function BooleanInput(args) {\n    var _this2;\n\n    _classCallCheck(this, BooleanInput);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(BooleanInput).call(this, args));\n    _this2.input_tag = void 0;\n    _this2.input_type = void 0;\n    _this2.input_tag = \"input\";\n    _this2.input_type = \"checkbox\";\n    return _this2;\n  }\n\n  _createClass(BooleanInput, [{\n    key: \"_input_retriever\",\n    value: function _input_retriever() {\n      return !!this._input_el.checked;\n    }\n  }, {\n    key: \"_input_modifier\",\n    value: function _input_modifier(val) {\n      if (!!val) {\n        this._input_el.setAttribute(\"checked\", \"true\");\n      } else {\n        this._input_el.removeAttribute(\"checked\");\n      }\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      _get(_getPrototypeOf(BooleanInput.prototype), \"init\", this).call(this);\n\n      this._dom_el[\"classList\"][\"add\"](\"pointer-cursor\");\n    }\n  }]);\n\n  return BooleanInput;\n}(PersistantInput);\n\nvar TextInput = /*#__PURE__*/function (_PersistantInput2) {\n  _inherits(TextInput, _PersistantInput2);\n\n  function TextInput(args) {\n    var _this3;\n\n    _classCallCheck(this, TextInput);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(TextInput).call(this, args));\n    _this3.input_tag = void 0;\n    _this3.input_type = void 0;\n    _this3.input_tag = \"input\";\n    _this3.input_type = \"text\";\n    return _this3;\n  }\n\n  _createClass(TextInput, [{\n    key: \"init\",\n    value: function init() {\n      _get(_getPrototypeOf(TextInput.prototype), \"init\", this).call(this);\n\n      var input_placeholder = this._props.input_placeholder;\n\n      if (input_placeholder) {\n        this._input_el.placeholder = input_placeholder;\n      }\n    }\n  }, {\n    key: \"_change_event\",\n    get: function get() {\n      // `input` event seem to only be reliably fired for text inputs\n      //  - https://caniuse.com/#feat=input-event\n      return \"input\";\n    }\n  }]);\n\n  return TextInput;\n}(PersistantInput);\n\nvar SelectInput = /*#__PURE__*/function (_PersistantInput3) {\n  _inherits(SelectInput, _PersistantInput3);\n\n  _createClass(SelectInput, [{\n    key: \"refresh\",\n    value: function refresh() {\n      this._init_dom();\n    }\n  }], [{\n    key: \"get_divider\",\n    value: function get_divider(text) {\n      var divider_text;\n\n      if (text) {\n        divider_text = \" \" + text + \" \";\n      } else {\n        divider_text = \"\";\n      }\n\n      var divider_html = \"<option disabled>\" + divider_text + \"</option>\";\n      return {\n        divider_html: divider_html\n      };\n    }\n  }]);\n\n  function SelectInput(_ref) {\n    var _this4;\n\n    var input_options = _ref.input_options,\n        args = _objectWithoutProperties(_ref, [\"input_options\"]);\n\n    _classCallCheck(this, SelectInput);\n\n    _this4 = _possibleConstructorReturn(this, _getPrototypeOf(SelectInput).call(this, args));\n    _this4.input_tag = void 0;\n    _this4.input_options = void 0;\n    _this4.input_tag = \"select\";\n    _this4.input_options = input_options;\n    return _this4;\n  }\n\n  _createClass(SelectInput, [{\n    key: \"_init_dom\",\n    value: function _init_dom() {\n      var _this5 = this;\n\n      assert(this.input_options.length > 0, this._input_id);\n      var innerHTML = \"\";\n      this.input_options.forEach(function (option_arg) {\n        innerHTML += _this5._generate_option_html(option_arg);\n      });\n      this._input_el.innerHTML = innerHTML;\n    }\n  }, {\n    key: \"add_options\",\n    value: function add_options(new_options) {\n      var _this6 = this;\n\n      var current_value = this._input_retriever();\n\n      var current_option_values = Array.from(this._input_el.querySelector(\"option\")).map(function (el) {\n        return el.value;\n      });\n      var innerHTML = this._input_el.innerHTML;\n      new_options.forEach(function (option_arg) {\n        var _this6$_parse_option_ = _this6._parse_option_arg(option_arg),\n            val = _this6$_parse_option_.val;\n\n        if (val && current_option_values.includes(val)) {\n          return;\n        }\n\n        innerHTML += _this6._generate_option_html(option_arg);\n      });\n      this._input_el.innerHTML = innerHTML;\n\n      this._input_modifier(current_value);\n    }\n  }, {\n    key: \"_input_modifier\",\n    value: function _input_modifier(val) {\n      assert(val, \"empty select\", val === \"\", this._input_el.id, {\n        val: val\n      });\n\n      if (!this._input_el.querySelector('option[value=\"' + val + '\"]')) {\n        this._input_el.innerHTML = this._generate_option_html(val) + SelectInput.get_divider().divider_html + this._input_el.innerHTML;\n      }\n\n      _get(_getPrototypeOf(SelectInput.prototype), \"_input_modifier\", this).call(this, val);\n    }\n  }, {\n    key: \"_generate_option_html\",\n    value: function _generate_option_html(option_arg) {\n      var _this$_parse_option_a = this._parse_option_arg(option_arg),\n          val = _this$_parse_option_a.val,\n          val_pretty = _this$_parse_option_a.val_pretty,\n          divider_html = _this$_parse_option_a.divider_html;\n\n      if (divider_html) {\n        return divider_html;\n      }\n\n      return '<option label=\"' + val_pretty + '\" value=\"' + val + '\">' + escape_html(val_pretty) + \"</option>\";\n    }\n  }, {\n    key: \"_parse_option_arg\",\n    value: function _parse_option_arg(option_arg) {\n      assert(option_arg, this._input_id, {\n        option_arg: option_arg\n      });\n      var divider_html = option_arg.divider_html;\n\n      if (divider_html) {\n        return {\n          divider_html: divider_html\n        };\n      }\n\n      var val = option_arg.val || option_arg;\n      assert(val && val.constructor === String, option_arg);\n      var val_pretty = option_arg.val_pretty || val;\n      assert(val_pretty.constructor === String, val_pretty);\n      return {\n        val: val,\n        val_pretty: val_pretty\n      };\n    }\n  }]);\n\n  return SelectInput;\n}(PersistantInput);\n\nvar DateInput = /*#__PURE__*/function (_PersistantInput4) {\n  _inherits(DateInput, _PersistantInput4);\n\n  function DateInput() {\n    var _getPrototypeOf2;\n\n    var _this7;\n\n    _classCallCheck(this, DateInput);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this7 = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(DateInput)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this7.input_tag = \"input\";\n    _this7.input_type = \"datetime\";\n    return _this7;\n  }\n\n  _createClass(DateInput, [{\n    key: \"_init_dom\",\n\n    /*\n    constructor(args) {\n      super(args);\n      this.input_tag = 'input';\n      this.input_type = 'datetime';\n    }\n    */\n    value: function _init_dom() {\n      flatpickr(this._input_el, {\n        enableTime: true\n        /*\n        dateFormat: \"Y-m-d H:i\",\n        altInput: true,\n        altFormat: \"F j, Y\",\n        dateFormat: \"Y-m-d\",\n        */\n\n      });\n    }\n  }]);\n\n  return DateInput;\n}(PersistantInput);\n\nvar ColorInput = /*#__PURE__*/function (_PersistantInput5) {\n  _inherits(ColorInput, _PersistantInput5);\n\n  function ColorInput(args) {\n    var _this8;\n\n    _classCallCheck(this, ColorInput);\n\n    _this8 = _possibleConstructorReturn(this, _getPrototypeOf(ColorInput).call(this, args));\n    _this8.input_tag = void 0;\n    _this8.input_type = void 0;\n    _this8.input_tag = \"input\";\n    _this8.input_type = \"color\";\n    return _this8;\n  }\n\n  _createClass(ColorInput, [{\n    key: \"init\",\n    value: function init() {\n      _get(_getPrototypeOf(ColorInput.prototype), \"init\", this).call(this);\n\n      this._dom_el[\"classList\"][\"add\"](\"pointer-cursor\");\n    }\n  }]);\n\n  return ColorInput;\n}(PersistantInput);\n\nvar Button = /*#__PURE__*/function () {\n  function Button(_ref2) {\n    var on_click = _ref2.on_click,\n        text = _ref2.text,\n        input_container = _ref2.input_container,\n        _ref2$className = _ref2.className,\n        className = _ref2$className === void 0 ? null : _ref2$className,\n        id = _ref2.id;\n\n    _classCallCheck(this, Button);\n\n    this.on_click = void 0;\n    this.text = void 0;\n    this.input_container = void 0;\n    this.className = void 0;\n    this.id = void 0;\n    this.dom_el = void 0;\n    this.on_click = on_click;\n    this.text = text;\n    this.input_container = input_container;\n    this.className = className;\n    this.id = id;\n  }\n\n  _createClass(Button, [{\n    key: \"generate_dom\",\n    value: function generate_dom() {\n      var _this9 = this;\n\n      var dom_el = document.createElement(\"button\");\n\n      if (this.className) {\n        dom_el.setAttribute(\"class\", this.className);\n      }\n\n      dom_el.setAttribute(\"type\", \"button\");\n      dom_el.setAttribute(\"id\", this.id);\n\n      dom_el.onclick = function (ev) {\n        ev.preventDefault();\n\n        _this9.on_click();\n      };\n\n      dom_el.textContent = this.text;\n      this.input_container.appendChild(dom_el);\n      this.dom_el = dom_el;\n    } // to-do: as mixin\n\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      hide_show_el(this.dom_el, true);\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      hide_show_el(this.dom_el);\n    }\n  }]);\n\n  return Button;\n}();\n/*\nconst global_debouncer.debounce = new GlobalDebouncer();\n\nclass GlobalDebouncer {\n  constructor() {\n    this._lastTimeout;\n    requestAnimationFrame\n    cancelAnimationFrame\n  }\n\n  debounce(fn) {\n    return () => {\n\n      fn();\n    };\n  }\n}\n*/\n\n\nfunction generate_input(_ref3) {\n  var input_tag = _ref3.input_tag,\n      input_type = _ref3.input_type,\n      input_id = _ref3.input_id,\n      input_description = _ref3.input_description,\n      input_width = _ref3.input_width,\n      input_container = _ref3.input_container;\n  assert(input_tag);\n  assert(input_type || input_tag !== \"input\");\n  assert(input_id);\n  assert(input_container, {\n    input_id: input_id\n  });\n  var dom_el = document.createElement(\"label\");\n  assert([\"select\", \"input\"].includes(input_tag));\n  var input_el = document.createElement(input_tag);\n  input_el.id = input_id;\n  if (input_type) input_el.setAttribute(\"type\", input_type);\n  var description_el;\n\n  if (input_description) {\n    description_el = document.createElement(\"span\");\n    description_el.textContent = input_description; //+'&nbsp;';\n  }\n\n  if (input_type === \"checkbox\") {\n    dom_el.appendChild(input_el);\n\n    if (description_el) {\n      dom_el.appendChild(description_el);\n    }\n  } else {\n    if (description_el) {\n      dom_el.appendChild(description_el);\n    }\n\n    dom_el.appendChild(input_el);\n  }\n\n  if (input_width) {\n    input_el.style.width = input_width;\n  }\n\n  input_container.appendChild(dom_el);\n  return {\n    dom_el: dom_el,\n    input_el: input_el\n  };\n}\n\nfunction hide_show_el(el) {\n  var to_hide = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  if (to_hide) {\n    el.setAttribute(\"disabled\", \"true\");\n  } else {\n    el.removeAttribute(\"disabled\");\n  }\n\n  el.style.width = to_hide ? \"0px\" : \"\";\n  el.style.height = to_hide ? \"0px\" : \"\";\n  el.style.visibility = to_hide ? \"hidden\" : \"visible\";\n  el.style.position = to_hide ? \"absolute\" : \"\";\n  el.style.zIndex = to_hide ? \"-1\" : \"\";\n}","\"use strict\";\n\nexport { escape_html };\n\nfunction escape_html(str) {\n  return str.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#039;\");\n}","export { rename_keys_and_values };\n\nfunction rename_keys_and_values({ key_replacements, value_replacements }) {\n  const db = {};\n\n  let has_changes = false;\n\n  Object.entries(localStorage).forEach(([key, val]) => {\n    if (key_replacements && key in key_replacements) {\n      key = key_replacements[key];\n      has_changes = true;\n    }\n\n    if (\n      value_replacements &&\n      key in value_replacements &&\n      val in value_replacements[key]\n    ) {\n      val = value_replacements[key][val];\n      has_changes = true;\n    }\n\n    db[key] = val;\n  });\n\n  if (!has_changes) {\n    return;\n  }\n\n  if (has_changes) {\n    localStorage.clear();\n\n    Object.keys(db).forEach((key) => {\n      localStorage[key] = db[key];\n    });\n  }\n\n  return has_changes;\n}\n","import assert from \"@brillout/assert\";\nimport { rename_keys_and_values } from \"./rename_keys_and_values\";\n\nmigrate_ancient_schema.schema_version = new Date(\"2020-03-01\");\n\nexport { migrate_ancient_schema };\n\nfunction migrate_ancient_schema() {\n  rename_keys_and_values({\n    key_replacements: {\n      theme: \"clock_theme\",\n      bg_image: \"clock_background_image\",\n      bg_color: \"clock_background_color\",\n      font_shadow: \"clock_shadow\",\n      color_font: \"clock_color\",\n      font_size: \"clock_size\",\n      [\"12_hour\"]: \"clock_twelve_hour_format\",\n      show_pm: \"clock_display_period\",\n      show_seconds: \"clock_display_seconds\",\n      show_date: \"clock_display_date\",\n      show_week: \"clock_display_week\",\n      show_seconds_title: \"clock_tab_display_seconds\",\n      color_icon: \"clock_tab_icon_color\",\n    },\n    value_replacements: {\n      clock_theme: {\n        \"\": \"_creator\",\n        random: \"_random\",\n      },\n    },\n  });\n}\n","export { migrate_user_presets };\n\nfunction migrate_user_presets(migrator) {\n  [\"countdown_presets\", \"clock_presets\"].forEach((presets__storage_key) => {\n    const presets__string = localStorage[presets__storage_key];\n    if (!presets__string) {\n      return;\n    }\n    const presets = JSON.parse(presets__string);\n    let has_changes = false;\n    presets.forEach((preset) => {\n      if (migrator(preset)) {\n        has_changes = true;\n      }\n    });\n    if (has_changes) {\n      const presets__string__updated = JSON.stringify(presets);\n      localStorage[presets__storage_key] = presets__string__updated;\n    }\n  });\n}\n","import assert from \"@brillout/assert\";\nimport { migrate_user_presets } from \"./migrate_user_presets\";\n\nmigrate_user_preset_ids_and_values.schema_version = new Date(\"2020-03-02\");\n\nexport { migrate_user_preset_ids_and_values };\n\nfunction migrate_user_preset_ids_and_values() {\n  migrate_user_presets((preset) => {\n    assert(preset.preset_name || preset.preset_id);\n    if (preset.preset_name) {\n      preset.preset_id = preset.preset_name;\n      delete preset.preset_name;\n      return true;\n    }\n    assert(preset.preset_options || preset.preset_values);\n    if (preset.preset_options) {\n      preset.preset_values = preset.preset_options;\n      delete preset.preset_options;\n      return true;\n    }\n  });\n}\n","import assert from \"@brillout/assert\";\nimport { migrate_user_presets } from \"./migrate_user_presets\";\n\nmigrate_subapp_id.schema_version = new Date(\"2020-03-03\");\n\nexport { migrate_subapp_id };\n\nfunction migrate_subapp_id() {\n  migrate_user_presets((preset) => {\n    assert(preset.app_name || preset.subapp_id);\n    if (preset.app_name) {\n      preset.subapp_id = preset.app_name;\n      delete preset.app_name;\n      return true;\n    }\n  });\n}\n","import assert from \"@brillout/assert\";\nimport { rename_keys_and_values } from \"./rename_keys_and_values\";\n\nmigrate_old_timer_tab_schema.schema_version = new Date(\"2020-03-04\");\n\nexport { migrate_old_timer_tab_schema };\n\nfunction migrate_old_timer_tab_schema() {\n  const has_changes = rename_keys_and_values({\n    key_replacements: {\n      bg_url: \"timer_background_image\",\n      goto_url: \"timer_youtube_alarm\",\n    },\n  });\n  if (has_changes) {\n    localStorage[\"timer_theme\"] = \"_creator\";\n  }\n}\n","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { store } from \"../../store\";\nmigrate_to_centralized_store.schema_version = new Date(\"2020-04-21\");\nexport { migrate_to_centralized_store };\n\nfunction migrate_to_centralized_store() {\n  Object.entries(localStorage).forEach(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        key = _ref2[0],\n        val = _ref2[1];\n\n    if (key.startsWith(\"timer_\") || key.startsWith(\"clock_\") || key.startsWith(\"countdown_\") || key === \"thanks-for-your-donation\") {\n      if (key.endsWith(\"_presets\")) {\n        val = JSON.parse(val);\n      }\n\n      if (key === \"thanks-for-your-donation\") {\n        val = true;\n      }\n\n      store.set_val(key, val);\n      window.localStorage.removeItem(key);\n    }\n  });\n  store.migrate__rename_keys({\n    \"thanks-for-your-donation\": \"ad_removal\"\n  });\n}","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _classPrivateFieldLooseBase(receiver, privateKey) { if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) { throw new TypeError(\"attempted to use private field on non-instance\"); } return receiver; }\n\nvar id = 0;\n\nfunction _classPrivateFieldLooseKey(name) { return \"__private_\" + id++ + \"_\" + name; }\n\nimport assert from \"@brillout/assert\";\nimport load_font from \"./load_font\";\nimport _load_font_list from \"./load_font_list\";\nimport { set_background } from \"./set_background/set_background\";\nimport \"./tab-settings.css\";\nimport { track_event, track_error } from \"../views/common/tracker\";\nimport { remove_hash } from \"../auto_remove_hash\";\nimport { TextInput, BooleanInput, SelectInput, ColorInput, DateInput, Button } from \"./PersistantInput\";\nimport { show_toast } from \"../views/common/show_toast\";\nimport { run_migrations } from \"./run_migrations\";\nimport { store, deserialize, serialize } from \"../store\";\nrun_migrations();\nexport var TabSettings = /*#__PURE__*/function () {\n  function TabSettings(_ref) {\n    var _this = this;\n\n    var option_spec_list = _ref.option_spec_list,\n        preset_spec_list = _ref.preset_spec_list,\n        _ref$text_container = _ref.text_container,\n        text_container = _ref$text_container === void 0 ? null : _ref$text_container,\n        _ref$no_random_preset = _ref.no_random_preset,\n        no_random_preset = _ref$no_random_preset === void 0 ? false : _ref$no_random_preset,\n        on_any_change = _ref.on_any_change,\n        _ref$on_font_change = _ref.on_font_change,\n        on_font_change = _ref$on_font_change === void 0 ? null : _ref$on_font_change,\n        enable_import_export = _ref.enable_import_export,\n        subapp_id = _ref.subapp_id,\n        preset_concept_name = _ref.preset_concept_name;\n\n    _classCallCheck(this, TabSettings);\n\n    this.preset_concept_name = void 0;\n    this.text_container = void 0;\n    this.no_random_preset = void 0;\n    this.on_any_change = void 0;\n    this.on_font_change = void 0;\n    this.enable_import_export = void 0;\n    this.subapp_id = void 0;\n    this.creator_content = void 0;\n    this.options_content = void 0;\n    this.options_container = void 0;\n    this.save_content = void 0;\n    this.save_container = void 0;\n    this.share_content = void 0;\n    this.share_container = void 0;\n    this.preset_list = void 0;\n    this.option_list = void 0;\n    this.resolve_font_loaded_promise = void 0;\n    this.font_loaded_promise = void 0;\n    this.button_mod = void 0;\n    this.button_del = void 0;\n    this.name_option = void 0;\n    this.button_url = void 0;\n    Object.defineProperty(this, _global_side_effects__timeout, {\n      writable: true,\n      value: null\n    });\n    Object.defineProperty(this, _previous_link, {\n      writable: true,\n      value: null\n    });\n    Object.defineProperty(this, _link_el, {\n      writable: true,\n      value: null\n    });\n    Object.defineProperty(this, _font_list_already_loading, {\n      writable: true,\n      value: false\n    });\n    assert(preset_concept_name);\n    {\n      var hasTextFontInput = !!option_spec_list.find(function (_ref2) {\n        var option_type = _ref2.option_type;\n        return option_type === \"text-font-input\";\n      });\n      var hasTextShadowInput = !!option_spec_list.find(function (_ref3) {\n        var option_type = _ref3.option_type;\n        return option_type === \"text-shadow-input\";\n      });\n      var hasTextColorInput = !!option_spec_list.find(function (_ref4) {\n        var option_type = _ref4.option_type;\n        return option_type === \"text-color-input\";\n      });\n      assert(!text_container && !on_font_change && !hasTextFontInput && !hasTextShadowInput && !hasTextColorInput || text_container && on_font_change && hasTextFontInput && hasTextShadowInput && hasTextColorInput);\n    }\n    this.preset_concept_name = preset_concept_name;\n    this.text_container = text_container;\n    this.no_random_preset = no_random_preset;\n    this.on_any_change = on_any_change;\n    this.on_font_change = on_font_change;\n    this.enable_import_export = enable_import_export;\n    this.subapp_id = subapp_id;\n    this.creator_content = document.getElementById(\"creator-content\");\n    this.options_content = document.getElementById(\"options-content\");\n    this.options_container = document.getElementById(\"options-container\");\n    this.save_content = document.getElementById(\"save-content\");\n    this.save_container = document.getElementById(\"save-container\");\n    this.share_content = document.getElementById(\"share-content\");\n    this.share_container = document.getElementById(\"share-container\");\n    this.preset_list = new PresetList({\n      preset_spec_list: preset_spec_list,\n      tab_settings: this\n    });\n    this.option_list = instantiate_options({\n      tab_settings: this,\n      option_spec_list: option_spec_list\n    });\n    this.resolve_font_loaded_promise;\n    this.font_loaded_promise = new Promise(function (r) {\n      return _this.resolve_font_loaded_promise = r;\n    });\n  }\n\n  _createClass(TabSettings, [{\n    key: \"generate_dom\",\n    value: function generate_dom() {\n      this.option_list.forEach(function (opt) {\n        opt.generate_dom();\n      });\n\n      if (this.enable_import_export) {\n        this.generate_import_export_dom();\n      }\n\n      this.global_side_effects({\n        is_initial_run: true\n      });\n    }\n  }, {\n    key: \"generate_import_export_dom\",\n    value: function generate_import_export_dom() {\n      var _this2 = this;\n\n      var input_container = this.creator_content;\n      {\n        var btn = new Button({\n          input_container: input_container,\n          text: \"Customize\",\n          className: \"action-button\",\n          on_click: function on_click() {\n            _this2.modify_preset();\n          },\n          id: \"modify-preset-button\"\n        });\n        btn.generate_dom();\n        this.button_mod = btn;\n      }\n      {\n        var _btn = new Button({\n          input_container: input_container,\n          text: \"Delete\",\n          className: \"action-button\",\n          on_click: function on_click() {\n            _this2.delete_preset();\n          },\n          id: \"delete-preset-button\"\n        });\n\n        _btn.generate_dom();\n\n        this.button_del = _btn;\n      }\n      input_container = this.save_content;\n      {\n        var subapp_id = this.subapp_id;\n        assert(subapp_id);\n        var name_option = new TextOption({\n          input_container: input_container,\n          option_id: subapp_id + \"_name\",\n          input_width: \"150px\",\n          option_description: this.preset_concept_name + \" name\",\n          option_default: \"\",\n          tab_settings: this,\n          id: \"preset-name-input\"\n        });\n        name_option.generate_dom();\n        this.name_option = name_option;\n      }\n      {\n        var _btn2 = new Button({\n          input_container: input_container,\n          text: \"Save\",\n          on_click: function on_click() {\n            _this2.save_created_preset();\n          },\n          id: \"save-preset-button\"\n        });\n\n        _btn2.generate_dom();\n\n        this.button_url = _btn2;\n      }\n    }\n  }, {\n    key: \"save_created_preset\",\n    value: function save_created_preset() {\n      var preset_selected = this.preset_selected;\n      assert(preset_selected.is_creator_preset, preset_selected);\n      var preset_name = this.name_option.input_value;\n\n      if (!preset_name) {\n        alert(\"You need to provide a name for your \" + this.preset_concept_name + \" in order to save it.\");\n        return;\n      }\n\n      var preset_id = NameIdConverter.from_name_to_id(preset_name);\n\n      if (this.preset_list.get_preset_by_name(preset_id, {\n        can_be_null: true\n      })) {\n        var error_msg = \"Change the name of your \" + this.preset_concept_name + \"; \" + \"you already have a \" + this.preset_concept_name + ' saved with ID \"' + preset_id + '\". (IDs are genrated from name; change name to change ID.)';\n        alert(error_msg);\n        return;\n      }\n\n      var preset_values = {};\n      this.option_list.filter(function (option) {\n        return option.is_creator_option;\n      }).forEach(function (option) {\n        var preset_val = option.input_value;\n        assert([false, \"\"].includes(preset_val) || preset_val, option.option_id, preset_val === undefined, {\n          preset_val: preset_val\n        });\n        preset_values[option.option_id] = preset_val;\n      });\n      var new_preset = new SavedPreset({\n        preset_id: preset_id,\n        preset_values: preset_values,\n        tab_settings: this\n      });\n      this.preset_list.save_preset(new_preset);\n      this.select_preset(new_preset);\n      this.reset_creator();\n    }\n  }, {\n    key: \"reset_creator\",\n    value: function reset_creator() {\n      // Erase all custom option values\n      this.option_list.forEach(function (option) {\n        option.reset();\n      });\n    }\n  }, {\n    key: \"copy_to_creator\",\n    value: function copy_to_creator() {\n      var _this3 = this;\n\n      var preset = this.active_preset;\n      assert(preset.is_real_preset);\n      var preset_values = preset.preset_values;\n\n      var _loop = function _loop(opt_id) {\n        var opt_val = preset_values[opt_id];\n        assert(![\"preset_name\", \"preset_id\", \"id\", \"name\"].includes(opt_val));\n\n        _this3.find_option(function (option) {\n          return option.option_id === opt_id;\n        }).set_input_value(opt_val);\n      };\n\n      for (var opt_id in preset_values) {\n        _loop(opt_id);\n      }\n\n      this.select_preset_creator();\n    }\n  }, {\n    key: \"modify_preset\",\n    value: function modify_preset() {\n      var preset = this.active_preset;\n      assert(preset.is_real_preset, preset);\n      var new_preset_id = this.preset_list.generate_unique_preset_id_copy(preset);\n      this.copy_to_creator();\n      this.name_option.set_input_value(NameIdConverter.from_id_to_name(new_preset_id));\n    }\n  }, {\n    key: \"delete_preset\",\n    value: function delete_preset() {\n      var preset = this.active_preset;\n      assert(preset.is_saved_preset, preset);\n      this.copy_to_creator();\n      this.name_option.set_input_value(preset.preset_name);\n      this.preset_list.remove_preset(preset);\n    }\n  }, {\n    key: \"global_side_effects\",\n    value: function global_side_effects() {\n      var _this4 = this;\n\n      var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref5$is_initial_run = _ref5.is_initial_run,\n          is_initial_run = _ref5$is_initial_run === void 0 ? false : _ref5$is_initial_run;\n\n      if (is_initial_run) {\n        this.run_side_effects(true);\n        return;\n      }\n\n      if (_classPrivateFieldLooseBase(this, _global_side_effects__timeout)[_global_side_effects__timeout]) {\n        return;\n      }\n\n      _classPrivateFieldLooseBase(this, _global_side_effects__timeout)[_global_side_effects__timeout] = requestAnimationFrame(function () {\n        _this4.run_side_effects();\n\n        _classPrivateFieldLooseBase(_this4, _global_side_effects__timeout)[_global_side_effects__timeout] = null;\n      });\n    }\n  }, {\n    key: \"run_side_effects\",\n    value: function run_side_effects() {\n      var _this5 = this;\n\n      var is_initial_run = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      this.update_background();\n\n      if (this.text_container) {\n        this.update_font();\n        this.load_font_list();\n      }\n\n      this.update_option_visibility();\n      this.update_button_visibility();\n      this.on_any_change({\n        is_initial_run: is_initial_run\n      });\n      this.update_share_link();\n      this.update_save_block();\n\n      if (is_initial_run) {\n        this.load_preset_from_url();\n        window.addEventListener(\"hashchange\", function () {\n          return _this5.load_preset_from_url();\n        }, {\n          passive: true\n        });\n        this.track_user_presets();\n        this.set_options_container_visibility();\n      }\n    }\n  }, {\n    key: \"set_options_container_visibility\",\n    value: function set_options_container_visibility() {\n      var to_hide = this.option_list.every(function (opt) {\n        assert(opt.is_creator_option.constructor === Boolean);\n        return opt.is_creator_option || opt.is_preset_selector;\n      });\n\n      if (to_hide) {\n        this.options_container.style.display = \"none\";\n      }\n    }\n  }, {\n    key: \"track_user_presets\",\n    value: function track_user_presets() {\n      track_event({\n        name: \"preset_used\",\n        value: this.preset_selected.preset_id + \" \" + this.preset_concept_name.toLowerCase()\n      });\n    }\n  }, {\n    key: \"update_share_link\",\n    value: function update_share_link() {\n      var preset_selected = this.preset_selected;\n\n      if (!preset_selected.is_saved_preset) {\n        this.share_container.classList.add(\"no-share-link\");\n        return;\n      } else {\n        this.share_container.classList.remove(\"no-share-link\");\n      }\n\n      var current_link = preset_selected.share_link;\n\n      if (_classPrivateFieldLooseBase(this, _previous_link)[_previous_link] === current_link) {\n        return;\n      } else {\n        _classPrivateFieldLooseBase(this, _previous_link)[_previous_link] = current_link;\n      }\n\n      if (!_classPrivateFieldLooseBase(this, _link_el)[_link_el]) {\n        _classPrivateFieldLooseBase(this, _link_el)[_link_el] = document.createElement(\"a\");\n        _classPrivateFieldLooseBase(this, _link_el)[_link_el].id = \"share-link-tag\"; // this.#link_el.setAttribute('target', '_blank');\n\n        this.share_content.appendChild(_classPrivateFieldLooseBase(this, _link_el)[_link_el]);\n      }\n\n      _classPrivateFieldLooseBase(this, _link_el)[_link_el].setAttribute(\"href\", current_link);\n\n      _classPrivateFieldLooseBase(this, _link_el)[_link_el].textContent = current_link;\n    }\n  }, {\n    key: \"update_save_block\",\n    value: function update_save_block() {\n      this.save_container.style.display = this.preset_selected.is_creator_preset ? \"\" : \"none\";\n    }\n  }, {\n    key: \"load_preset_from_url\",\n    value: function load_preset_from_url() {\n      var preset_url = window.location.href;\n      var preset_data = LinkSerializer.from_url();\n\n      if (preset_data === null) {\n        return;\n      }\n\n      var preset_id = preset_data.preset_id;\n      assert(preset_id);\n      var preset_conflict = this.preset_list.get_preset_by_name(preset_id, {\n        can_be_null: true\n      });\n\n      if (preset_conflict) {\n        this.select_preset(preset_conflict);\n        show_toast(this.preset_concept_name + ' \"' + preset_conflict.preset_name + '\" already saved.');\n        remove_hash();\n        return;\n      }\n\n      var subapp_id = preset_data.subapp_id;\n      assert(subapp_id);\n      /* TN2\n      const wrong_url_format =\n      if( wrong_url_format ){\n        alert(\"URL is incorrect, maybe you inadvertently modified the URL?\");\n      }\n      */\n\n      var wrong_app = subapp_id !== this.subapp_id;\n\n      if (wrong_app) {\n        alert(\"Wrong app: the URL hash should be loaded in a different app.\");\n        return;\n      }\n\n      var preset_values = preset_data.preset_values;\n      assert(preset_values);\n      var new_preset = new SavedPreset({\n        preset_id: preset_id,\n        preset_values: preset_values,\n        tab_settings: this\n      });\n      this.preset_list.save_preset(new_preset);\n      this.select_preset(new_preset);\n      show_toast(this.preset_concept_name + ' \"' + new_preset.preset_name + '\" successfully saved.');\n      remove_hash();\n      track_event({\n        name: \"preset_imported\",\n        value: this.preset_concept_name + \" \" + new_preset.preset_name,\n        data: {\n          preset_url: preset_url\n        }\n      });\n    }\n  }, {\n    key: \"update_background\",\n    value: function update_background() {\n      var image = this.current_backgroud_image;\n      var color = this.current_backgroud_color; // set_background(color, image, \"#fv_right-side\");\n\n      set_background(color, image, \"body\");\n    }\n  }, {\n    key: \"update_font\",\n    value: function () {\n      var _update_font = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this6 = this;\n\n        var text_container, get_font_name;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                text_container = this.text_container;\n\n                get_font_name = function get_font_name() {\n                  return _this6.current_font_name;\n                };\n\n                _context.next = 4;\n                return load_text_font({\n                  text_container: text_container,\n                  get_font_name: get_font_name\n                });\n\n              case 4:\n                this.on_font_change();\n                this.resolve_font_loaded_promise();\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function update_font() {\n        return _update_font.apply(this, arguments);\n      }\n\n      return update_font;\n    }()\n  }, {\n    key: \"update_option_visibility\",\n    value: function update_option_visibility() {\n      var _this7 = this;\n\n      // Visibility of options\n      var get_input_val = function get_input_val(dep_option_id) {\n        return _this7.find_option(function (option) {\n          return option.option_id === dep_option_id;\n        }).input_value;\n      };\n\n      this.option_list.forEach(function (opt) {\n        var to_hide = opt.option_dependency && !get_input_val(opt.option_dependency) || opt.is_creator_option && !_this7.preset_selected.is_creator_preset;\n\n        if (to_hide) {\n          opt.hide();\n        } else {\n          opt.show();\n        }\n      });\n    }\n  }, {\n    key: \"update_button_visibility\",\n    value: function update_button_visibility() {\n      if (!this.enable_import_export) {\n        return;\n      }\n\n      if (this.preset_selected.is_saved_preset) {\n        this.button_del.show();\n      } else {\n        this.button_del.hide();\n      }\n\n      if (this.preset_selected.is_creator_preset) {\n        this.button_mod.hide();\n        this.button_url.show();\n        this.name_option.show(); // this.button_del.hide();\n      } else {\n        this.button_url.hide();\n        this.name_option.hide(); // this.button_del.hide();\n\n        if (!this.preset_selected.is_randomizer_preset) {\n          this.button_mod.show();\n        } else {\n          this.button_mod.hide();\n        }\n      }\n    }\n  }, {\n    key: \"load_font_list\",\n    value: function () {\n      var _load_font_list2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (this.preset_selected.is_creator_preset) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 2:\n                if (!_classPrivateFieldLooseBase(this, _font_list_already_loading)[_font_list_already_loading]) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 4:\n                _classPrivateFieldLooseBase(this, _font_list_already_loading)[_font_list_already_loading] = true;\n                _context2.t0 = this.font_option;\n                _context2.t1 = [SelectInput.get_divider()];\n                _context2.t2 = _toConsumableArray;\n                _context2.next = 10;\n                return _load_font_list();\n\n              case 10:\n                _context2.t3 = _context2.sent;\n                _context2.t4 = (0, _context2.t2)(_context2.t3);\n                _context2.t5 = _context2.t1.concat.call(_context2.t1, _context2.t4);\n\n                _context2.t0.add_fonts.call(_context2.t0, _context2.t5);\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function load_font_list() {\n        return _load_font_list2.apply(this, arguments);\n      }\n\n      return load_font_list;\n    }()\n  }, {\n    key: \"find_option\",\n    value: function find_option(match) {\n      var option = this.option_list.find(match);\n      assert(option);\n      return option;\n    }\n  }, {\n    key: \"select_preset_creator\",\n    value: function select_preset_creator() {\n      this.active_preset = this.preset_list.creator_preset;\n    }\n  }, {\n    key: \"select_preset\",\n    value: function select_preset(preset) {\n      this.active_preset = preset;\n    }\n  }, {\n    key: \"get_option_value\",\n    value: function get_option_value(option_id) {\n      return this.find_option(function (option) {\n        return option.option_id === option_id;\n      }).active_value;\n    }\n  }, {\n    key: \"background_image_option\",\n    get: function get() {\n      return this.find_option(function (option) {\n        return option.is_background_image_option;\n      });\n    }\n  }, {\n    key: \"current_backgroud_image\",\n    get: function get() {\n      return this.background_image_option.active_value;\n    }\n  }, {\n    key: \"background_color_option\",\n    get: function get() {\n      return this.find_option(function (option) {\n        return option.is_background_color_option;\n      });\n    }\n  }, {\n    key: \"current_backgroud_color\",\n    get: function get() {\n      return this.background_color_option.active_value;\n    }\n  }, {\n    key: \"font_option\",\n    get: function get() {\n      return this.find_option(function (option) {\n        return option.is_font_option;\n      });\n    }\n  }, {\n    key: \"current_font_name\",\n    get: function get() {\n      return this.font_option.active_value;\n    }\n  }, {\n    key: \"active_preset\",\n    get: function get() {\n      var active_preset;\n      var preset_selected = this.preset_selected;\n\n      if (preset_selected.is_randomizer_preset) {\n        active_preset = preset_selected.random_preset;\n      } else {\n        active_preset = preset_selected;\n      }\n\n      assert(!active_preset.is_randomizer_preset, {\n        active_preset: active_preset\n      });\n      assert(active_preset.preset_id, {\n        active_preset: active_preset\n      });\n      return active_preset;\n    },\n    set: function set(preset_thing) {\n      var preset_id;\n\n      if (preset_thing.constructor === String) {\n        preset_id = preset_thing;\n      }\n\n      if (preset_thing instanceof Preset || preset_thing instanceof FakePreset) {\n        preset_id = preset_thing.preset_id;\n      }\n\n      assert(preset_id, {\n        preset_thing: preset_thing,\n        preset_id: preset_id\n      });\n      this.preset_option.set_input_value(preset_id);\n    }\n  }, {\n    key: \"preset_selected\",\n    get: function get() {\n      var preset_id = this.preset_option.input_value;\n      var preset = this.preset_list.get_preset_by_name(preset_id, {\n        can_be_null: true\n      });\n\n      if (preset) {\n        return preset;\n      }\n\n      var default_preset_id = this.preset_option.option_default;\n      assert(default_preset_id, {\n        default_preset_id: default_preset_id\n      });\n      var default_preset = this.preset_list.get_preset_by_name(default_preset_id);\n      return default_preset;\n    }\n  }, {\n    key: \"preset_option\",\n    get: function get() {\n      return this.find_option(function (option) {\n        return option.is_preset_selector;\n      });\n    }\n  }]);\n\n  return TabSettings;\n}();\n\nvar _global_side_effects__timeout = _classPrivateFieldLooseKey(\"global_side_effects__timeout\");\n\nvar _previous_link = _classPrivateFieldLooseKey(\"previous_link\");\n\nvar _link_el = _classPrivateFieldLooseKey(\"link_el\");\n\nvar _font_list_already_loading = _classPrivateFieldLooseKey(\"font_list_already_loading\");\n\nvar Option = /*#__PURE__*/function () {\n  function Option(_ref6) {\n    var _this8 = this;\n\n    var option_id = _ref6.option_id,\n        option_description = _ref6.option_description,\n        option_default = _ref6.option_default,\n        input_width = _ref6.input_width,\n        tab_settings = _ref6.tab_settings,\n        input_container = _ref6.input_container,\n        _ref6$is_creator_opti = _ref6.is_creator_option,\n        is_creator_option = _ref6$is_creator_opti === void 0 ? false : _ref6$is_creator_opti,\n        props = _objectWithoutProperties(_ref6, [\"option_id\", \"option_description\", \"option_default\", \"input_width\", \"tab_settings\", \"input_container\", \"is_creator_option\"]);\n\n    _classCallCheck(this, Option);\n\n    this.tab_settings = void 0;\n    this.option_id = void 0;\n    this.option_description = void 0;\n    this.input_args = void 0;\n    this.is_creator_option = void 0;\n    this.option_default = void 0;\n    this.user_input = void 0;\n    assert(option_id);\n    assert(tab_settings);\n    Object.assign(this, _objectSpread({\n      option_id: option_id,\n      tab_settings: tab_settings\n    }, props));\n    this.is_creator_option = is_creator_option;\n    this.option_default = option_default;\n    input_container = input_container || (is_creator_option ? this.tab_settings.creator_content : this.tab_settings.options_content);\n    assert(input_container, {\n      option_id: option_id\n    });\n    this.input_args = {\n      input_id: option_id,\n      input_description: option_description,\n      on_input_change: function on_input_change() {\n        _this8.tab_settings.global_side_effects();\n      },\n      input_default: option_default,\n      input_container: input_container,\n      input_width: input_width\n    };\n  }\n\n  _createClass(Option, [{\n    key: \"generate_dom\",\n    value: function generate_dom() {\n      if (this.before_dom) {\n        this.before_dom();\n      }\n\n      assert(this.user_input);\n      this.user_input.init();\n    }\n  }, {\n    key: \"set_input_value\",\n    value: function set_input_value(val) {\n      this.user_input.input_set(val);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.user_input.hide();\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      this.user_input.show();\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {// TODO\n    }\n  }, {\n    key: \"input_value\",\n    get: function get() {\n      return this.user_input.input_get();\n    }\n  }, {\n    key: \"preset_value\",\n    get: function get() {\n      var preset_val = this.tab_settings.active_preset.get_preset_value(this);\n      return preset_val;\n    }\n  }, {\n    key: \"active_value\",\n    get: function get() {\n      if (this.tab_settings.preset_selected.is_creator_preset) {\n        return this.input_value;\n      }\n\n      var preset_value = this.preset_value;\n\n      if (this.is_creator_option) {\n        return preset_value;\n      }\n\n      if (preset_value !== null) {\n        return preset_value;\n      }\n\n      return this.input_value;\n    }\n  }]);\n\n  return Option;\n}();\n\nvar DateOption = /*#__PURE__*/function (_Option) {\n  _inherits(DateOption, _Option);\n\n  function DateOption(args) {\n    var _this9;\n\n    _classCallCheck(this, DateOption);\n\n    _this9 = _possibleConstructorReturn(this, _getPrototypeOf(DateOption).call(this, args));\n    _this9.user_input = new DateInput(_this9.input_args);\n    return _this9;\n  }\n\n  return DateOption;\n}(Option);\n\nvar BooleanOption = /*#__PURE__*/function (_Option2) {\n  _inherits(BooleanOption, _Option2);\n\n  function BooleanOption(args) {\n    var _this10;\n\n    _classCallCheck(this, BooleanOption);\n\n    _this10 = _possibleConstructorReturn(this, _getPrototypeOf(BooleanOption).call(this, args));\n    _this10.user_input = new BooleanInput(_this10.input_args);\n    return _this10;\n  }\n\n  return BooleanOption;\n}(Option);\n\nvar SelectOption = /*#__PURE__*/function (_Option3) {\n  _inherits(SelectOption, _Option3);\n\n  function SelectOption(args, input_options) {\n    var _this11;\n\n    _classCallCheck(this, SelectOption);\n\n    _this11 = _possibleConstructorReturn(this, _getPrototypeOf(SelectOption).call(this, args));\n    _this11.user_input = void 0;\n    _this11.user_input = new SelectInput(_objectSpread({\n      input_options: input_options\n    }, _this11.input_args));\n    return _this11;\n  }\n\n  _createClass(SelectOption, [{\n    key: \"add_options\",\n    value: function add_options(args) {\n      this.user_input.add_options(args);\n    }\n  }]);\n\n  return SelectOption;\n}(Option);\n\nvar ChoiceOption = /*#__PURE__*/function (_SelectOption) {\n  _inherits(ChoiceOption, _SelectOption);\n\n  function ChoiceOption(_ref7) {\n    var option_choices = _ref7.option_choices,\n        args = _objectWithoutProperties(_ref7, [\"option_choices\"]);\n\n    _classCallCheck(this, ChoiceOption);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ChoiceOption).call(this, _objectSpread({\n      input_width: \"100px\"\n    }, args), option_choices));\n  }\n\n  return ChoiceOption;\n}(SelectOption);\n\nvar TextOption = /*#__PURE__*/function (_Option4) {\n  _inherits(TextOption, _Option4);\n\n  function TextOption(args) {\n    var _this12;\n\n    _classCallCheck(this, TextOption);\n\n    _this12 = _possibleConstructorReturn(this, _getPrototypeOf(TextOption).call(this, args));\n    _this12.input_args.input_placeholder = args.option_placeholder;\n    _this12.user_input = new TextInput(_this12.input_args);\n    return _this12;\n  }\n\n  return TextOption;\n}(Option);\n/*\nclass TextOption extends Option {\n  constructor({option_placeholder, ...args}) {\n    super(args);\n    this.input_args.input_placeholder = option_placeholder;\n    this.user_input = new TextInput(this.input_args);\n  }\n}\n*/\n\n\nvar ColorOption = /*#__PURE__*/function (_Option5) {\n  _inherits(ColorOption, _Option5);\n\n  function ColorOption(args) {\n    var _this13;\n\n    _classCallCheck(this, ColorOption);\n\n    _this13 = _possibleConstructorReturn(this, _getPrototypeOf(ColorOption).call(this, _objectSpread({\n      input_width: \"35px\"\n    }, args)));\n    _this13.user_input = new ColorInput(_this13.input_args);\n    return _this13;\n  }\n\n  return ColorOption;\n}(Option);\n\nvar TextColorOption = /*#__PURE__*/function (_ColorOption) {\n  _inherits(TextColorOption, _ColorOption);\n\n  function TextColorOption() {\n    _classCallCheck(this, TextColorOption);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(TextColorOption).apply(this, arguments));\n  }\n\n  return TextColorOption;\n}(ColorOption);\n\nvar TextShadowOption = /*#__PURE__*/function (_TextOption) {\n  _inherits(TextShadowOption, _TextOption);\n\n  function TextShadowOption() {\n    _classCallCheck(this, TextShadowOption);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(TextShadowOption).apply(this, arguments));\n  }\n\n  return TextShadowOption;\n}(TextOption);\n\nvar PresetOption = /*#__PURE__*/function (_SelectOption2) {\n  _inherits(PresetOption, _SelectOption2);\n\n  function PresetOption(_ref8) {\n    var _this14;\n\n    var input_options = _ref8.input_options,\n        args = _objectWithoutProperties(_ref8, [\"input_options\"]);\n\n    _classCallCheck(this, PresetOption);\n\n    _this14 = _possibleConstructorReturn(this, _getPrototypeOf(PresetOption).call(this, _objectSpread({\n      input_width: \"120px\",\n      input_container: args.tab_settings.creator_content\n    }, args), input_options));\n    _this14.is_preset_selector = true;\n    return _this14;\n  }\n\n  _createClass(PresetOption, [{\n    key: \"before_dom\",\n    value: function before_dom() {\n      this.user_input.input_options = this.get_input_options();\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      this.before_dom();\n      this.user_input.refresh();\n    }\n  }, {\n    key: \"get_input_options\",\n    value: function get_input_options() {\n      var _this$tab_settings$pr = this.tab_settings.preset_list.presets_ordered,\n          special_ones = _this$tab_settings$pr.special_ones,\n          saved_ones = _this$tab_settings$pr.saved_ones,\n          native_ones = _this$tab_settings$pr.native_ones;\n      {\n        var map = function map(_ref9) {\n          var preset_id = _ref9.preset_id,\n              preset_name = _ref9.preset_name;\n          assert(preset_id);\n          assert(preset_name);\n          return {\n            val: preset_id,\n            val_pretty: preset_name\n          };\n        };\n\n        special_ones = special_ones.map(map);\n        saved_ones = saved_ones.map(map);\n        native_ones = native_ones.map(map);\n      }\n      return saved_ones.length > 0 ? [].concat(_toConsumableArray(special_ones), [SelectInput.get_divider(\"Saved\")], _toConsumableArray(saved_ones), [SelectInput.get_divider(\"Native\")], _toConsumableArray(native_ones)) : [].concat(_toConsumableArray(special_ones), [SelectInput.get_divider()], _toConsumableArray(native_ones));\n    }\n  }]);\n\n  return PresetOption;\n}(SelectOption);\n\nvar BackgroundImageOption = /*#__PURE__*/function (_TextOption2) {\n  _inherits(BackgroundImageOption, _TextOption2);\n\n  function BackgroundImageOption() {\n    var _getPrototypeOf2;\n\n    var _this15;\n\n    _classCallCheck(this, BackgroundImageOption);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this15 = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(BackgroundImageOption)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this15.is_background_image_option = true;\n    return _this15;\n  }\n\n  return BackgroundImageOption;\n}(TextOption);\n\nvar BackgroundColorOption = /*#__PURE__*/function (_ColorOption2) {\n  _inherits(BackgroundColorOption, _ColorOption2);\n\n  function BackgroundColorOption() {\n    var _getPrototypeOf3;\n\n    var _this16;\n\n    _classCallCheck(this, BackgroundColorOption);\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    _this16 = _possibleConstructorReturn(this, (_getPrototypeOf3 = _getPrototypeOf(BackgroundColorOption)).call.apply(_getPrototypeOf3, [this].concat(args)));\n    _this16.is_background_color_option = true;\n    return _this16;\n  }\n\n  return BackgroundColorOption;\n}(ColorOption);\n\nvar FontOption = /*#__PURE__*/function (_SelectOption3) {\n  _inherits(FontOption, _SelectOption3);\n\n  function FontOption(_ref10) {\n    var _this17;\n\n    var input_optoins = _ref10.input_optoins,\n        args = _objectWithoutProperties(_ref10, [\"input_optoins\"]);\n\n    _classCallCheck(this, FontOption);\n\n    _this17 = _possibleConstructorReturn(this, _getPrototypeOf(FontOption).call(this, _objectSpread({\n      input_width: \"110px\"\n    }, args), input_optoins));\n    _this17.is_font_option = true;\n    return _this17;\n  }\n\n  _createClass(FontOption, [{\n    key: \"before_dom\",\n    value: function before_dom() {\n      this.user_input.input_options = this.tab_settings.preset_list.get_all_preset_fonts();\n    }\n  }, {\n    key: \"add_fonts\",\n    value: function add_fonts(args) {\n      this.add_options(args);\n    }\n  }, {\n    key: \"input_value\",\n    get: function get() {\n      var val = _get(_getPrototypeOf(FontOption.prototype), \"input_value\", this);\n\n      assert(val, \"empty_font_value\", val === undefined, val === \"\", {\n        val: val\n      });\n      return val;\n    }\n  }]);\n\n  return FontOption;\n}(SelectOption);\n\nfunction load_text_font(_x) {\n  return _load_text_font.apply(this, arguments);\n}\n\nfunction _load_text_font() {\n  _load_text_font = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(_ref21) {\n    var text_container, get_font_name, font_name;\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            text_container = _ref21.text_container, get_font_name = _ref21.get_font_name;\n            font_name = get_font_name();\n            _context3.next = 4;\n            return load_font(font_name);\n\n          case 4:\n            if (!(font_name !== get_font_name())) {\n              _context3.next = 6;\n              break;\n            }\n\n            return _context3.abrupt(\"return\");\n\n          case 6:\n            if (!(font_name === text_container.style.fontFamily)) {\n              _context3.next = 8;\n              break;\n            }\n\n            return _context3.abrupt(\"return\");\n\n          case 8:\n            text_container.style.fontFamily = font_name;\n\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _load_text_font.apply(this, arguments);\n}\n\nfunction instantiate_options(_ref11) {\n  var tab_settings = _ref11.tab_settings,\n      option_spec_list = _ref11.option_spec_list;\n  return option_spec_list.map(function (_ref12) {\n    var option_type = _ref12.option_type,\n        option_spec = _objectWithoutProperties(_ref12, [\"option_type\"]);\n\n    assert(option_spec.option_id, option_spec);\n\n    var args = _objectSpread({}, option_spec, {\n      tab_settings: tab_settings\n    });\n\n    if (option_type === \"text-font-input\") {\n      return new FontOption(args);\n    }\n\n    if (option_type === \"preset-input\") {\n      return new PresetOption(args);\n    }\n\n    if (option_type === \"text-color-input\") {\n      return new TextColorOption(args);\n    }\n\n    if (option_type === \"color-input\") {\n      return new ColorOption(args);\n    }\n\n    if (option_type === \"text-shadow-input\") {\n      return new TextShadowOption(args);\n    }\n\n    if (option_type === \"text-input\") {\n      return new TextOption(args);\n    }\n\n    if (option_type === \"background-image-input\") {\n      return new BackgroundImageOption(args);\n    }\n\n    if (option_type === \"background-color-input\") {\n      return new BackgroundColorOption(args);\n    }\n\n    if (option_type === \"boolean-input\") {\n      return new BooleanOption(args);\n    }\n\n    if (option_type === \"date-input\") {\n      return new DateOption(args);\n    }\n\n    if (option_type === \"choice-input\") {\n      return new ChoiceOption(args);\n    }\n\n    assert(false, {\n      option_type: option_type\n    });\n  });\n}\n\nvar PresetList = /*#__PURE__*/function () {\n  function PresetList(_ref13) {\n    var preset_spec_list = _ref13.preset_spec_list,\n        tab_settings = _ref13.tab_settings;\n\n    _classCallCheck(this, PresetList);\n\n    Object.defineProperty(this, _preset_savior, {\n      writable: true,\n      value: null\n    });\n    Object.defineProperty(this, _native_presets, {\n      writable: true,\n      value: null\n    });\n    this.tab_settings = void 0;\n    this.randomizer_preset = void 0;\n    this.creator_preset = void 0;\n    this.tab_settings = tab_settings;\n    _classPrivateFieldLooseBase(this, _preset_savior)[_preset_savior] = new PresetSavior({\n      subapp_id: tab_settings.subapp_id\n    });\n\n    if (!this.tab_settings.no_random_preset) {\n      this.randomizer_preset = new RandomizerPreset({\n        preset_list: this\n      });\n    }\n\n    this.creator_preset = new CreatorPreset();\n    _classPrivateFieldLooseBase(this, _native_presets)[_native_presets] = Object.entries(preset_spec_list).map(function (_ref14) {\n      var _ref15 = _slicedToArray(_ref14, 2),\n          preset_id = _ref15[0],\n          preset_values = _ref15[1];\n\n      return new NativePreset({\n        preset_id: preset_id,\n        preset_values: preset_values,\n        tab_settings: tab_settings\n      });\n    });\n  }\n\n  _createClass(PresetList, [{\n    key: \"save_preset\",\n    value: function save_preset(preset) {\n      _classPrivateFieldLooseBase(this, _preset_savior)[_preset_savior].save_preset(preset);\n\n      this.refresh_user_input();\n    }\n  }, {\n    key: \"remove_preset\",\n    value: function remove_preset(preset) {\n      _classPrivateFieldLooseBase(this, _preset_savior)[_preset_savior].remove_preset(preset);\n\n      this.refresh_user_input();\n    }\n  }, {\n    key: \"refresh_user_input\",\n    value: function refresh_user_input() {\n      this.tab_settings.preset_option.refresh();\n    }\n  }, {\n    key: \"_get_saved_presets\",\n    value: function _get_saved_presets() {\n      var tab_settings = this.tab_settings;\n      return _classPrivateFieldLooseBase(this, _preset_savior)[_preset_savior].get_saved_presets().map(function (_ref16) {\n        var preset_id = _ref16.preset_id,\n            preset_values = _ref16.preset_values;\n        return new SavedPreset({\n          preset_id: preset_id,\n          preset_values: preset_values,\n          tab_settings: tab_settings\n        });\n      });\n    }\n  }, {\n    key: \"get_preset_by_name\",\n    value: function get_preset_by_name(preset_id) {\n      var _ref17 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref17$can_be_null = _ref17.can_be_null,\n          can_be_null = _ref17$can_be_null === void 0 ? false : _ref17$can_be_null;\n\n      assert(preset_id);\n\n      var presets = this._get_all_presets();\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = presets[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var preset = _step.value;\n\n          if (preset.preset_id === preset_id) {\n            return preset;\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      assert(can_be_null, \"Could not find preset\", {\n        preset_id: preset_id\n      });\n    }\n  }, {\n    key: \"get_all_preset_fonts\",\n    value: function get_all_preset_fonts() {\n      var _this$presets_ordered = this.presets_ordered,\n          saved_ones = _this$presets_ordered.saved_ones,\n          native_ones = _this$presets_ordered.native_ones;\n      var presets = [].concat(_toConsumableArray(saved_ones), _toConsumableArray(native_ones));\n      presets.forEach(function (preset) {\n        return assert(preset.is_real_preset, preset.preset_id);\n      });\n      var preset_font_names = presets.map(function (preset) {\n        var font_name = preset.preset_font_name;\n        assert(font_name, preset.preset_id);\n        return font_name;\n      });\n      preset_font_names = make_unique(preset_font_names);\n      return preset_font_names;\n    }\n  }, {\n    key: \"generate_unique_preset_id_copy\",\n    value: function generate_unique_preset_id_copy(preset) {\n      var preset_ids = this._get_all_preset_ids();\n\n      var preset_id = preset.preset_id;\n      assert(preset_id);\n      var s = NameIdConverter.white_space_seralized;\n      assert(s);\n      var base = preset_id.split(\"_\").join(s).split(/-edit(-|$)/)[0] + s + \"edit\";\n\n      for (var _i2 = 1; _i2 < 100; _i2++) {\n        var candidate = base + (_i2 === 1 ? \"\" : s + _i2);\n\n        if (!preset_ids.includes(candidate)) {\n          return candidate;\n        }\n      }\n\n      assert(false);\n    }\n  }, {\n    key: \"_get_all_preset_ids\",\n    value: function _get_all_preset_ids() {\n      var presets = this._get_all_presets();\n\n      var preset_ids = presets.map(function (preset) {\n        return preset.preset_id;\n      });\n      return preset_ids;\n    }\n  }, {\n    key: \"_get_all_presets\",\n    value: function _get_all_presets() {\n      var _this$presets_ordered2 = this.presets_ordered,\n          special_ones = _this$presets_ordered2.special_ones,\n          saved_ones = _this$presets_ordered2.saved_ones,\n          native_ones = _this$presets_ordered2.native_ones;\n      var presets = [].concat(_toConsumableArray(special_ones), _toConsumableArray(saved_ones), _toConsumableArray(native_ones));\n      return presets;\n    }\n  }, {\n    key: \"random_candidates\",\n    get: function get() {\n      var _this$presets_ordered3 = this.presets_ordered,\n          saved_ones = _this$presets_ordered3.saved_ones,\n          native_ones = _this$presets_ordered3.native_ones;\n\n      if (saved_ones.length > 1) {\n        return saved_ones;\n      }\n\n      return native_ones;\n    }\n  }, {\n    key: \"presets_ordered\",\n    get: function get() {\n      var special_ones = [this.creator_preset];\n\n      if (this.randomizer_preset) {\n        special_ones.push(this.randomizer_preset);\n      }\n\n      var saved_ones = this._get_saved_presets();\n\n      var native_ones = _classPrivateFieldLooseBase(this, _native_presets)[_native_presets];\n\n      assert(special_ones && saved_ones && native_ones);\n      return {\n        special_ones: special_ones,\n        saved_ones: saved_ones,\n        native_ones: native_ones\n      };\n    }\n  }]);\n\n  return PresetList;\n}();\n\nvar _preset_savior = _classPrivateFieldLooseKey(\"preset_savior\");\n\nvar _native_presets = _classPrivateFieldLooseKey(\"native_presets\");\n\nvar PresetSerializer = /*#__PURE__*/function () {\n  function PresetSerializer() {\n    _classCallCheck(this, PresetSerializer);\n  }\n\n  _createClass(PresetSerializer, null, [{\n    key: \"serialize_preset\",\n    value: function serialize_preset(preset) {\n      assert(preset instanceof SavedPreset); // Validation\n\n      var preset_id = preset.preset_id,\n          preset_values = preset.preset_values;\n      var subapp_id = preset.tab_settings.subapp_id;\n      var preset_data = new PresetData({\n        preset_id: preset_id,\n        preset_values: preset_values,\n        subapp_id: subapp_id\n      });\n      var preset_string = serialize(preset_data);\n      return preset_string;\n    }\n  }, {\n    key: \"deserialize_preset\",\n    value: function deserialize_preset(preset_string) {\n      assert(preset_string.constructor === String);\n      var preset_data = deserialize(preset_string); // share URLs cannot be migrated thus we migrate here at runtime\n\n      if (preset_data.preset_name && !preset_data.preset_id && preset_data.preset_options && !preset_data.preset_values) {\n        preset_data.preset_id = preset_data.preset_name;\n        delete preset_data.preset_name;\n        preset_data.preset_values = preset_data.preset_options;\n        delete preset_data.preset_options;\n      }\n\n      if (preset_data.app_name && !preset_data.subapp_id) {\n        preset_data.subapp_id = preset_data.app_name;\n        delete preset_data.app_name;\n      }\n\n      preset_data = new PresetData(preset_data);\n      return preset_data;\n    }\n  }]);\n\n  return PresetSerializer;\n}();\n\nvar Preset = /*#__PURE__*/function () {\n  function Preset(_ref18) {\n    var preset_id = _ref18.preset_id,\n        preset_values = _ref18.preset_values,\n        tab_settings = _ref18.tab_settings;\n\n    _classCallCheck(this, Preset);\n\n    this.preset_id = void 0;\n    this.preset_values = void 0;\n    this.tab_settings = void 0;\n    this.is_randomizer_preset = false;\n    this.is_creator_preset = false;\n    assert(preset_id);\n    assert([Object, PresetValues].includes(preset_values.constructor));\n    assert(tab_settings);\n    this.preset_id = preset_id;\n    this.preset_values = preset_values;\n    this.tab_settings = tab_settings; // Abstract class\n\n    if ((this instanceof Preset ? this.constructor : void 0) === Preset) {\n      throw new TypeError(\"Cannot construct Preset instances directly.\");\n    }\n  }\n\n  _createClass(Preset, [{\n    key: \"get_preset_value\",\n    value: function get_preset_value(option) {\n      var option_id = option.option_id;\n      assert(option_id);\n      var preset_values = this.preset_values;\n\n      if (option_id in preset_values) {\n        var val = preset_values[option_id];\n        assert(val !== null);\n        return val;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"is_real_preset\",\n    get: function get() {\n      return !this.is_randomizer_preset && !this.is_creator_preset;\n    }\n  }, {\n    key: \"preset_font_name\",\n    get: function get() {\n      var preset_font_name = this.get_preset_value(this.tab_settings.font_option);\n      assert(preset_font_name, {\n        preset_font_name: preset_font_name\n      });\n      return preset_font_name;\n    }\n  }, {\n    key: \"preset_name\",\n    get: function get() {\n      var prettified = NameIdConverter.from_id_to_name(this.preset_id);\n      assert(prettified, {\n        prettified: prettified\n      });\n      return prettified;\n    }\n  }]);\n\n  return Preset;\n}();\n\nvar SavedPreset = /*#__PURE__*/function (_Preset) {\n  _inherits(SavedPreset, _Preset);\n\n  function SavedPreset() {\n    var _getPrototypeOf4;\n\n    var _this18;\n\n    _classCallCheck(this, SavedPreset);\n\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    _this18 = _possibleConstructorReturn(this, (_getPrototypeOf4 = _getPrototypeOf(SavedPreset)).call.apply(_getPrototypeOf4, [this].concat(args)));\n    Object.defineProperty(_assertThisInitialized(_this18), _generated_link, {\n      writable: true,\n      value: null\n    });\n    return _this18;\n  }\n\n  _createClass(SavedPreset, [{\n    key: \"is_saved_preset\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"share_link\",\n    get: function get() {\n      if (!_classPrivateFieldLooseBase(this, _generated_link)[_generated_link]) {\n        return _classPrivateFieldLooseBase(this, _generated_link)[_generated_link] = LinkSerializer.to_url(this);\n      }\n\n      return _classPrivateFieldLooseBase(this, _generated_link)[_generated_link];\n    }\n  }]);\n\n  return SavedPreset;\n}(Preset);\n\nvar _generated_link = _classPrivateFieldLooseKey(\"generated_link\");\n\nvar NativePreset = /*#__PURE__*/function (_Preset2) {\n  _inherits(NativePreset, _Preset2);\n\n  function NativePreset(args) {\n    var _this19;\n\n    _classCallCheck(this, NativePreset);\n\n    _this19 = _possibleConstructorReturn(this, _getPrototypeOf(NativePreset).call(this, args));\n    var preset_id = args.preset_id;\n    assert(!preset_id.includes(\"-\"), {\n      preset_id: preset_id\n    });\n    assert(/^[a-zA-Z0-9_]+$$/.test(preset_id), {\n      preset_id: preset_id\n    });\n    return _this19;\n  }\n\n  return NativePreset;\n}(Preset);\n\nvar PresetData = function PresetData(args) {\n  _classCallCheck(this, PresetData);\n\n  this.subapp_id = void 0;\n  this.preset_id = void 0;\n  this.preset_values = void 0;\n\n  // I don't know why but even after all migrations applied a user\n  // had a `preset_options` prop in its local storage.\n  if (args.preset_options && !args.preset_values) {\n    args.preset_values = args.preset_options;\n    delete args.preset_options;\n  }\n\n  var preset_id = args.preset_id,\n      preset_values = args.preset_values,\n      subapp_id = args.subapp_id,\n      rest = _objectWithoutProperties(args, [\"preset_id\", \"preset_values\", \"subapp_id\"]);\n\n  assert(Object.keys(rest).length === 0 && preset_id && preset_values && subapp_id, \"malformatted preset data\", args);\n  this.subapp_id = subapp_id;\n  this.preset_id = preset_id;\n  this.preset_values = new PresetValues(preset_values);\n};\n\nvar PresetValues = function PresetValues(args) {\n  _classCallCheck(this, PresetValues);\n\n  assert([Object, PresetValues].includes(args.constructor), args, args.constructor);\n  Object.assign(this, args);\n};\n\nvar PresetSavior = /*#__PURE__*/function () {\n  function PresetSavior(_ref19) {\n    var subapp_id = _ref19.subapp_id;\n\n    _classCallCheck(this, PresetSavior);\n\n    Object.defineProperty(this, _subapp_id, {\n      writable: true,\n      value: null\n    });\n    assert(subapp_id);\n    _classPrivateFieldLooseBase(this, _subapp_id)[_subapp_id] = subapp_id;\n  }\n\n  _createClass(PresetSavior, [{\n    key: \"get_saved_presets\",\n    value: function get_saved_presets() {\n      return this._get_presets();\n    }\n  }, {\n    key: \"save_preset\",\n    value: function save_preset(preset) {\n      var preset_id = preset.preset_id,\n          preset_values = preset.preset_values;\n      assert(preset_id);\n      assert(preset_values);\n\n      var presets = this._get_presets();\n\n      if (presets.find(function (preset) {\n        return preset.preset_id === preset_id;\n      })) {\n        // @ts-ignore\n        assert.warning(\"Trying to save \" + preset_id + \" but it is already saved.\");\n        return;\n      }\n\n      var subapp_id = _classPrivateFieldLooseBase(this, _subapp_id)[_subapp_id];\n\n      var preset_data = new PresetData({\n        preset_id: preset_id,\n        preset_values: preset_values,\n        subapp_id: subapp_id\n      });\n      presets.push(preset_data);\n\n      this._save_presets(presets);\n    }\n  }, {\n    key: \"remove_preset\",\n    value: function remove_preset(preset) {\n      var preset_id = preset.preset_id;\n      assert(preset_id);\n\n      var presets = this._get_presets();\n\n      var old_length = presets.length;\n      presets = presets.filter(function (preset) {\n        return preset.preset_id !== preset_id;\n      });\n      var new_length = presets.length;\n\n      if (new_length === old_length) {\n        // @ts-ignore\n        assert.warning(false, \"Preset \" + preset_id + \" not found.\");\n      }\n\n      if (new_length !== old_length - 1) {\n        // @ts-ignore\n        assert.warning(false, \"Preset \" + preset_id + \" found multiple times.\");\n      }\n\n      this._save_presets(presets);\n    }\n  }, {\n    key: \"_get_presets\",\n    value: function _get_presets() {\n      var presets = store.get_val(this._storage_key) || []; // Validation\n\n      assert(presets.constructor === Array);\n      presets = presets.map(function (preset_data) {\n        return new PresetData(preset_data);\n      });\n      return presets;\n    }\n  }, {\n    key: \"_save_presets\",\n    value: function _save_presets(presets) {\n      // Validation\n      assert(presets.constructor === Array);\n      presets.forEach(function (preset_data) {\n        assert(preset_data instanceof PresetData);\n      });\n      store.set_val(this._storage_key, presets);\n    }\n  }, {\n    key: \"_storage_key\",\n    get: function get() {\n      return _classPrivateFieldLooseBase(this, _subapp_id)[_subapp_id] + \"_presets\";\n    }\n  }]);\n\n  return PresetSavior;\n}();\n\nvar _subapp_id = _classPrivateFieldLooseKey(\"subapp_id\");\n\nvar FakePreset = /*#__PURE__*/function () {\n  function FakePreset() {\n    _classCallCheck(this, FakePreset);\n\n    this.is_randomizer_preset = void 0;\n    this.is_creator_preset = void 0;\n    this.preset_id = void 0;\n    this.preset_name = void 0;\n  }\n\n  _createClass(FakePreset, [{\n    key: \"get_preset_value\",\n    value: function get_preset_value() {\n      return null;\n    }\n  }]);\n\n  return FakePreset;\n}();\n\nvar RandomizerPreset = /*#__PURE__*/function (_FakePreset) {\n  _inherits(RandomizerPreset, _FakePreset);\n\n  function RandomizerPreset(_ref20) {\n    var _this20;\n\n    var preset_list = _ref20.preset_list;\n\n    _classCallCheck(this, RandomizerPreset);\n\n    _this20 = _possibleConstructorReturn(this, _getPrototypeOf(RandomizerPreset).call(this));\n    Object.defineProperty(_assertThisInitialized(_this20), _picked, {\n      writable: true,\n      value: null\n    });\n    _this20.is_randomizer_preset = true;\n    _this20.is_creator_preset = false;\n    _this20.preset_id = \"_random\";\n    _this20.preset_name = \"<Random>\";\n    _this20.preset_list = void 0;\n    _this20.is_randomizer_preset = true;\n    _this20.preset_list = preset_list;\n    return _this20;\n  }\n\n  _createClass(RandomizerPreset, [{\n    key: \"pick_random_preset\",\n    value: function pick_random_preset() {\n      var random_candidates = this.preset_list.random_candidates;\n      var idx = Math.floor(Math.random() * random_candidates.length);\n      return random_candidates[idx];\n    }\n  }, {\n    key: \"random_preset\",\n    get: function get() {\n      if (!_classPrivateFieldLooseBase(this, _picked)[_picked]) {\n        _classPrivateFieldLooseBase(this, _picked)[_picked] = this.pick_random_preset();\n      }\n\n      assert(_classPrivateFieldLooseBase(this, _picked)[_picked].is_real_preset, _classPrivateFieldLooseBase(this, _picked)[_picked].preset_id, _classPrivateFieldLooseBase(this, _picked)[_picked]);\n      return _classPrivateFieldLooseBase(this, _picked)[_picked];\n    }\n  }]);\n\n  return RandomizerPreset;\n}(FakePreset);\n\nvar _picked = _classPrivateFieldLooseKey(\"picked\");\n\nvar CreatorPreset = /*#__PURE__*/function (_FakePreset2) {\n  _inherits(CreatorPreset, _FakePreset2);\n\n  function CreatorPreset() {\n    var _getPrototypeOf5;\n\n    var _this21;\n\n    _classCallCheck(this, CreatorPreset);\n\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    _this21 = _possibleConstructorReturn(this, (_getPrototypeOf5 = _getPrototypeOf(CreatorPreset)).call.apply(_getPrototypeOf5, [this].concat(args)));\n    _this21.is_randomizer_preset = false;\n    _this21.is_creator_preset = true;\n    _this21.preset_id = \"_creator\";\n    _this21.preset_name = \"<Creator>\";\n    return _this21;\n  }\n\n  return CreatorPreset;\n}(FakePreset);\n\nvar NameIdConverter = /*#__PURE__*/function () {\n  function NameIdConverter() {\n    _classCallCheck(this, NameIdConverter);\n  }\n\n  _createClass(NameIdConverter, null, [{\n    key: \"from_id_to_name\",\n    value: function from_id_to_name(id) {\n      assert(id);\n      var sep_regex = /[-_]/;\n      assert(\"--a-_-_--\".split(sep_regex).filter(Boolean).join(\"\") === \"a\");\n      var name = id.split(sep_regex).filter(Boolean).map(function (word) {\n        return word[0].toUpperCase() + word.slice(1);\n      }).join(\" \"); // console.log({id, name});\n\n      return name;\n    }\n  }, {\n    key: \"from_name_to_id\",\n    value: function from_name_to_id(name) {\n      assert(name);\n      var sep_regex = /[\\s-_]/;\n      assert(\"  -- a-  _-  _--\".split(sep_regex).filter(Boolean).join(\"\") === \"a\");\n      var id = name.split(sep_regex).filter(Boolean).join(NameIdConverter.white_space_seralized).toLowerCase(); // console.log({name, id});\n\n      return id;\n    }\n  }]);\n\n  return NameIdConverter;\n}();\n\nNameIdConverter.white_space_seralized = \"-\";\n\nfunction make_unique(arr) {\n  return Array.from(new Set(arr.filter(Boolean))).sort();\n} // TODO-later\n// What Preset values should be required before saving? What happens when the user sets some to ''?\n// TypeScript\n//  - Create a strict type for preset_id\n\n\nvar LinkSerializer = /*#__PURE__*/function () {\n  function LinkSerializer() {\n    _classCallCheck(this, LinkSerializer);\n  }\n\n  _createClass(LinkSerializer, null, [{\n    key: \"_to_base64\",\n    value: function _to_base64(str) {\n      var str__base64 = window.btoa(str);\n      assert(window.btoa(\"ab?\") === \"YWI/\");\n      str__base64 = str__base64.split(\"/\").join(\"_\");\n      assert(window.btoa(\"ab>\") === \"YWI+\");\n      str__base64 = str__base64.split(\"+\").join(\"-\");\n      return str__base64;\n    }\n  }, {\n    key: \"_from_base64\",\n    value: function _from_base64(str__base64) {\n      str__base64 = str__base64.split(\"_\").join(\"/\");\n      str__base64 = str__base64.split(\"-\").join(\"+\");\n      var str = window.atob(str__base64);\n      return str;\n    }\n  }, {\n    key: \"to_url\",\n    value: function to_url(preset) {\n      assert(preset instanceof Preset);\n      assert(preset.is_saved_preset);\n      var preset_string = PresetSerializer.serialize_preset(preset);\n\n      var preset_base64 = this._to_base64(preset_string);\n\n      var url_base = window.location.href.split(\"#\")[0];\n      var preset_id = preset.preset_id;\n      var name_encoded = encodeURIComponent(preset_id); // @ts-ignore\n\n      assert.warning(name !== name_encoded, {\n        name: name,\n        name_encoded: name_encoded\n      });\n      var link = url_base + \"#\" + name_encoded + \"/\" + preset_base64;\n      return link;\n    }\n  }, {\n    key: \"from_url\",\n    value: function from_url() {\n      var preset_url = window.location.href;\n      var pipe_data = preset_url.split(\"#\")[1];\n\n      if (!pipe_data) {\n        return null;\n      } // Old Clock Tab URL for fullscreen mode\n\n\n      if ([\"/fullscreen\", \"fullscreen\"].includes(pipe_data)) {\n        return null;\n      } // Not sure why some users have a Data URI appended to their URL\n\n\n      if (pipe_data.startsWith(\"data:image\")) {\n        return null;\n      }\n\n      pipe_data = pipe_data.split(\"/\").filter(Boolean)[1];\n\n      if (!pipe_data) {\n        return null;\n      }\n\n      try {\n        pipe_data = this._from_base64(pipe_data);\n      } catch (err) {\n        on_error(err);\n        return null;\n      }\n\n      var preset_data;\n\n      try {\n        preset_data = PresetSerializer.deserialize_preset(pipe_data);\n      } catch (err) {\n        on_error(err);\n        return null;\n      }\n\n      return preset_data;\n\n      function on_error(err) {\n        show_toast(\"Wrong URL. The URL could not be processed.\", {\n          is_error: true\n        });\n        track_error({\n          name: \"preset_url_parsing\",\n          value: pipe_data,\n          err: err\n        });\n        console.log(pipe_data);\n        console.error(err);\n      }\n    }\n  }]);\n\n  return LinkSerializer;\n}();","\"use strict\";\n\nimport { migrate_ancient_schema } from \"./migrations/001-ancient-schema\";\nimport { migrate_user_preset_ids_and_values } from \"./migrations/002-migrate-user-preset-ids-and-values\";\nimport { migrate_subapp_id } from \"./migrations/003-migrate-subapp-id\";\nimport { migrate_old_timer_tab_schema } from \"./migrations/004-migrate-old-timer-tab-schema\";\nimport { migrate_to_centralized_store } from \"./migrations/005-migrate-to-centralized-store\";\nimport { store } from \"../store\";\nimport assert from \"@brillout/assert\";\nexport { run_migrations };\n\nfunction run_migrations() {\n  if (typeof window === \"undefined\") {\n    return;\n  }\n\n  var migrators = [migrate_ancient_schema, migrate_user_preset_ids_and_values, migrate_subapp_id, migrate_old_timer_tab_schema, migrate_to_centralized_store];\n  var schema_version__curent = store.get_schema_version();\n  assert(schema_version__curent.constructor === Date);\n  migrators.forEach(function (migrator, i) {\n    var schema_version = migrator.schema_version;\n    assert(schema_version.constructor === Date);\n    assert(i === migrators.length - 1 || schema_version.getTime() < migrators[i + 1].schema_version.getTime());\n\n    if (schema_version__curent.getTime() < schema_version.getTime()) {\n      migrator();\n      store.set_schema_version(schema_version);\n    }\n  });\n}"],"sourceRoot":""}